var sj=Object.defineProperty;var oj=(t,e,r)=>e in t?sj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Tt=(t,e,r)=>oj(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Qce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ny={exports:{}},jm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function Aj(){if(BT)return jm;BT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:s,ref:i!==void 0?i:null,props:a}}return jm.Fragment=e,jm.jsx=r,jm.jsxs=r,jm}var CT;function lj(){return CT||(CT=1,ny.exports=Aj()),ny.exports}var f=lj(),iy={exports:{}},Or={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function cj(){if(ST)return Or;ST=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function m(ne){return ne===null||typeof ne!="object"?null:(ne=g&&ne[g]||ne["@@iterator"],typeof ne=="function"?ne:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function _(ne,I,Q){this.props=ne,this.context=I,this.refs=b,this.updater=Q||w}_.prototype.isReactComponent={},_.prototype.setState=function(ne,I){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,I,"setState")},_.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function C(){}C.prototype=_.prototype;function T(ne,I,Q){this.props=ne,this.context=I,this.refs=b,this.updater=Q||w}var S=T.prototype=new C;S.constructor=T,v(S,_.prototype),S.isPureReactComponent=!0;var O=Array.isArray;function j(){}var U={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function F(ne,I,Q){var z=Q.ref;return{$$typeof:t,type:ne,key:I,ref:z!==void 0?z:null,props:Q}}function H(ne,I){return F(ne.type,I,ne.props)}function L(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function k(ne){var I={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Q){return I[Q]})}var G=/\/+/g;function q(ne,I){if(typeof ne=="object"&&ne!==null&&ne.key!=null)return k(""+ne.key);if(I==null)return '0';return I.toString(36)}function ce(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(j,j):(ne.status="pending",ne.then(function(I){ne.status==="pending"&&(ne.status="fulfilled",ne.value=I)},function(I){ne.status==="pending"&&(ne.status="rejected",ne.reason=I)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function Y(ne,I,Q,z,W){var re=typeof ne;(re==="undefined"||re==="boolean")&&(ne=null);var Ae=!1;if(ne===null)Ae=!0;else switch(re){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(ne.$$typeof){case t:case e:Ae=!0;break;case d:return Ae=ne._init,Y(Ae(ne._payload),I,Q,z,W)}}if(Ae)return W=W(ne),Ae=z===""?"."+q(ne,0):z,O(W)?(Q="",Ae!=null&&(Q=Ae.replace(G,"$&/")+"/"),Y(W,I,Q,"",function(Ne){return Ne})):W!=null&&(L(W)&&(W=H(W,Q+(W.key==null||ne&&ne.key===W.key?"":(""+W.key).replace(G,"$&/")+"/")+Ae)),I.push(W)),1;Ae=0;var be=z===""?".":z+":";if(O(ne))for(var Se=0;Se<ne.length;Se++)z=ne[Se],re=be+q(z,Se),Ae+=Y(z,I,Q,re,W);else if(Se=m(ne),typeof Se=="function")for(ne=Se.call(ne),Se=0;!(z=ne.next()).done;)z=z.value,re=be+q(z,Se++),Ae+=Y(z,I,Q,re,W);else if(re==="object"){if(typeof ne.then=="function")return Y(ce(ne),I,Q,z,W);throw I=String(ne),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ie(ne,I,Q){if(ne==null)return ne;var z=[],W=0;return Y(ne,z,"","",function(re){return I.call(Q,re,W++)}),z}function me(ne){if(ne._status===-1){var I=ne._result;I=I(),I.then(function(Q){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Q)},function(Q){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Q)}),ne._status===-1&&(ne._status=0,ne._result=I)}if(ne._status===1)return ne._result.default;throw ne._result}var Te=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},ue={map:ie,forEach:function(ne,I,Q){ie(ne,function(){I.apply(this,arguments)},Q)},count:function(ne){var I=0;return ie(ne,function(){I++}),I},toArray:function(ne){return ie(ne,function(I){return I})||[]},only:function(ne){if(!L(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return Or.Activity=p,Or.Children=ue,Or.Component=_,Or.Fragment=r,Or.Profiler=i,Or.PureComponent=T,Or.StrictMode=n,Or.Suspense=l,Or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Or.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return U.H.useMemoCache(ne)}},Or.cache=function(ne){return function(){return ne.apply(null,arguments)}},Or.cacheSignal=function(){return null},Or.cloneElement=function(ne,I,Q){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var z=v({},ne.props),W=ne.key;if(I!=null)for(re in I.key!==void 0&&(W=""+I.key),I)!P.call(I,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&I.ref===void 0||(z[re]=I[re]);var re=arguments.length-2;if(re===1)z.children=Q;else if(1<re){for(var Ae=Array(re),be=0;be<re;be++)Ae[be]=arguments[be+2];z.children=Ae}return F(ne.type,W,z)},Or.createContext=function(ne){return ne={$$typeof:s,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:a,_context:ne},ne},Or.createElement=function(ne,I,Q){var z,W={},re=null;if(I!=null)for(z in I.key!==void 0&&(re=""+I.key),I)P.call(I,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(W[z]=I[z]);var Ae=arguments.length-2;if(Ae===1)W.children=Q;else if(1<Ae){for(var be=Array(Ae),Se=0;Se<Ae;Se++)be[Se]=arguments[Se+2];W.children=be}if(ne&&ne.defaultProps)for(z in Ae=ne.defaultProps,Ae)W[z]===void 0&&(W[z]=Ae[z]);return F(ne,re,W)},Or.createRef=function(){return{current:null}},Or.forwardRef=function(ne){return{$$typeof:o,render:ne}},Or.isValidElement=L,Or.lazy=function(ne){return{$$typeof:d,_payload:{_status:-1,_result:ne},_init:me}},Or.memo=function(ne,I){return{$$typeof:c,type:ne,compare:I===void 0?null:I}},Or.startTransition=function(ne){var I=U.T,Q={};U.T=Q;try{var z=ne(),W=U.S;W!==null&&W(Q,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(j,Te)}catch(re){Te(re)}finally{I!==null&&Q.types!==null&&(I.types=Q.types),U.T=I}},Or.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Or.use=function(ne){return U.H.use(ne)},Or.useActionState=function(ne,I,Q){return U.H.useActionState(ne,I,Q)},Or.useCallback=function(ne,I){return U.H.useCallback(ne,I)},Or.useContext=function(ne){return U.H.useContext(ne)},Or.useDebugValue=function(){},Or.useDeferredValue=function(ne,I){return U.H.useDeferredValue(ne,I)},Or.useEffect=function(ne,I){return U.H.useEffect(ne,I)},Or.useEffectEvent=function(ne){return U.H.useEffectEvent(ne)},Or.useId=function(){return U.H.useId()},Or.useImperativeHandle=function(ne,I,Q){return U.H.useImperativeHandle(ne,I,Q)},Or.useInsertionEffect=function(ne,I){return U.H.useInsertionEffect(ne,I)},Or.useLayoutEffect=function(ne,I){return U.H.useLayoutEffect(ne,I)},Or.useMemo=function(ne,I){return U.H.useMemo(ne,I)},Or.useOptimistic=function(ne,I){return U.H.useOptimistic(ne,I)},Or.useReducer=function(ne,I,Q){return U.H.useReducer(ne,I,Q)},Or.useRef=function(ne){return U.H.useRef(ne)},Or.useState=function(ne){return U.H.useState(ne)},Or.useSyncExternalStore=function(ne,I,Q){return U.H.useSyncExternalStore(ne,I,Q)},Or.useTransition=function(){return U.H.useTransition()},Or.version="19.2.0",Or}var TT;function xB(){return TT||(TT=1,iy.exports=cj()),iy.exports}var X=xB();const Nr=sU(X);var ay={exports:{}},Qm={},sy={exports:{}},oy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function uj(){return NT||(NT=1,(function(t){function e(Y,ie){var me=Y.length;Y.push(ie);e:for(;0<me;){var Te=me-1>>>1,ue=Y[Te];if(0<i(ue,ie))Y[Te]=ie,Y[me]=ue,me=Te;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ie=Y[0],me=Y.pop();if(me!==ie){Y[0]=me;e:for(var Te=0,ue=Y.length,ne=ue>>>1;Te<ne;){var I=2*(Te+1)-1,Q=Y[I],z=I+1,W=Y[z];if(0>i(Q,me))z<ue&&0>i(W,Q)?(Y[Te]=W,Y[z]=me,Te=z):(Y[Te]=Q,Y[I]=me,Te=I);else if(z<ue&&0>i(W,me))Y[Te]=W,Y[z]=me,Te=z;else break e}}return ie}function i(Y,ie){var me=Y.sortIndex-ie.sortIndex;return me!==0?me:Y.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,p=null,g=3,m=!1,w=!1,v=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function S(Y){for(var ie=r(c);ie!==null;){if(ie.callback===null)n(c);else if(ie.startTime<=Y)n(c),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=r(c)}}function O(Y){if(v=!1,S(Y),!w)if(r(l)!==null)w=!0,j||(j=!0,k());else{var ie=r(c);ie!==null&&ce(O,ie.startTime-Y)}}var j=!1,U=-1,P=5,F=-1;function H(){return b?!0:!(t.unstable_now()-F<P)}function L(){if(b=!1,j){var Y=t.unstable_now();F=Y;var ie=!0;try{e:{w=!1,v&&(v=!1,C(U),U=-1),m=!0;var me=g;try{t:{for(S(Y),p=r(l);p!==null&&!(p.expirationTime>Y&&H());){var Te=p.callback;if(typeof Te=="function"){p.callback=null,g=p.priorityLevel;var ue=Te(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof ue=="function"){p.callback=ue,S(Y),ie=!0;break t}p===r(l)&&n(l),S(Y)}else n(l);p=r(l)}if(p!==null)ie=!0;else{var ne=r(c);ne!==null&&ce(O,ne.startTime-Y),ie=!1}}break e}finally{p=null,g=me,m=!1}ie=void 0}}finally{ie?k():j=!1}}}var k;if(typeof T=="function")k=function(){T(L)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,q=G.port2;G.port1.onmessage=L,k=function(){q.postMessage(null)}}else k=function(){_(L,0)};function ce(Y,ie){U=_(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var me=g;g=ie;try{return Y()}finally{g=me}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var me=g;g=Y;try{return ie()}finally{g=me}},t.unstable_scheduleCallback=function(Y,ie,me){var Te=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Te+me:Te):me=Te,Y){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=me+ue,Y={id:d++,callback:ie,priorityLevel:Y,startTime:me,expirationTime:ue,sortIndex:-1},me>Te?(Y.sortIndex=me,e(c,Y),r(l)===null&&Y===r(c)&&(v?(C(U),U=-1):v=!0,ce(O,me-Te))):(Y.sortIndex=ue,e(l,Y),w||m||(w=!0,j||(j=!0,k()))),Y},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(Y){var ie=g;return function(){var me=g;g=ie;try{return Y.apply(this,arguments)}finally{g=me}}}})(oy)),oy}var FT;function fj(){return FT||(FT=1,sy.exports=uj()),sy.exports}var Ay={exports:{}},Bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function dj(){if(IT)return Bs;IT=1;var t=xB();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:l,containerInfo:c,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Bs.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,d)},Bs.flushSync=function(l){var c=s.T,d=n.p;try{if(s.T=null,n.p=2,l)return l()}finally{s.T=c,n.p=d,n.d.f()}},Bs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},Bs.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Bs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,p=o(d,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):d==="script"&&n.d.X(l,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Bs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},Bs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,p=o(d,c.crossOrigin);n.d.L(l,d,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Bs.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},Bs.requestFormReset=function(l){n.d.r(l)},Bs.unstable_batchedUpdates=function(l,c){return l(c)},Bs.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},Bs.useFormStatus=function(){return s.H.useHostTransitionStatus()},Bs.version="19.2.0",Bs}var DT;function hj(){if(DT)return Ay.exports;DT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ay.exports=dj(),Ay.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function pj(){if(LT)return Qm;LT=1;var t=fj(),e=xB(),r=hj();function n(A){var u="https://react.dev/errors/"+A;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+A+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var u=A,h=A;if(A.alternate)for(;u.return;)u=u.return;else{A=u;do u=A,(u.flags&4098)!==0&&(h=u.return),A=u.return;while(A)}return u.tag===3?h:null}function s(A){if(A.tag===13){var u=A.memoizedState;if(u===null&&(A=A.alternate,A!==null&&(u=A.memoizedState)),u!==null)return u.dehydrated}return null}function o(A){if(A.tag===31){var u=A.memoizedState;if(u===null&&(A=A.alternate,A!==null&&(u=A.memoizedState)),u!==null)return u.dehydrated}return null}function l(A){if(a(A)!==A)throw Error(n(188))}function c(A){var u=A.alternate;if(!u){if(u=a(A),u===null)throw Error(n(188));return u!==A?null:A}for(var h=A,x=u;;){var E=h.return;if(E===null)break;var N=E.alternate;if(N===null){if(x=E.return,x!==null){h=x;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===h)return l(E),A;if(N===x)return l(E),u;N=N.sibling}throw Error(n(188))}if(h.return!==x.return)h=E,x=N;else{for(var K=!1,fe=E.child;fe;){if(fe===h){K=!0,h=E,x=N;break}if(fe===x){K=!0,x=E,h=N;break}fe=fe.sibling}if(!K){for(fe=N.child;fe;){if(fe===h){K=!0,h=N,x=E;break}if(fe===x){K=!0,x=N,h=E;break}fe=fe.sibling}if(!K)throw Error(n(189))}}if(h.alternate!==x)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?A:u}function d(A){var u=A.tag;if(u===5||u===26||u===27||u===6)return A;for(A=A.child;A!==null;){if(u=d(A),u!==null)return u;A=A.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=L&&A[L]||A["@@iterator"],typeof A=="function"?A:null)}var G=Symbol.for("react.client.reference");function q(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===G?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case v:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case O:return"Suspense";case j:return"SuspenseList";case F:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case w:return"Portal";case T:return A.displayName||"Context";case C:return(A._context.displayName||"Context")+".Consumer";case S:var u=A.render;return A=A.displayName,A||(A=u.displayName||u.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case U:return u=A.displayName||null,u!==null?u:q(A.type)||"Memo";case P:u=A._payload,A=A._init;try{return q(A(u))}catch{}}return null}var ce=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Te=[],ue=-1;function ne(A){return{current:A}}function I(A){0>ue||(A.current=Te[ue],Te[ue]=null,ue--)}function Q(A,u){ue++,Te[ue]=A.current,A.current=u}var z=ne(null),W=ne(null),re=ne(null),Ae=ne(null);function be(A,u){switch(Q(re,u),Q(W,A),Q(z,null),u.nodeType){case 9:case 11:A=(A=u.documentElement)&&(A=A.namespaceURI)?Y4(A):0;break;default:if(A=u.tagName,u=u.namespaceURI)u=Y4(u),A=X4(u,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}I(z),Q(z,A)}function Se(){I(z),I(W),I(re)}function Ne(A){A.memoizedState!==null&&Q(Ae,A);var u=z.current,h=X4(u,A.type);u!==h&&(Q(W,A),Q(z,h))}function qe(A){W.current===A&&(I(z),I(W)),Ae.current===A&&(I(Ae),Om._currentValue=me)}var Ue,at;function Oe(A){if(Ue===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Ue=u&&u[1]||"",at=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
@@ -396,26 +396,26 @@ PERFORMANCE OF THIS SOFTWARE.
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function HM(t,e){if(e.bookType=="fods")return JL(t,e);var r=KC(),n="",i=[],a=[];return n="mimetype",Kr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Kr(r,n,JL(t,e)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",Kr(r,n,ale(t,e)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",Kr(r,n,Ba+rM()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",Kr(r,n,gne(a)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Kr(r,n,pne(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function A5(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sle(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Hl(z1(t))}function ole(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function gd(t){var e=t.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function Ale(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;i>=1;++a,i/=256)t[e+a]=i&255;t[e+15]|=r>=0?0:128}function V1(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Rn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Up(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Pa(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=V1(t,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:s=4,o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=V1(t,r),o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:a};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function fs(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(Rn(n*8+i.type)),i.type==2&&e.push(Rn(i.data.length)),e.push(i.data))})}),gd(e)}function Ml(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=V1(t,n),a=Pa(t.slice(n[0],n[0]+i));n[0]+=i;var s={id:Up(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Pa(o.data),c=Up(l[3][0].data);s.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=a[3])!=null&&e[0]&&(s.merge=Up(a[3][0].data)>>>0>0),r.push(s)}return r}function tp(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Rn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Rn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(s){i.push(s.data),s.meta[3]=[{type:0,data:Rn(s.data.length)}],n[2].push({data:fs(s.meta),type:2})});var a=fs(n);e.push(Rn(a.length)),e.push(a),i.forEach(function(s){return e.push(s)})}),gd(e)}function lle(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=V1(e,r),i=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var s=e[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=e[r[0]],o>1&&(s|=e[r[0]+1]<<8),o>2&&(s|=e[r[0]+2]<<16),o>3&&(s|=e[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(e.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,c=0;if(a==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[gd(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var d=gd(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Pl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(lle(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return gd(e)}function rp(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var a=Rn(n),s=a.length;e.push(a),n<=60?(s++,e.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),s+=n,i[0]=0,i[1]=s&255,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return gd(e)}function P_(t,e){var r=new Uint8Array(32),n=A5(r),i=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,Ale(r,i,t.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),a|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,i)}function j_(t,e){var r=new Uint8Array(32),n=A5(r),i=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),a|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,i)}function If(t){var e=Pa(t);return V1(e[1][0].data)}function cle(t,e,r){var n,i,a,s;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(a=t[8])==null?void 0:a[0])==null?void 0:s.data)&&Up(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=A5(t[7][0].data),d=0,p=[],g=A5(t[4][0].data),m=0,w=[],v=0;v<e.length;++v){if(e[v]==null){c.setUint16(v*2,65535,!0),g.setUint16(v*2,65535);continue}c.setUint16(v*2,d,!0),g.setUint16(v*2,m,!0);var b,_;switch(typeof e[v]){case"string":b=P_({t:"s",v:e[v]},r),_=j_({t:"s",v:e[v]},r);break;case"number":b=P_({t:"n",v:e[v]},r),_=j_({t:"n",v:e[v]},r);break;case"boolean":b=P_({t:"b",v:e[v]},r),_=j_({t:"b",v:e[v]},r);break;default:throw new Error("Unsupported value "+e[v])}p.push(b),d+=b.length,w.push(_),m+=_.length,++l}for(t[2][0].data=Rn(l);v<t[7][0].data.length/2;++v)c.setUint16(v*2,65535,!0),g.setUint16(v*2,65535,!0);return t[6][0].data=gd(p),t[3][0].data=gd(w),l}function ule(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=CA(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ea(n)));var a=l5(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach(function(Q){return Q.forEach(function(z){typeof z=="string"&&s.push(z)})});var o={},l=[],c=qn.read(e.numbers,{type:"base64"});c.FileIndex.map(function(Q,z){return[Q,c.FullPaths[z]]}).forEach(function(Q){var z=Q[0],W=Q[1];if(z.type==2&&z.name.match(/\.iwa/)){var re=z.content,Ae=Pl(re),be=Ml(Ae);be.forEach(function(Se){l.push(Se.id),o[Se.id]={deps:[],location:W,type:Up(Se.messages[0].meta[1][0].data)}})}}),l.sort(function(Q,z){return Q-z});var d=l.filter(function(Q){return Q>1}).map(function(Q){return[Q,Rn(Q)]});c.FileIndex.map(function(Q,z){return[Q,c.FullPaths[z]]}).forEach(function(Q){var z=Q[0];if(Q[1],!!z.name.match(/\.iwa/)){var W=Ml(Pl(z.content));W.forEach(function(re){re.messages.forEach(function(Ae){d.forEach(function(be){re.messages.some(function(Se){return Up(Se.meta[1][0].data)!=11006&&ole(Se.data,be[1])})&&o[be[0]].deps.push(re.id)})})})}});for(var p=qn.find(c,o[1].location),g=Ml(Pl(p.content)),m,w=0;w<g.length;++w){var v=g[w];v.id==1&&(m=v)}var b=If(Pa(m.messages[0].data)[1][0].data);for(p=qn.find(c,o[b].location),g=Ml(Pl(p.content)),w=0;w<g.length;++w)v=g[w],v.id==b&&(m=v);for(b=If(Pa(m.messages[0].data)[2][0].data),p=qn.find(c,o[b].location),g=Ml(Pl(p.content)),w=0;w<g.length;++w)v=g[w],v.id==b&&(m=v);for(b=If(Pa(m.messages[0].data)[2][0].data),p=qn.find(c,o[b].location),g=Ml(Pl(p.content)),w=0;w<g.length;++w)v=g[w],v.id==b&&(m=v);var _=Pa(m.messages[0].data);{_[6][0].data=Rn(n.e.r+1),_[7][0].data=Rn(n.e.c+1);var C=If(_[46][0].data),T=qn.find(c,o[C].location),S=Ml(Pl(T.content));{for(var O=0;O<S.length&&S[O].id!=C;++O);if(S[O].id!=C)throw"Bad ColumnRowUIDMapArchive";var j=Pa(S[O].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var U=0;U<=n.e.c;++U){var P=[];P[1]=P[2]=[{type:0,data:Rn(U+420690)}],j[1].push({type:2,data:fs(P)}),j[2].push({type:0,data:Rn(U)}),j[3].push({type:0,data:Rn(U)})}j[4]=[],j[5]=[],j[6]=[];for(var F=0;F<=n.e.r;++F)P=[],P[1]=P[2]=[{type:0,data:Rn(F+726270)}],j[4].push({type:2,data:fs(P)}),j[5].push({type:0,data:Rn(F)}),j[6].push({type:0,data:Rn(F)});S[O].messages[0].data=fs(j)}T.content=rp(tp(S)),T.size=T.content.length,delete _[46];var H=Pa(_[4][0].data);{H[7][0].data=Rn(n.e.r+1);var L=Pa(H[1][0].data),k=If(L[2][0].data);T=qn.find(c,o[k].location),S=Ml(Pl(T.content));{if(S[0].id!=k)throw"Bad HeaderStorageBucket";var G=Pa(S[0].messages[0].data);for(F=0;F<a.length;++F){var q=Pa(G[2][0].data);q[1][0].data=Rn(F),q[4][0].data=Rn(a[F].length),G[2][F]={type:G[2][0].type,data:fs(q)}}S[0].messages[0].data=fs(G)}T.content=rp(tp(S)),T.size=T.content.length;var ce=If(H[2][0].data);T=qn.find(c,o[ce].location),S=Ml(Pl(T.content));{if(S[0].id!=ce)throw"Bad HeaderStorageBucket";for(G=Pa(S[0].messages[0].data),U=0;U<=n.e.c;++U)q=Pa(G[2][0].data),q[1][0].data=Rn(U),q[4][0].data=Rn(n.e.r+1),G[2][U]={type:G[2][0].type,data:fs(q)};S[0].messages[0].data=fs(G)}T.content=rp(tp(S)),T.size=T.content.length;var Y=If(H[4][0].data);(function(){for(var Q=qn.find(c,o[Y].location),z=Ml(Pl(Q.content)),W,re=0;re<z.length;++re){var Ae=z[re];Ae.id==Y&&(W=Ae)}var be=Pa(W.messages[0].data);{be[3]=[];var Se=[];s.forEach(function(Ue,at){Se[1]=[{type:0,data:Rn(at)}],Se[2]=[{type:0,data:Rn(1)}],Se[3]=[{type:2,data:sle(Ue)}],be[3].push({type:2,data:fs(Se)})})}W.messages[0].data=fs(be);var Ne=tp(z),qe=rp(Ne);Q.content=qe,Q.size=Q.content.length})();var ie=Pa(H[3][0].data);{var me=ie[1][0];delete ie[2];var Te=Pa(me.data);{var ue=If(Te[2][0].data);(function(){for(var Q=qn.find(c,o[ue].location),z=Ml(Pl(Q.content)),W,re=0;re<z.length;++re){var Ae=z[re];Ae.id==ue&&(W=Ae)}var be=Pa(W.messages[0].data);{delete be[6],delete ie[7];var Se=new Uint8Array(be[5][0].data);be[5]=[];for(var Ne=0,qe=0;qe<=n.e.r;++qe){var Ue=Pa(Se);Ne+=cle(Ue,a[qe],s),Ue[1][0].data=Rn(qe),be[5].push({data:fs(Ue),type:2})}be[1]=[{type:0,data:Rn(n.e.c+1)}],be[2]=[{type:0,data:Rn(n.e.r+1)}],be[3]=[{type:0,data:Rn(Ne)}],be[4]=[{type:0,data:Rn(n.e.r+1)}]}W.messages[0].data=fs(be);var at=tp(z),Oe=rp(at);Q.content=Oe,Q.size=Q.content.length})()}me.data=fs(Te)}H[3][0].data=fs(ie)}_[4][0].data=fs(H)}m.messages[0].data=fs(_);var ne=tp(g),I=rp(ne);return p.content=I,p.size=p.content.length,c}function fle(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function AS(t){fle([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function dle(t,e){return e.bookType=="ods"?HM(t,e):e.bookType=="numbers"?ule(t,e):e.bookType=="xlsb"?hle(t,e):ple(t,e)}function hle(t,e){pp=1024,t&&!t.SSF&&(t.SSF=Ho(Zi)),t&&t.SSF&&(j5(),P5(t.SSF),e.revssf=Q5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,o1?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=EM.indexOf(e.bookType)>-1,i=Z8();AS(e=e||{});var a=KC(),s="",o=0;if(e.cellXfs=[],wd(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),s="docProps/core.xml",Kr(a,s,nM(t.Props,e)),i.coreprops.push(s),Mn(e.rels,2,s,En.CORE_PROPS),s="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Kr(a,s,aM(t.Props)),i.extprops.push(s),Mn(e.rels,3,s,En.EXT_PROPS),t.Custprops!==t.Props&&bs(t.Custprops||{}).length>0&&(s="docProps/custom.xml",Kr(a,s,sM(t.Custprops)),i.custprops.push(s),Mn(e.rels,4,s,En.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,Kr(a,s,gAe(o-1,s,e,t,d)),i.sheets.push(s),Mn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(p){var m=p["!comments"],w=!1,v="";m&&m.length>0&&(v="xl/comments"+o+"."+r,Kr(a,v,wAe(m,v)),i.comments.push(v),Mn(d,-1,"../comments"+o+"."+r,En.CMNT),w=!0),p["!legacy"]&&w&&Kr(a,"xl/drawings/vmlDrawing"+o+".vml",yM(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&Kr(a,tM(s),Dp(d))}return e.Strings!=null&&e.Strings.length>0&&(s="xl/sharedStrings."+r,Kr(a,s,vAe(e.Strings,s,e)),i.strs.push(s),Mn(e.wbrels,-1,"sharedStrings."+r,En.SST)),s="xl/workbook."+r,Kr(a,s,mAe(t,s)),i.workbooks.push(s),Mn(e.rels,1,s,En.WB),s="xl/theme/theme1.xml",Kr(a,s,wM(t.Themes,e)),i.themes.push(s),Mn(e.wbrels,-1,"theme/theme1.xml",En.THEME),s="xl/styles."+r,Kr(a,s,xAe(t,s,e)),i.styles.push(s),Mn(e.wbrels,-1,"styles."+r,En.STY),t.vbaraw&&n&&(s="xl/vbaProject.bin",Kr(a,s,t.vbaraw),i.vba.push(s),Mn(e.wbrels,-1,"vbaProject.bin",En.VBA)),s="xl/metadata."+r,Kr(a,s,bAe(s)),i.metadata.push(s),Mn(e.wbrels,-1,"metadata."+r,En.XLMETA),Kr(a,"[Content_Types].xml",eM(i,e)),Kr(a,"_rels/.rels",Dp(e.rels)),Kr(a,"xl/_rels/workbook."+r+".rels",Dp(e.wbrels)),delete e.revssf,delete e.ssf,a}function ple(t,e){pp=1024,t&&!t.SSF&&(t.SSF=Ho(Zi)),t&&t.SSF&&(j5(),P5(t.SSF),e.revssf=Q5(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,o1?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=EM.indexOf(e.bookType)>-1,i=Z8();AS(e=e||{});var a=KC(),s="",o=0;if(e.cellXfs=[],wd(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),s="docProps/core.xml",Kr(a,s,nM(t.Props,e)),i.coreprops.push(s),Mn(e.rels,2,s,En.CORE_PROPS),s="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Kr(a,s,aM(t.Props)),i.extprops.push(s),Mn(e.rels,3,s,En.EXT_PROPS),t.Custprops!==t.Props&&bs(t.Custprops||{}).length>0&&(s="docProps/custom.xml",Kr(a,s,sM(t.Custprops)),i.custprops.push(s),Mn(e.rels,4,s,En.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var p={"!id":{}},g=t.Sheets[t.SheetNames[o-1]],m=(g||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,Kr(a,s,LM(o-1,e,t,p)),i.sheets.push(s),Mn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(g){var w=g["!comments"],v=!1,b="";if(w&&w.length>0){var _=!1;w.forEach(function(C){C[1].forEach(function(T){T.T==!0&&(_=!0)})}),_&&(b="xl/threadedComments/threadedComment"+o+"."+r,Kr(a,b,Kie(w,d,e)),i.threadedcomments.push(b),Mn(p,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),b="xl/comments"+o+"."+r,Kr(a,b,_M(w)),i.comments.push(b),Mn(p,-1,"../comments"+o+"."+r,En.CMNT),v=!0}g["!legacy"]&&v&&Kr(a,"xl/drawings/vmlDrawing"+o+".vml",yM(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&Kr(a,tM(s),Dp(p))}return e.Strings!=null&&e.Strings.length>0&&(s="xl/sharedStrings."+r,Kr(a,s,hM(e.Strings,e)),i.strs.push(s),Mn(e.wbrels,-1,"sharedStrings."+r,En.SST)),s="xl/workbook."+r,Kr(a,s,OM(t)),i.workbooks.push(s),Mn(e.rels,1,s,En.WB),s="xl/theme/theme1.xml",Kr(a,s,wM(t.Themes,e)),i.themes.push(s),Mn(e.wbrels,-1,"theme/theme1.xml",En.THEME),s="xl/styles."+r,Kr(a,s,xM(t,e)),i.styles.push(s),Mn(e.wbrels,-1,"styles."+r,En.STY),t.vbaraw&&n&&(s="xl/vbaProject.bin",Kr(a,s,t.vbaraw),i.vba.push(s),Mn(e.wbrels,-1,"vbaProject.bin",En.VBA)),s="xl/metadata."+r,Kr(a,s,bM()),i.metadata.push(s),Mn(e.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(s="xl/persons/person.xml",Kr(a,s,Wie(d)),i.people.push(s),Mn(e.wbrels,-1,"persons/person.xml",En.PEOPLE)),Kr(a,"[Content_Types].xml",eM(i,e)),Kr(a,"_rels/.rels",Dp(e.rels)),Kr(a,"xl/_rels/workbook."+r+".rels",Dp(e.wbrels)),delete e.revssf,delete e.ssf,a}function mle(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Vu(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function zM(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return px(e.file,qn.write(t,{type:Fn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return qn.write(t,e)}function gle(t,e){var r=Ho(e||{}),n=dle(t,r);return xle(n,r)}function xle(t,e){var r={},n=Fn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?qn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(M5(i))}return e.password&&typeof encrypt_agile<"u"?zM(encrypt_agile(i,e.password),e):e.type==="file"?px(e.file,i):e.type=="string"?n1(i):i}function vle(t,e){var r=e||{},n=kAe(t,r);return zM(n,r)}function Ec(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Q1(z1(n));case"binary":return z1(n);case"string":return t;case"file":return px(e.file,n,"utf8");case"buffer":return Fn?Wu(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ec(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function wle(t,e){switch(e.type){case"base64":return Q1(t);case"binary":return t;case"string":return t;case"file":return px(e.file,t,"binary");case"buffer":return Fn?Wu(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Fv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Q1(r):e.type=="string"?n1(r):r;case"file":return px(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function GM(t,e){Yte(),aAe(t);var r=Ho(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=GM(t,r);return r.type="array",M5(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ec(LAe(t,r),r);case"slk":case"sylk":return Ec(rie.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return Ec(PM(t.Sheets[t.SheetNames[i]],r),r);case"txt":return wle(VM(t.Sheets[t.SheetNames[i]],r),r);case"csv":return Ec(lS(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return Ec(nie.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return Fv(tie.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return Ec(iie.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return Ec(uie.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return Ec(dM.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return Ec(HM(t,r),r);case"wk1":return Fv(VL.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return Fv(VL.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Fv(MM(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),vle(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return gle(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ble(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function yle(t,e,r){var n={};return n.type="file",n.file=e,ble(n),GM(t,n)}function _le(t,e,r,n,i,a,s,o){var l=ws(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!s||t[r])for(var m=e.s.c;m<=e.e.c;++m){var w=s?t[r][m]:t[n[m]+l];if(w===void 0||w.t===void 0){if(c===void 0)continue;a[m]!=null&&(g[a[m]]=c);continue}var v=w.v;switch(w.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(a[m]!=null){if(v==null)if(w.t=="e"&&v===null)g[a[m]]=null;else if(c!==void 0)g[a[m]]=c;else if(d&&v===null)g[a[m]]=null;else continue;else g[a[m]]=d&&(w.t!=="n"||w.t==="n"&&o.rawNumbers!==!1)?v:Ku(w,v,o);v!=null&&(p=!1)}}return{row:g,isempty:p}}function l5(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=mi(d);break;case"number":l=mi(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(i=0);var p=ws(l.s.r),g=[],m=[],w=0,v=0,b=Array.isArray(t),_=l.s.r,C=0,T={};b&&!t[_]&&(t[_]=[]);var S=c.skipHidden&&t["!cols"]||[],O=c.skipHidden&&t["!rows"]||[];for(C=l.s.c;C<=l.e.c;++C)if(!(S[C]||{}).hidden)switch(g[C]=Qs(C),r=b?t[_][C]:t[g[C]+p],n){case 1:a[C]=C-l.s.c;break;case 2:a[C]=g[C];break;case 3:a[C]=c.header[C-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=Ku(r,null,c),v=T[s]||0,!v)T[s]=1;else{do o=s+"_"+v++;while(T[o]);T[s]=v,T[o]=1}a[C]=o}for(_=l.s.r+i;_<=l.e.r;++_)if(!(O[_]||{}).hidden){var j=_le(t,l,_,g,n,a,b,c);(j.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[w++]=j.row)}return m.length=w,m}var ZL=/"/g;function Ele(t,e,r,n,i,a,s,o){for(var l=!0,c=[],d="",p=ws(r),g=e.s.c;g<=e.e.c;++g)if(n[g]){var m=o.dense?(t[r]||[])[g]:t[n[g]+p];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:Ku(m,null,o));for(var w=0,v=0;w!==d.length;++w)if((v=d.charCodeAt(w))===i||v===a||v===34||o.forceQuotes){d='"'+d.replace(ZL,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(ZL,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(s)}function lS(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=mi(t["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),d="",p=[];n.dense=Array.isArray(t);for(var g=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],w=i.s.c;w<=i.e.c;++w)(g[w]||{}).hidden||(p[w]=Qs(w));for(var v=0,b=i.s.r;b<=i.e.r;++b)(m[b]||{}).hidden||(d=Ele(t,i,b,p,s,l,a,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function VM(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=lS(t,e);return r}function Ble(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=mi(t["!ref"]),a="",s=[],o,l=[],c=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)s[o]=Qs(o);for(var d=i.s.r;d<=i.e.r;++d)for(a=ws(d),o=i.s.c;o<=i.e.c;++o)if(e=s[o]+a,r=c?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function KM(t,e,r){var n=r||{},i=+!n.skipHeader,a=t||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?rs(n.origin):n.origin;s=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:s+e.length-1+i}};if(a["!ref"]){var p=mi(a["!ref"]);d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),s==-1&&(s=p.e.r+1,d.e.r=s+e.length-1+i)}else s==-1&&(s=0,d.e.r=e.length-1+i);var g=n.header||[],m=0;e.forEach(function(v,b){bs(v).forEach(function(_){(m=g.indexOf(_))==-1&&(g[m=g.length]=_);var C=v[_],T="z",S="",O=Hn({c:o+m,r:s+b+i});c=K1(a,O),C&&typeof C=="object"&&!(C instanceof Date)?a[O]=C:(typeof C=="number"?T="n":typeof C=="boolean"?T="b":typeof C=="string"?T="s":C instanceof Date?(T="d",n.cellDates||(T="n",C=Qo(C)),S=n.dateNF||Zi[14]):C===null&&n.nullError&&(T="e",C=0),c?(c.t=T,c.v=C,delete c.w,delete c.R,S&&(c.z=S)):a[O]=c={t:T,v:C},S&&(c.z=S))})}),d.e.c=Math.max(d.e.c,o+g.length-1);var w=ws(s);if(i)for(m=0;m<g.length;++m)a[Qs(m+o)+w]={t:"s",v:g[m]};return a["!ref"]=Ea(d),a}function Cle(t,e){return KM(null,t,e)}function K1(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=rs(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?K1(t,Hn(e)):K1(t,Hn({r:e,c:r||0}))}function Sle(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Tle(){return{SheetNames:[],Sheets:{}}}function Nle(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=s+i)!=-1;++i);}if(kM(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Fle(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Sle(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Ile(t,e){return t.z=e,t}function WM(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Dle(t,e,r){return WM(t,"#"+e,r)}function Lle(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Ule(t,e,r,n){for(var i=typeof e!="string"?e:mi(e),a=typeof e=="string"?e:Ea(e),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=K1(t,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Q_={encode_col:Qs,encode_row:ws,encode_cell:Hn,encode_range:Ea,decode_col:JC,decode_row:$C,split_cell:Yre,decode_cell:rs,decode_range:CA,format_cell:Ku,sheet_add_aoa:W8,sheet_add_json:KM,sheet_add_dom:jM,aoa_to_sheet:rm,json_to_sheet:Cle,table_to_sheet:QM,table_to_book:nle,sheet_to_csv:lS,sheet_to_txt:VM,sheet_to_json:l5,sheet_to_html:PM,sheet_to_formulae:Ble,sheet_to_row_object_array:l5,sheet_get_cell:K1,book_new:Tle,book_append_sheet:Nle,book_set_sheet_visibility:Fle,cell_set_number_format:Ile,cell_set_hyperlink:WM,cell_set_internal_link:Dle,cell_add_comment:Lle,sheet_set_array_formula:Ule,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const YM=(t,e,r="Sheet1",n)=>{if(!t||t.length===0){console.warn("No data provided to exportToXLSX.");return}let i=t;n?i=t.map(l=>{const c={};for(const d in n)Object.prototype.hasOwnProperty.call(n,d)&&(typeof l[d]=="string"&&l[d].match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?c[n[d]]=or(l[d],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):c[n[d]]=l[d]===void 0||l[d]===null?"":l[d]);return c}):i=t.map(l=>{const c={...l};for(const d in c)typeof c[d]=="string"&&c[d].match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&(c[d]=or(c[d],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}));return c});const a=Q_.json_to_sheet(i),s=Q_.book_new();Q_.book_append_sheet(s,a,r);const o=Object.keys(i[0]||{}).map(l=>{const c=(n&&Object.values(n).find(p=>p===l)||l).length;return{wch:Math.max(c,...i.map(p=>{const g=n?p[l]:p[Object.keys(n||{}).find(m=>(n||{})[m]===l)||l];return g?String(g).length:0}))+2}});a["!cols"]=o,yle(s,e)},kle={sm:"max-w-sm max-h-[90vh]",md:"max-w-md max-h-[90vh]",lg:"max-w-lg max-h-[90vh]",xl:"max-w-xl max-h-[90vh]",screen75:"w-11/12 md:w-3/4 h-auto md:h-3/4 max-h-[90vh]"},SA=({isOpen:t,onClose:e,title:r,children:n,footerContent:i,size:a="md"})=>t?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6 bg-black bg-opacity-50 backdrop-blur-sm animate-fade-in",onClick:e,children:f.jsxs("div",{className:`w-full ${kle[a]} rounded-2xl bg-white dark:bg-neutral-800 shadow-xl p-6 transition-colors duration-300 flex flex-col`,onClick:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center border-b pb-2 border-neutral-200 dark:border-neutral-700 transition-colors duration-300",children:[f.jsx("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100",children:r}),f.jsx("button",{onClick:e,className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition-colors","aria-label":"nchide",children:f.jsx(J1,{className:"h-6 w-6"})})]}),f.jsx("div",{className:"mt-4 flex-grow overflow-y-auto pr-2 text-sm text-neutral-600 dark:text-neutral-300",children:n}),i&&f.jsx("div",{className:"flex-shrink-0 mt-6 pt-4 border-t border-neutral-200 dark:border-neutral-700 transition-colors duration-300",children:i})]})}):null,wx=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,confirmText:a="Confirm",cancelText:s="Anuleaz"})=>f.jsxs(SA,{isOpen:t,onClose:e,title:n,children:[f.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:i}),f.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[f.jsx(ct,{variant:"ghost",onClick:e,children:s}),f.jsx(ct,{variant:"danger",onClick:()=>{r(),e()},children:a})]})]}),Ole=({badge:t})=>{const[e,r]=X.useState(!1),n=p1[t.badgeType];if(!n)return null;const i=n.icon,a=()=>{r(!e)};return f.jsx("div",{className:"badge-card-container flex justify-center items-center",children:f.jsxs("div",{className:`badge-card ${e?"flipped":""}`,onClick:a,role:"button",tabIndex:0,"aria-label":`Vezi detalii pentru ecusonul ${n.name}`,children:[f.jsxs("div",{className:"badge-card-face badge-card-front",children:[f.jsx("img",{className:"badge-card-overlay-edge",src:"https://assets.codepen.io/2153413/card-edge.png",alt:""}),f.jsxs("svg",{className:"badge-card-overlay-texture",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMaxYMax meet",viewBox:"0 0 630 880",children:[f.jsx("pattern",{id:`card-texture-${t.badgeType}`,width:"4",height:"4",patternTransform:"scale(3)",patternUnits:"userSpaceOnUse",children:f.jsx("path",{fill:"#000000",d:"M1 3h1v1H1V3zm2-2h1v1H3V1z"})}),f.jsx("rect",{x:"0",y:"0",width:"630",height:"880",fill:`url(#card-texture-${t.badgeType})`,opacity:".1"})]}),f.jsx("h2",{className:"badge-card-name text-neutral-800 dark:text-neutral-100",children:n.name}),f.jsx("div",{className:"badge-card-art",children:f.jsx(i,{className:"badge-icon"})}),f.jsxs("div",{className:"badge-card-source",children:[f.jsx("p",{children:"Ecuson Ctigat"}),f.jsx("p",{children:M.appName})]})]}),f.jsxs("div",{className:"badge-card-face badge-card-back",children:[f.jsx("img",{className:"badge-card-overlay-edge",src:"https://assets.codepen.io/2153413/card-edge.png",alt:""}),f.jsxs("svg",{className:"badge-card-overlay-texture",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMaxYMax meet",viewBox:"0 0 630 880",children:[f.jsx("pattern",{id:`card-texture-back-${t.badgeType}`,width:"4",height:"4",patternTransform:"scale(3)",patternUnits:"userSpaceOnUse",children:f.jsx("path",{fill:"#000000",d:"M1 3h1v1H1V3zm2-2h1v1H3V1z"})}),f.jsx("rect",{x:"0",y:"0",width:"630",height:"880",fill:`url(#card-texture-back-${t.badgeType})`,opacity:".25"})]}),f.jsxs("div",{className:"badge-card-back-content",children:[f.jsx("p",{className:"badge-description",children:n.description}),t.details&&f.jsxs("p",{className:"badge-description font-semibold text-primary-200",children:["(",t.details,")"]}),f.jsxs("p",{className:"badge-earned-date",children:["Ctigat la: ",or(t.earnedAt)]})]})]})]})})},H_=[At.INVESTMENT_REQUEST,At.INVESTMENT_APPROVAL,At.INVESTMENT_REJECTION,At.WITHDRAWAL_REQUEST,At.WITHDRAWAL_APPROVAL,At.WITHDRAWAL_REJECTION,At.PROFIT_DISTRIBUTION,At.FEE_COLLECTION],z_=[fr.PENDING,fr.APPROVED,fr.REJECTED,fr.COMPLETED],Rle=()=>{const{user:t,loadingAuth:e}=dn(),{appData:r,loading:n,updateUserInContext:i,addTransaction:a,checkUserBadgesOnLoad:s,exportData:o}=An(),{addNotification:l}=gi(),{theme:c,accentPalette:d,interfaceDensity:p,setAccentPalette:g,setInterfaceDensity:m}=zo(),[w,v]=X.useState(!1),[b,_]=X.useState({}),[C,T]=X.useState({}),[S,O]=X.useState(d),[j,U]=X.useState(p),[P,F]=X.useState({startDate:null,endDate:null}),[H,L]=X.useState(()=>[...H_]),[k,G]=X.useState(()=>[...z_]),[q,ce]=X.useState({key:"timestamp",direction:"descending"}),[Y,ie]=X.useState(!1),[me,Te]=X.useState(c),[ue,ne]=X.useState(!1),[I,Q]=X.useState(!1),[z,W]=X.useState(!1),[re,Ae]=X.useState({startDate:null,endDate:null}),[be,Se]=X.useState(!1),Ne=r==null?void 0:r.users.find(ze=>ze.id===(t==null?void 0:t.id));X.useEffect(()=>{t&&Ne&&(_({name:Ne.name,email:Ne.email,avatar:Ne.avatar}),T({contactPhone:Ne.profileData.contactPhone,address:Ne.profileData.address,accentPalette:Ne.profileData.accentPalette||d,interfaceDensity:Ne.profileData.interfaceDensity||p}),O(Ne.profileData.accentPalette||d),U(Ne.profileData.interfaceDensity||p),w||s(t.id),Te(c))},[t,Ne,w,s,c,d,p]);const qe=X.useMemo(()=>!(r!=null&&r.userMessages)||!t?[]:[...r.userMessages].filter(ze=>ze.userId===t.id).sort((ze,We)=>new Date(We.createdAt).getTime()-new Date(ze.createdAt).getTime()),[r==null?void 0:r.userMessages,t]),Ue=X.useMemo(()=>{if(!r||!t)return[];const ze=r.users.find(nt=>nt.id===t.id);let We=[];const ot=(r.transactions||[]).filter(nt=>nt.userId===t.id&&nt.type!==At.PROFIT_DISTRIBUTION&&nt.type!==At.FEE_COLLECTION);if(We.push(...ot),ze!=null&&ze.profileData.investmentHistory){const nt=ze.profileData.investmentHistory.map((Ct,Mt)=>{let ht=null,Xt="";return Ct.type==="PROFIT_PAYOUT"?(ht=At.PROFIT_DISTRIBUTION,Xt=Ct.amount>=0?"Distribuire profit (din istoric)":"Acoperire pierdere (din istoric)"):Ct.type==="FEE"?(ht=At.FEE_COLLECTION,Xt="Colectare tax platform (din istoric)"):Ct.type==="DEPOSIT"?(ht=At.INVESTMENT_APPROVAL,Xt="Depunere aprobat (din istoric)"):Ct.type==="WITHDRAWAL"&&(ht=At.WITHDRAWAL_APPROVAL,Xt="Retragere aprobat (din istoric)"),ht?{id:`hist_${t.id}_${Ct.date}_${Mt}`,timestamp:Ct.date,userId:t.id,type:ht,amount:Ct.amount,status:fr.COMPLETED,description:Xt}:null}).filter(Ct=>Ct!==null);We.push(...nt)}const Rt=Array.from(new Map(We.map(nt=>[nt.id,nt])).values()).filter(nt=>!(H.length>0&&!H.includes(nt.type)||k.length>0&&!k.includes(nt.status)||P.startDate&&new Date(nt.timestamp).toISOString().split("T")[0]<P.startDate||P.endDate&&new Date(nt.timestamp).toISOString().split("T")[0]>P.endDate));return Rt.sort((nt,Ct)=>{const Mt=nt[q.key],ht=Ct[q.key];return Mt==null&&ht!=null?1:ht==null&&Mt!=null?-1:Mt==null&&ht==null?0:Mt<ht?q.direction==="ascending"?-1:1:Mt>ht?q.direction==="ascending"?1:-1:0}),Rt},[r,t,H,k,P,q]);if(e||n||!t||!r||!Ne)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const at=ze=>{L(We=>We.includes(ze)?We.filter(ot=>ot!==ze):[...We,ze])},Oe=ze=>{G(We=>We.includes(ze)?We.filter(ot=>ot!==ze):[...We,ze])},we=ze=>{L(ze?[...H_]:[])},zt=ze=>{G(ze?[...z_]:[])},J=ze=>{let We="ascending";q.key===ze&&q.direction==="ascending"&&(We="descending"),ce({key:ze,direction:We})},_e=ze=>q.key!==ze?f.jsx(eQ,{className:"h-4 w-4 ml-1 text-neutral-400 inline"}):q.direction==="ascending"?f.jsx(N0,{className:"h-4 w-4 ml-1 inline text-primary-500"}):f.jsx(T0,{className:"h-4 w-4 ml-1 inline text-primary-500"}),xe=ze=>{const{name:We,value:ot}=ze.target;["contactPhone","address"].includes(We)?T(dt=>({...dt,[We]:ot})):_(dt=>({...dt,[We]:ot}))},De=async ze=>{if(ze.preventDefault(),!Ne)return;const We={name:b.name,avatar:b.avatar},ot={contactPhone:C.contactPhone,address:C.address,accentPalette:S,interfaceDensity:j},dt={...Ne,...We,profileData:{...Ne.profileData,...ot}};try{await new Promise(nr=>setTimeout(nr,500));const Rt=["name","avatar"],nt=["contactPhone","address","accentPalette","interfaceDensity"],Ct=Pf(Ne,dt,Rt,{name:"Nume",avatar:"URL Avatar"}),Mt=Pf(Ne.profileData,dt.profileData,nt,{contactPhone:"Telefon Contact",address:"Adres",accentPalette:"Palet Accent",interfaceDensity:"Densitate Interfa"}),ht=[...Ct,...Mt];if(i(dt),g(S),m(j),ht.length>0){a({userId:t.id,type:At.USER_UPDATED,status:fr.COMPLETED,description:`Profilul utilizatorului ${t.name} a fost actualizat.`,details:{changedFields:ht}});const nr=Mt.filter(qt=>qt.fieldName==="Palet Accent"||qt.fieldName==="Densitate Interfa");nr.length>0&&ht.length===nr.length&&a({userId:t.id,type:At.USER_INTERFACE_PREFERENCES_UPDATED,status:fr.COMPLETED,description:`Preferinele de interfa pentru ${t.name} au fost actualizate.`,details:{changedFields:nr}})}l(M.profileUpdated,Je.SUCCESS),v(!1);const Xt=r.users.map(nr=>nr.id===dt.id?dt:nr);await o("users",Xt)}catch(Rt){l(`Eroare la actualizarea profilului: ${Rt.message}`,Je.ERROR)}},Fe=Ne.profileData.badges||[],tt=()=>{if(Ue.length===0){l("Nicio tranzacie de exportat conform filtrelor selectate.",Je.INFO);return}ne(!0),l(M.exportGeneratingCsv,Je.INFO),setTimeout(()=>{try{let ze=`Data,Tip Tranzactie,Suma (EUR),Descriere,Status
`;Ue.forEach(Ct=>{const Mt=[or(Ct.timestamp,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),hA[Ct.type]||Ct.type,Ct.amount!==void 0?Ct.amount.toFixed(2):"",`"${Ct.description.replace(/"/g,'""')}"`,Ct.status].join(",");ze+=Mt+`
`});const We=new Blob([ze],{type:"text/csv;charset=utf-8;"}),ot=document.createElement("a"),dt=URL.createObjectURL(We);ot.setAttribute("href",dt);const Rt=Ne.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),nt=new Date().toISOString().split("T")[0];ot.setAttribute("download",`Istoric_Tranzactii_${Rt}_${nt}.csv`),ot.style.visibility="hidden",document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),l(M.exportCsvSuccess,Je.SUCCESS)}catch(ze){l(M.exportError,Je.ERROR),console.error("CSV Export Error:",ze)}finally{ne(!1)}},500)},ut=({history:ze,userName:We,theme:ot})=>{const dt=ot==="dark"?"bg-neutral-900":"bg-white",Rt=ot==="dark"?"text-neutral-100":"text-neutral-800",nt=ot==="dark"?"border-neutral-700":"border-neutral-300",Ct=`p-2 text-left text-xs font-semibold ${ot==="dark"?"text-neutral-300 bg-neutral-800":"text-neutral-600 bg-neutral-100"}`,Mt=`p-2 text-sm ${nt} ${ot==="dark"?"text-neutral-200":"text-neutral-700"}`;return Nr.createElement("div",{className:`pdf-render-area-profile p-4 ${dt} ${Rt}`},Nr.createElement("h1",{className:"text-xl font-bold mb-4"},`Istoric Tranzacii - ${We}`),Nr.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},Nr.createElement("thead",null,Nr.createElement("tr",null,Nr.createElement("th",{className:Ct,style:{border:`1px solid ${ot==="dark"?"#404040":"#e0e0e0"}`}},"Data"),Nr.createElement("th",{className:Ct,style:{border:`1px solid ${ot==="dark"?"#404040":"#e0e0e0"}`}},"Tip"),Nr.createElement("th",{className:Ct,style:{border:`1px solid ${ot==="dark"?"#404040":"#e0e0e0"}`}},"Status"),Nr.createElement("th",{className:Ct,style:{border:`1px solid ${ot==="dark"?"#404040":"#e0e0e0"}`,textAlign:"right"}},"Suma (EUR)"))),Nr.createElement("tbody",null,ze.map(ht=>Nr.createElement("tr",{key:ht.id,style:{borderBottom:`1px solid ${ot==="dark"?"#404040":"#e0e0e0"}`}},Nr.createElement("td",{className:Mt},or(ht.timestamp,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),Nr.createElement("td",{className:Mt},hA[ht.type]||ht.type),Nr.createElement("td",{className:Mt},ht.status),Nr.createElement("td",{className:Mt,style:{textAlign:"right",color:(ht.amount||0)>=0?ot==="dark"?"#4ade80":"#16a34a":ot==="dark"?"#f87171":"#dc2626"}},ht.amount!==void 0?_t(ht.amount):"-"))))))},yt=async()=>{if(Ue.length===0){l("Nicio tranzacie de exportat conform filtrelor selectate.",Je.INFO);return}Q(!0),l(M.exportGeneratingPdf,Je.INFO);const ze=document.createElement("div");ze.style.position="absolute",ze.style.left="-9999px",ze.style.top="-9999px",ze.style.width="800px",document.body.appendChild(ze);const We=W1.createRoot(ze);We.render(f.jsx(Nr.StrictMode,{children:f.jsx(q1,{children:f.jsx(rx,{children:f.jsx(nx,{children:f.jsx(ix,{children:f.jsx(ax,{forcedTheme:me,children:f.jsx(ut,{history:Ue,userName:Ne.name,theme:me})})})})})})})),await new Promise(ot=>setTimeout(ot,1500));try{const ot=ze.querySelector(".pdf-render-area-profile");if(!ot)throw new Error("PDF content element not found.");const Rt=(await dx(ot,{scale:2,useCORS:!0,logging:!1,backgroundColor:me==="dark"?"#0f172a":"#ffffff",onclone:Yt=>{me==="dark"&&Yt.documentElement.classList.add("dark")}})).toDataURL("image/png"),nt=new gr({orientation:"portrait",unit:"pt",format:"a4"}),{width:Ct,height:Mt}=nt.internal.pageSize,ht=nt.getImageProperties(Rt),Xt=40,nr=Math.min((Ct-Xt*2)/ht.width,(Mt-Xt*2)/ht.height),qt=ht.width*nr,Ar=ht.height*nr,jt=(Ct-qt)/2,Qr=(Mt-Ar)/2;nt.addImage(Rt,"PNG",jt,Qr,qt,Ar);const Ur=Ne.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),$t=new Date().toISOString().split("T")[0];nt.save(`Istoric_Tranzactii_${Ur}_${$t}_(${me}).pdf`),l(M.exportPdfSuccess,Je.SUCCESS)}catch(ot){l(M.exportError,Je.ERROR),console.error("PDF Export Error:",ot)}finally{We.unmount(),document.body.removeChild(ze),Q(!1)}},Dt=()=>{Se(!0),l("Se pregtete fiierul XLSX...",Je.INFO);try{const ze=(r.transactions||[]).filter(nt=>!(nt.userId!==(t==null?void 0:t.id)||re.startDate&&new Date(nt.timestamp).toISOString().split("T")[0]<re.startDate||re.endDate&&new Date(nt.timestamp).toISOString().split("T")[0]>re.endDate)).sort((nt,Ct)=>new Date(Ct.timestamp).getTime()-new Date(nt.timestamp).getTime());if(ze.length===0){l("Nu s-au gsit tranzacii pentru intervalul selectat.",Je.WARNING);return}const We={timestamp:M.tableHeaderDate,type:M.tableHeaderType,description:M.tableHeaderDescription,amount:M.tableHeaderAmount,status:M.tableHeaderStatus},ot=ze.map(nt=>({timestamp:nt.timestamp,type:hA[nt.type]||nt.type,description:nt.description,amount:nt.amount,status:nt.status})),dt=Ne.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),Rt=new Date().toISOString().split("T")[0];YM(ot,`Istoric_Avansat_${dt}_${Rt}.xlsx`,"Tranzacii",We),l(M.xlsxExportSuccess,Je.SUCCESS)}catch(ze){l(M.xlsxExportFailed,Je.ERROR),console.error(ze)}finally{Se(!1),W(!1)}};return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsx(Pt,{children:f.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[f.jsx("img",{src:Ne.avatar,alt:Ne.name,className:"w-24 h-24 md:w-32 md:h-32 rounded-full object-cover shadow-lg border-4 border-primary-300 dark:border-primary-500"}),f.jsxs("div",{className:"flex-grow text-center md:text-left",children:[f.jsx("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100",children:Ne.name}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:Ne.email}),f.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:["Membru din: ",or(Ne.profileData.joinDate)]}),f.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:["Ultima autentificare: ",Ne.lastLogin?or(Ne.lastLogin):"N/A"]}),f.jsx(ct,{onClick:()=>v(!w),variant:w?"secondary":"primary",size:"sm",leftIcon:f.jsx(Jp,{className:"h-5 w-5"}),className:"mt-4",children:w?M.cancel:M.editProfile})]})]})}),w&&f.jsx(Pt,{title:M.editProfile,children:f.jsxs("form",{onSubmit:De,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Tr,{label:"Nume",name:"name",value:b.name||"",onChange:xe}),f.jsx(Tr,{label:"URL Avatar",name:"avatar",value:b.avatar||"",onChange:xe}),f.jsx(Tr,{label:"Telefon Contact (Opional)",name:"contactPhone",value:C.contactPhone||"",onChange:xe}),f.jsx(Tr,{label:"Adres (Opional)",name:"address",value:C.address||"",onChange:xe})]}),f.jsxs(Pt,{title:M.themeCustomizationTitle,icon:f.jsx(mp,{className:"h-5 w-5"}),bodyClassName:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"accentPalette",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.accentColorLabel}),f.jsx("select",{id:"accentPalette",value:S,onChange:ze=>O(ze.target.value),className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:Object.entries(W_).map(([ze,{name:We}])=>f.jsx("option",{value:ze,children:We},ze))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"interfaceDensity",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.interfaceDensityLabel}),f.jsx("select",{id:"interfaceDensity",value:j,onChange:ze=>U(ze.target.value),className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:Object.entries(lQ).map(([ze,{name:We}])=>f.jsx("option",{value:ze,children:We},ze))})]})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(ct,{type:"submit",variant:"primary",children:M.updateProfile})})]})}),f.jsx(Pt,{title:M.badgesSectionTitle,icon:f.jsx($1,{className:"h-6 w-6 text-yellow-500"}),children:Fe.length>0?f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:Fe.map(ze=>f.jsx(Ole,{badge:ze},ze.badgeType))}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-center py-4",children:M.noBadgesEarned})}),qe.length>0&&f.jsx(Pt,{title:"Mesaje de la Administrator",icon:f.jsx(Z1,{className:"h-6 w-6 text-primary-500"}),children:f.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:qe.slice(0,5).map(ze=>f.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${ze.isRead?"border-neutral-300 dark:border-neutral-600":"border-primary-500"}`,children:[f.jsx("h4",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:ze.title}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:or(ze.createdAt)}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:ze.content})]},ze.id))})}),f.jsx(Pt,{title:M.profileExportCardTitle,children:f.jsxs("div",{className:"space-y-4",children:[f.jsx(ct,{variant:"outline",onClick:()=>ie(!Y),leftIcon:f.jsx(SB,{className:"h-5 w-5"}),children:Y?"Ascunde Filtre":"Filtreaz Istoricul"}),Y&&f.jsxs("div",{className:"p-4 border border-neutral-200 dark:border-neutral-700 rounded-lg animate-fade-in space-y-4",children:[f.jsx(fd,{onRangeChange:F,initialRangeType:"all"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:"Tip Tranzacie"}),f.jsxs("div",{className:"flex space-x-2 mb-2",children:[f.jsx(ct,{size:"sm",variant:"outline",onClick:()=>we(!0),children:M.selectAllTransactionTypes}),f.jsx(ct,{size:"sm",variant:"outline",onClick:()=>we(!1),children:M.deselectAllTransactionTypes})]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:H_.map(ze=>f.jsxs("label",{className:"flex items-center space-x-2 p-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700/50 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:H.includes(ze),onChange:()=>at(ze),className:"form-checkbox h-4 w-4 text-primary-600 rounded"}),f.jsx("span",{className:"text-xs",children:hA[ze]||ze})]},ze))})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:"Status Tranzacie"}),f.jsxs("div",{className:"flex space-x-2 mb-2",children:[f.jsx(ct,{size:"sm",variant:"outline",onClick:()=>zt(!0),children:M.selectAllTransactionTypes.replace("Tipuri","Statusuri")}),f.jsx(ct,{size:"sm",variant:"outline",onClick:()=>zt(!1),children:M.deselectAllTransactionTypes.replace("Tipuri","Statusuri")})]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:z_.map(ze=>f.jsxs("label",{className:"flex items-center space-x-2 p-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700/50 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:k.includes(ze),onChange:()=>Oe(ze),className:"form-checkbox h-4 w-4 text-primary-600 rounded"}),f.jsx("span",{className:"text-xs",children:ze})]},ze))})]})]}),f.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[f.jsx(ct,{onClick:tt,variant:"secondary",leftIcon:f.jsx(ju,{className:"h-5 w-5"}),isLoading:ue,disabled:I,children:M.exportTransactionsCsvButton}),f.jsx(ct,{onClick:()=>W(!0),variant:"secondary",leftIcon:f.jsx(Aw,{className:"h-5 w-5"}),disabled:I,children:M.advancedExportXLSXButton}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ct,{onClick:yt,variant:"primary",leftIcon:f.jsx(IB,{className:"h-5 w-5"}),isLoading:I,disabled:ue,children:M.exportTransactionsPdfButton}),f.jsxs("select",{value:me,onChange:ze=>Te(ze.target.value),className:"p-2 rounded-lg bg-neutral-100 dark:bg-neutral-700 text-xs",children:[f.jsx("option",{value:"light",children:M.lightMode}),f.jsx("option",{value:"dark",children:M.darkMode})]})]})]}),f.jsxs("div",{className:"overflow-x-auto max-h-96",children:[f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700",children:[f.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800 sticky top-0",children:f.jsxs("tr",{children:[f.jsxs("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase cursor-pointer",onClick:()=>J("timestamp"),children:[M.tableHeaderDate," ",_e("timestamp")]}),f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderType}),f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderDescription}),f.jsxs("th",{className:"px-3 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase cursor-pointer",onClick:()=>J("amount"),children:[M.tableHeaderAmount," ",_e("amount")]}),f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderStatus})]})}),f.jsx("tbody",{className:"bg-white dark:bg-neutral-800/50 divide-y divide-neutral-200 dark:divide-neutral-700",children:Ue.map(ze=>f.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30",children:[f.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:or(ze.timestamp)}),f.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:hA[ze.type]||ze.type}),f.jsx("td",{className:"px-3 py-2 text-sm max-w-sm truncate",title:ze.description,children:ze.description}),f.jsx("td",{className:`px-3 py-2 whitespace-nowrap text-sm text-right font-semibold ${(ze.amount||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:ze.amount!==void 0?_t(ze.amount):"-"}),f.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:f.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ze.status==="PENDING"?"bg-yellow-100 text-yellow-800":ze.status==="COMPLETED"||ze.status==="APPROVED"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ze.status})})]},ze.id))})]}),Ue.length===0&&f.jsx("p",{className:"text-center py-6 text-neutral-500",children:M.noTransactionsFoundForFilters})]})]})}),f.jsx(SA,{isOpen:z,onClose:()=>W(!1),title:M.exportOptionsTitle,children:f.jsxs("div",{className:"space-y-4",children:[f.jsx(fd,{onRangeChange:Ae,initialRangeType:"all"}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(ct,{variant:"primary",onClick:Dt,isLoading:be,disabled:be,children:M.exportButton})})]})})]})},Mle=()=>{const{user:t}=dn(),{appData:e,loading:r,addInvestmentAlert:n,updateInvestmentAlert:i,deleteInvestmentAlert:a}=An(),{addNotification:s}=gi(),[o,l]=X.useState(!1),[c,d]=X.useState(null),p={type:ii.PROFIT_GAIN_PERCENT,thresholdValue:"",isActive:!0,notes:""},[g,m]=X.useState(p),[w,v]=X.useState(!1),[b,_]=X.useState(null),C=X.useMemo(()=>e==null?void 0:e.users.find(k=>k.id===(t==null?void 0:t.id)),[e==null?void 0:e.users,t==null?void 0:t.id]);X.useEffect(()=>{m(c?{type:c.type,thresholdValue:c.thresholdValue.toString(),isActive:c.isActive,notes:c.notes||""}:p)},[c,o]);const T=k=>{const{name:G,value:q}=k.target;m(ce=>({...ce,[G]:q}))},S=k=>{m(G=>({...G,isActive:k}))},O=()=>{d(null),l(!0)},j=k=>{d(k),l(!0)},U=k=>{_(k),v(!0)},P=()=>{if(b&&t)try{a(b.id,t.id),s(M.alertDeletedSuccessfully,Je.SUCCESS)}catch{s(M.failedToDeleteAlert,Je.ERROR)}v(!1),_(null)},F=k=>{if(k.preventDefault(),!t||!C)return;const G=parseFloat(g.thresholdValue);if(isNaN(G)){s(M.alertThresholdNumeric,Je.ERROR);return}if(G<=0){s(M.alertThresholdPositive,Je.ERROR);return}if((g.type===ii.PROFIT_GAIN_PERCENT||g.type===ii.PROFIT_LOSS_PERCENT)&&(G<.01||G>1e3)){s(M.alertThresholdPercentageRange,Je.ERROR);return}let q=C.profileData.investedAmount;(g.type===ii.PROFIT_GAIN_PERCENT||g.type===ii.PROFIT_LOSS_PERCENT)&&(!q||q<=0)&&(c&&c.referenceInvestedAmount&&c.referenceInvestedAmount>0?q=c.referenceInvestedAmount:(s(M.cannotCreatePercentageAlertNoInvestment,Je.WARNING),q=0));try{const ce={userId:t.id,type:g.type,thresholdValue:G,isActive:g.isActive,notes:g.notes,referenceInvestedAmount:g.type===ii.PROFIT_GAIN_PERCENT||g.type===ii.PROFIT_LOSS_PERCENT?q:void 0};c?(i({...c,...ce,referenceInvestedAmount:g.type===ii.PROFIT_GAIN_PERCENT||g.type===ii.PROFIT_LOSS_PERCENT?c.type===g.type&&c.referenceInvestedAmount?c.referenceInvestedAmount:q:void 0}),s(M.alertUpdatedSuccessfully,Je.SUCCESS)):(n(ce),s(M.alertCreatedSuccessfully,Je.SUCCESS)),l(!1)}catch{s(c?M.failedToUpdateAlert:M.failedToCreateAlert,Je.ERROR)}},H=k=>{switch(k.type){case ii.PROFIT_GAIN_PERCENT:return`${M.alertConditionProfitGainPercent.replace("X%",`${k.thresholdValue}%`)} (Ref: ${_t(k.referenceInvestedAmount)})`;case ii.PROFIT_LOSS_PERCENT:return`${M.alertConditionProfitLossPercent.replace("X%",`${k.thresholdValue}%`)} (Ref: ${_t(k.referenceInvestedAmount)})`;case ii.INVESTMENT_VALUE_REACHES_ABOVE:return`${M.alertConditionInvestmentValueAbove.replace("X EUR",_t(k.thresholdValue))}`;case ii.INVESTMENT_VALUE_DROPS_BELOW:return`${M.alertConditionInvestmentValueBelow.replace("X EUR",_t(k.thresholdValue))}`;default:return"Alert necunoscut"}};if(r||!e||!t||!C)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const L=(e.investmentAlerts||[]).filter(k=>k.userId===t.id).sort((k,G)=>new Date(G.createdAt).getTime()-new Date(k.createdAt).getTime());return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(mp,{className:"h-8 w-8 mr-3 text-primary-500"}),M.userAlertsTitle]}),f.jsx(ct,{onClick:O,variant:"primary",leftIcon:f.jsx(tx,{className:"h-5 w-5"}),children:M.createNewAlert}),L.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(k=>f.jsxs(Pt,{title:H(k),icon:k.isActive?f.jsx(zT,{className:"h-6 w-6 text-green-500"}):f.jsx(Al,{className:"h-6 w-6 text-red-500"}),className:`transition-all duration-300 ${k.isActive?"border-green-500 dark:border-green-600":"border-red-500 dark:border-red-600 opacity-70"} border-l-4`,children:[f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:["Creat la: ",or(k.createdAt)]}),k.lastTriggeredAt&&f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:[M.alertLastTriggered,": ",or(k.lastTriggeredAt)]}),k.notes&&f.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 my-2 p-2 bg-neutral-100 dark:bg-neutral-700 rounded",children:["Notie: ",k.notes]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-700 flex justify-between items-center",children:[f.jsx(Fc,{id:`alert-active-${k.id}`,label:k.isActive?M.alertIsActive:M.alertNotActive,checked:k.isActive,onChange:G=>i({...k,isActive:G,referenceInvestedAmount:(k.type===ii.PROFIT_GAIN_PERCENT||k.type===ii.PROFIT_LOSS_PERCENT)&&G&&(!k.referenceInvestedAmount||k.referenceInvestedAmount<=0)?C.profileData.investedAmount:k.referenceInvestedAmount})}),f.jsxs("div",{className:"space-x-1",children:[f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>j(k),"aria-label":M.edit,children:f.jsx(Jp,{className:"h-5 w-5"})}),f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>U(k),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400","aria-label":M.delete,children:f.jsx(ex,{className:"h-5 w-5"})})]})]})]},k.id))}):f.jsxs(Pt,{className:"text-center",children:[f.jsx(zT,{className:"h-12 w-12 text-neutral-400 dark:text-neutral-500 mx-auto mb-3"}),f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noAlertsConfigured})]}),o&&f.jsx(SA,{isOpen:o,onClose:()=>l(!1),title:c?"Modific Alert":M.createNewAlert,size:"lg",children:f.jsxs("form",{onSubmit:F,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.alertType}),f.jsxs("select",{id:"type",name:"type",value:g.type,onChange:T,className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:ii.PROFIT_GAIN_PERCENT,children:M.alertConditionProfitGainPercent.replace(" X%","")}),f.jsx("option",{value:ii.PROFIT_LOSS_PERCENT,children:M.alertConditionProfitLossPercent.replace(" X%","")}),f.jsx("option",{value:ii.INVESTMENT_VALUE_REACHES_ABOVE,children:M.alertConditionInvestmentValueAbove.replace(" X EUR","")}),f.jsx("option",{value:ii.INVESTMENT_VALUE_DROPS_BELOW,children:M.alertConditionInvestmentValueBelow.replace(" X EUR","")})]})]}),f.jsx(Tr,{label:`${M.thresholdValue} ${g.type.includes("PERCENT")?`(${M.valueTypePercentage})`:`(${M.valueTypeAmount})`}`,type:"number",name:"thresholdValue",value:g.thresholdValue,onChange:T,placeholder:g.type.includes("PERCENT")?"ex: 10 (pentru 10%)":"ex: 500 (pentru 500 EUR)",step:g.type.includes("PERCENT")?"0.1":"1",required:!0}),(g.type===ii.PROFIT_GAIN_PERCENT||g.type===ii.PROFIT_LOSS_PERCENT)&&f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[M.referenceInvestedAmountForAlert,": ",_t((c==null?void 0:c.referenceInvestedAmount)||C.profileData.investedAmount||0),". Acesta este folosit ca baz pentru calculul procentual."]}),f.jsx(Pc,{label:"Notie (Opional)",name:"notes",value:g.notes||"",onChange:T,rows:2,placeholder:"Ex: Obiectiv profit trimestrial"}),f.jsx(Fc,{id:"alertIsActiveModal",label:g.isActive?M.alertIsActive:M.alertNotActive,checked:g.isActive,onChange:S}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[f.jsx(ct,{variant:"ghost",type:"button",onClick:()=>l(!1),children:M.cancel}),f.jsx(ct,{variant:"primary",type:"submit",children:c?M.save:M.createNewAlert})]})]})}),w&&b&&f.jsx(wx,{isOpen:w,onClose:()=>v(!1),onConfirm:P,title:M.confirmAlertDeletionTitle,message:`${M.confirmAlertDeletionMessage} (${H(b)})`,confirmText:M.delete})]})},Ple=()=>{const t=new Date,e=new Date(t);return e.setDate(t.getDate()-29),{startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]}},jle=()=>{const{user:t}=dn(),{appData:e,loading:r}=An(),{addNotification:n}=gi(),{theme:i}=zo(),[a,s]=X.useState(Ple()),[o,l]=X.useState(null),[c,d]=X.useState(!1),[p,g]=X.useState(i),m=X.useMemo(()=>!t||!(e!=null&&e.users)?null:e.users.find(C=>C.id===t.id),[e==null?void 0:e.users,t]);X.useEffect(()=>{g(i)},[i]),X.useEffect(()=>{m&&m.profileData.investmentHistory&&v()},[m,a]);const w=C=>{s(C)},v=()=>{if(!m||!m.profileData.investmentHistory){l(null);return}if(!a.startDate||!a.endDate){n("Te rugm s selectezi un interval de date valid pentru a genera raportul.",Je.INFO),l(null);return}const T=a.startDate,S=a.endDate;let O=0,j=0,U=0,P=0,F=0;m.profileData.investmentHistory.forEach(q=>{const ce=q.date.split("T")[0];ce<T?q.type==="DEPOSIT"?O+=q.amount:q.type==="WITHDRAWAL"?O-=q.amount:(q.type==="PROFIT_PAYOUT"||q.type==="FEE")&&(O+=q.amount):ce>=T&&ce<=S&&(q.type==="DEPOSIT"?j+=q.amount:q.type==="WITHDRAWAL"?U+=q.amount:q.type==="PROFIT_PAYOUT"?P+=q.amount:q.type==="FEE"&&(F+=Math.abs(q.amount)))});const H=P+F,L=O+j-U+P;let k=0;O>0?k=P/O*100:P>0&&(k=1/0);const G=new Date(T);l({cycleYear:G.getFullYear(),cycleMonth:G.getMonth()+1,investorName:m.name,investorId:m.id,startDate:T,endDate:S,balanceAtStart:O,depositsInCycle:j,withdrawalsInCycle:U,grossProfitInCycle:H,feesPaidInCycle:F,netProfitInCycle:P,balanceAtEnd:L,percentageGrowth:k})},b=async()=>{if(!o){n(M.noDataForCycleReport,Je.WARNING);return}d(!0),n(M.reportPdfGenerating,Je.INFO);const C=document.createElement("div");C.style.position="absolute",C.style.left="-9999px",C.style.top="-9999px",C.style.width="1000px",C.style.padding="40px",document.body.appendChild(C);const T=W1.createRoot(C);T.render(f.jsx(Nr.StrictMode,{children:f.jsx(q1,{children:f.jsx(rx,{children:f.jsx(nx,{children:f.jsx(ix,{children:f.jsx(ax,{forcedTheme:p,children:f.jsx("div",{className:`pdf-render-area ${p==="dark"?"dark bg-neutral-900 text-neutral-100":"bg-white text-neutral-800"} p-5`,children:_(o,!0,p)})})})})})})})),await new Promise(S=>setTimeout(S,1500));try{const O=(await dx(C.querySelector(".pdf-render-area"),{scale:2,useCORS:!0,logging:!1,backgroundColor:p==="dark"?"#0f172a":"#ffffff",onclone:ce=>{const Y=ce.body;p==="dark"?(Y.classList.add("dark","bg-neutral-900","text-neutral-100"),Y.classList.remove("light","bg-white","text-neutral-800")):(Y.classList.add("light","bg-white","text-neutral-800"),Y.classList.remove("dark","bg-neutral-900","text-neutral-100"))}})).toDataURL("image/png"),j=new gr({orientation:"portrait",unit:"pt",format:"a4"}),U=j.internal.pageSize.getWidth(),P=j.internal.pageSize.getHeight(),F=j.getImageProperties(O),H=Math.min((U-40)/F.width,(P-40)/F.height),L=F.width*H,k=F.height*H,G=(U-L)/2,q=(P-k)/2;j.addImage(O,"PNG",G,q,L,k),j.save(`Raport_Performanta_${or(o.startDate,{day:"2-digit",month:"2-digit",year:"numeric"})}_${or(o.endDate,{day:"2-digit",month:"2-digit",year:"numeric"})}_${o.investorName.replace(/\s/g,"_")}_(${p}).pdf`),n(M.reportPdfGeneratedSuccess,Je.SUCCESS)}catch(S){console.error("Eroare la generarea PDF-ului pentru raportul de ciclu:",S),n(M.reportPdfGeneratedError,Je.ERROR)}finally{T.unmount(),document.body.removeChild(C),d(!1)}},_=(C,T=!1,S="light")=>{const O=T?S==="dark"?"text-neutral-100":"text-neutral-800":"text-neutral-800 dark:text-neutral-100",j=T?S==="dark"?"text-neutral-300":"text-neutral-600":"text-neutral-600 dark:text-neutral-300",U=T?S==="dark"?"text-primary-400":"text-primary-600":"text-primary-600 dark:text-primary-400",P=T?S==="dark"?"text-green-400":"text-green-600":"text-green-500",F=T?S==="dark"?"text-red-400":"text-red-600":"text-red-500",H=T?S==="dark"?"bg-neutral-800":"bg-white":"bg-white dark:bg-neutral-800";return f.jsxs("div",{className:`${T?`p-4 ${H}`:""}`,children:[f.jsx("h2",{className:`text-2xl font-bold mb-2 ${O}`,children:"Raport de Performan"}),f.jsxs("p",{className:`text-sm mb-4 ${j}`,children:[M.reportPeriod," ",or(C.startDate)," - ",or(C.endDate)]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{className:`p-3 rounded-md ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.balanceAtCycleStart}),f.jsx("p",{className:`font-semibold text-lg ${O}`,children:_t(C.balanceAtStart)})]}),f.jsxs("div",{className:`p-3 rounded-md ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.balanceAtCycleEnd}),f.jsx("p",{className:`font-semibold text-lg ${U}`,children:_t(C.balanceAtEnd)})]}),f.jsxs("div",{className:`p-3 rounded-md ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.depositsInCycle}),f.jsx("p",{className:`font-semibold ${P}`,children:_t(C.depositsInCycle)})]}),f.jsxs("div",{className:`p-3 rounded-md ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.withdrawalsInCycle}),f.jsx("p",{className:`font-semibold ${F}`,children:_t(C.withdrawalsInCycle)})]}),f.jsxs("div",{className:`p-3 rounded-md ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.grossProfitInCycle}),f.jsx("p",{className:`font-semibold ${C.grossProfitInCycle>=0?P:F}`,children:_t(C.grossProfitInCycle)})]}),f.jsxs("div",{className:`p-3 rounded-md ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.feesPaidInCycle}),f.jsx("p",{className:`font-semibold ${F}`,children:_t(C.feesPaidInCycle)})]}),f.jsxs("div",{className:`p-3 rounded-md md:col-span-2 ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.netProfitInCycle}),f.jsx("p",{className:`font-semibold text-xl ${C.netProfitInCycle>=0?P:F}`,children:_t(C.netProfitInCycle)})]}),f.jsxs("div",{className:`p-3 rounded-md md:col-span-2 ${T?S==="dark"?"bg-neutral-700":"bg-neutral-50":"bg-neutral-50 dark:bg-neutral-700/50"}`,children:[f.jsx("span",{className:`${j}`,children:M.percentageGrowthInCycle}),f.jsx("p",{className:`font-semibold text-xl ${C.percentageGrowth>=0?P:F}`,children:C.percentageGrowth===1/0?"N/A (Balan iniial zero)":`${C.percentageGrowth.toFixed(2)}%`})]})]})]})};return r||!m?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})}):f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(lw,{className:"h-8 w-8 mr-3 text-primary-500"}),M.userCycleReportsTitle]}),f.jsx(fd,{onRangeChange:w,initialRangeType:"last30days"}),o?f.jsxs(Pt,{children:[_(o,!1,i),f.jsxs("div",{className:"mt-6 pt-4 border-t border-neutral-200 dark:border-neutral-700 space-y-3",children:[f.jsx(Fc,{id:"pdfReportThemeToggle",label:`Tem PDF Raport: ${p==="dark"?"ntunecat":"Luminos"}`,checked:p==="dark",onChange:C=>g(C?"dark":"light")}),f.jsx(ct,{onClick:b,variant:"secondary",isLoading:c,disabled:c,leftIcon:f.jsx(ju,{className:"h-5 w-5"}),className:"w-full sm:w-auto",children:M.generatePdfReportButton})]})]}):f.jsx(Pt,{children:f.jsx("p",{className:"text-center text-neutral-500 dark:text-neutral-400 py-10",children:M.noDataForCycleReport})})]})},Qle=()=>{const{user:t}=dn(),{addNotification:e}=gi(),[r,n]=X.useState(null),[i,a]=X.useState(null),[s,o]=X.useState(""),[l,c]=X.useState(null),[d,p]=X.useState(!1),[g,m]=X.useState(null),w=_=>{n(r===_?null:_)},v=_=>{a(i===_?null:_)},b=async _=>{if(_.preventDefault(),!s.trim()){e("Te rog introdu o ntrebare.",Je.WARNING);return}{e(M.geminiApiKeyMissingHelp,Je.ERROR),m(M.geminiApiKeyMissingHelp);return}};return f.jsxs("div",{className:"space-y-8 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(EU,{className:"h-8 w-8 mr-3 text-primary-500"}),M.helpCenterTitle]}),f.jsx(Pt,{title:M.faqSectionTitle,children:KT.length>0?f.jsx("div",{className:"space-y-3",children:KT.map((_,C)=>f.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-lg",children:[f.jsxs("button",{onClick:()=>w(_.question),className:"w-full flex justify-between items-center p-4 text-left hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-t-lg","aria-expanded":r===_.question,"aria-controls":`faq-answer-${C}`,children:[f.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-200",children:_.question}),r===_.question?f.jsx(N0,{className:"h-5 w-5 text-neutral-500"}):f.jsx(T0,{className:"h-5 w-5 text-neutral-500"})]}),r===_.question&&f.jsx("div",{id:`faq-answer-${C}`,className:"p-4 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-700/30 rounded-b-lg",children:f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 whitespace-pre-line",children:_.answer})})]},C))}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noDataAvailable})}),f.jsxs(Pt,{title:M.askGeminiSectionTitle,icon:f.jsx(Qu,{className:"h-6 w-6 text-yellow-500"}),children:[f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsx(Tr,{label:"ntrebarea ta:",name:"userQuestion",value:s,onChange:_=>o(_.target.value),placeholder:M.askGeminiInputPlaceholder,required:!0,disabled:d}),f.jsx(ct,{type:"submit",variant:"primary",isLoading:d,disabled:d,children:M.askGeminiButton})]}),d&&f.jsxs("div",{className:"mt-6 text-center",children:[f.jsx(Cn,{}),f.jsx("p",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:M.geminiLoadingResponse})]}),g&&!d&&f.jsx("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg text-red-700 dark:text-red-200",children:f.jsx("p",{children:g})}),l&&!d&&!g&&f.jsxs("div",{className:"mt-6 p-4 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mb-2",children:"Rspuns de la Asistentul Inteligent:"}),f.jsx("pre",{className:"whitespace-pre-wrap text-sm text-neutral-700 dark:text-neutral-200 font-sans",children:l})]}),!l&&!d&&!g&&s&&f.jsx("p",{className:"mt-4 text-sm text-neutral-500 dark:text-neutral-400",children:M.geminiNoResults})]}),f.jsx(Pt,{title:M.glossarySectionTitle,icon:f.jsx(Y7,{className:"h-6 w-6 text-indigo-500"}),children:WT.length>0?f.jsx("div",{className:"space-y-3",children:WT.map((_,C)=>f.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-lg",children:[f.jsxs("button",{onClick:()=>v(_.term),className:"w-full flex justify-between items-center p-4 text-left hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-t-lg","aria-expanded":i===_.term,"aria-controls":`glossary-explanation-${C}`,children:[f.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-200",children:_.term}),i===_.term?f.jsx(N0,{className:"h-5 w-5 text-neutral-500"}):f.jsx(T0,{className:"h-5 w-5 text-neutral-500"})]}),i===_.term&&f.jsx("div",{id:`glossary-explanation-${C}`,className:"p-4 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-700/30 rounded-b-lg",children:f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 whitespace-pre-line",children:_.explanation})})]},C))}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noDataAvailable})})]})},Hle=()=>{const{user:t}=dn(),{appData:e,addFeedbackItem:r,loading:n}=An(),{addNotification:i}=gi(),[a,s]=X.useState($A.GENERAL_FEEDBACK),[o,l]=X.useState(""),[c,d]=X.useState(""),[p,g]=X.useState(!1);if(n||!t||!e)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const m=async w=>{if(w.preventDefault(),!o.trim()||!c.trim()){i("Subiectul i descrierea sunt obligatorii.",Je.WARNING);return}g(!0);try{const v={userId:t.id,userName:t.name,userEmail:t.email,category:a,subject:o,description:c};if(r(v))i(M.feedbackSubmittedSuccessfully,Je.SUCCESS),s($A.GENERAL_FEEDBACK),l(""),d("");else throw new Error("Feedback item was not created.")}catch(v){i(M.failedToSubmitFeedback,Je.ERROR),console.error("Feedback submission error:",v)}finally{g(!1)}};return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(Z1,{className:"h-8 w-8 mr-3 text-primary-500"}),M.feedbackPageTitle]}),f.jsx(Pt,{title:M.feedbackFormTitle,children:f.jsxs("form",{onSubmit:m,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.feedbackCategoryLabel}),f.jsxs("select",{id:"category",name:"category",value:a,onChange:w=>s(w.target.value),className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[f.jsx("option",{value:$A.BUG_REPORT,children:M.feedbackCategoryBugReport}),f.jsx("option",{value:$A.SUGGESTION,children:M.feedbackCategorySuggestion}),f.jsx("option",{value:$A.GENERAL_FEEDBACK,children:M.feedbackCategoryGeneral})]})]}),f.jsx(Tr,{label:M.feedbackSubjectLabel,name:"subject",value:o,onChange:w=>l(w.target.value),placeholder:M.feedbackSubjectPlaceholder,required:!0,maxLength:100}),f.jsx(Pc,{label:M.feedbackDescriptionLabel,name:"description",value:c,onChange:w=>d(w.target.value),placeholder:M.feedbackDescriptionPlaceholder,rows:6,required:!0,maxLength:2e3}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Feedback-ul tu este anonimizat n sensul c numele tu real nu va fi public vizibil altor utilizatori, dar va fi nregistrat de administratori pentru a putea investiga sau rspunde dac este cazul."}),f.jsx(ct,{type:"submit",variant:"primary",isLoading:p,disabled:p,children:M.submitFeedbackButton})]})})]})},zle=()=>{const{user:t}=dn(),{appData:e,loading:r,getOrGenerateUserReferralCode:n}=An(),{addNotification:i}=gi(),[a,s]=X.useState(null),[o,l]=X.useState(!1);X.useEffect(()=>{(async()=>{if(t&&n){l(!0);try{const g=await n(t.id);s(g)}catch(g){i(M.referralCodeGenerationError,Je.ERROR),console.error("Error fetching referral code:",g)}finally{l(!1)}}})()},[t,n,i]);const c=()=>{a&&navigator.clipboard.writeText(a).then(()=>i(M.referralCodeCopied,Je.SUCCESS)).catch(p=>i("Eroare la copierea codului.",Je.ERROR))};if(r||!t||!e)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const d=(e.referrals||[]).filter(p=>p.referrerUserId===t.id&&p.status===yU.COMPLETED).map(p=>{const g=e.users.find(m=>m.id===p.referredUserId);return{...p,referredUserName:(g==null?void 0:g.name)||"Utilizator ters/Necunoscut"}}).sort((p,g)=>new Date(g.completedTimestamp||0).getTime()-new Date(p.completedTimestamp||0).getTime());return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(TB,{className:"h-8 w-8 mr-3 text-primary-500"}),M.referralPageTitle]}),f.jsx(Pt,{title:M.yourReferralCode,children:o?f.jsx(Cn,{}):a?f.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[f.jsx("p",{className:"text-2xl font-mono font-bold p-3 bg-primary-50 dark:bg-primary-800/30 text-primary-700 dark:text-primary-300 rounded-lg tracking-wider",children:a}),f.jsx(ct,{onClick:c,variant:"outline",leftIcon:f.jsx(ed,{className:"h-5 w-5"}),children:M.copyCodeButton})]}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.referralCodeGenerationError})}),f.jsxs(Pt,{title:M.referralInstructionsTitle,children:[f.jsxs("ul",{className:"list-decimal list-inside space-y-2 text-neutral-600 dark:text-neutral-300 text-sm",children:[f.jsx("li",{children:M.referralInstruction1}),f.jsx("li",{children:M.referralInstruction2})]}),f.jsx("h4",{className:"text-md font-semibold mt-4 mb-2 text-neutral-700 dark:text-neutral-200",children:M.referralBenefitsTitle}),f.jsxs("ul",{className:"list-disc list-inside space-y-1 text-neutral-600 dark:text-neutral-300 text-sm",children:[f.jsx("li",{children:M.referralBenefitYou}),f.jsx("li",{children:M.referralBenefitFriend})]}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-3",children:M.referralFutureBenefits})]}),f.jsx(Pt,{title:M.referralsMadeTitle,children:d.length>0?f.jsx("ul",{className:"space-y-3 max-h-80 overflow-y-auto",children:d.map(p=>f.jsx("li",{className:"p-3 rounded-lg bg-neutral-50 dark:bg-neutral-700/50 shadow-sm",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("p",{className:"font-medium text-neutral-800 dark:text-neutral-100",children:[M.referredUserLabel," ",f.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:p.referredUserName})]}),f.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[M.referralDateLabel," ",p.completedTimestamp?or(p.completedTimestamp):"-"]})]})},p.id))}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noSuccessfulReferrals})})]})},G_=[At.INVESTMENT_APPROVAL,At.WITHDRAWAL_APPROVAL,At.PROFIT_DISTRIBUTION,At.FEE_COLLECTION,At.INVESTMENT_REQUEST,At.WITHDRAWAL_REQUEST],Gle=()=>{const{user:t}=dn(),{appData:e,loading:r}=An(),{addNotification:n}=gi(),{theme:i}=zo(),[a,s]=X.useState({startDate:null,endDate:null}),[o,l]=X.useState(()=>[...G_]),[c,d]=X.useState(i),[p,g]=X.useState(!1);X.useEffect(()=>{d(i)},[i]);const m=S=>{l(O=>O.includes(S)?O.filter(j=>j!==S):[...O,S])},w=S=>{l(S?[...G_]:[])},v=X.useMemo(()=>{if(!e||!t)return[];const S=e.users.find(U=>U.id===t.id);let O=[];const j=(e.transactions||[]).filter(U=>!(U.userId!==t.id||U.type===At.PROFIT_DISTRIBUTION||U.type===At.FEE_COLLECTION||o.length>0&&!o.includes(U.type)||a.startDate&&new Date(U.timestamp).toISOString().split("T")[0]<a.startDate||a.endDate&&new Date(U.timestamp).toISOString().split("T")[0]>a.endDate));if(O.push(...j),S!=null&&S.profileData.investmentHistory){const U=S.profileData.investmentHistory.map((P,F)=>{let H=null,L="";return P.type==="PROFIT_PAYOUT"&&o.includes(At.PROFIT_DISTRIBUTION)?(H=At.PROFIT_DISTRIBUTION,L=P.amount>=0?"Distribuire profit (din istoric personal)":"Acoperire pierdere (din istoric personal)"):P.type==="FEE"&&o.includes(At.FEE_COLLECTION)&&(H=At.FEE_COLLECTION,L="Colectare tax platform (din istoric personal)"),H?{id:`hist_${t.id}_${P.date}_${F}`,timestamp:P.date,userId:t.id,type:H,amount:P.amount,status:fr.COMPLETED,description:L}:null}).filter(P=>P!==null).filter(P=>!(a.startDate&&new Date(P.timestamp).toISOString().split("T")[0]<a.startDate||a.endDate&&new Date(P.timestamp).toISOString().split("T")[0]>a.endDate));O.push(...U)}return O.sort((U,P)=>new Date(P.timestamp).getTime()-new Date(U.timestamp).getTime())},[e,t,o,a]),b=()=>{if(v.length===0){n(M.noTransactionsFoundForFilters,Je.WARNING);return}g(!0),n(M.exportGeneratingCsv,Je.INFO),setTimeout(()=>{try{const S=v.map(G=>({Data:or(G.timestamp,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),Tip:hA[G.type]||G.type,Descriere:`"${G.description.replace(/"/g,'""')}"`,Suma:G.amount!==void 0?G.amount.toFixed(2):"",Status:G.status})),O=`Data,Tip,Descriere,Suma (EUR),Status
`,j=S.map(G=>`${G.Data},${G.Tip},${G.Descriere},${G.Suma},${G.Status}`).join(`
`),U=O+j,P=new Blob([`\uFEFF${U}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a"),H=URL.createObjectURL(P);F.setAttribute("href",H);const L=(t==null?void 0:t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase())||"raport",k=new Date().toISOString().split("T")[0];F.setAttribute("download",`Raport_Avansat_${L}_${k}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F),n(M.exportCsvSuccess,Je.SUCCESS)}catch(S){n(M.exportError,Je.ERROR),console.error("CSV Export Error:",S)}finally{g(!1)}},500)},_=()=>{if(v.length===0){n(M.noTransactionsFoundForFilters,Je.WARNING);return}g(!0);try{const S=v.map(P=>({date:P.timestamp,type:hA[P.type]||P.type,description:P.description,amount:P.amount,status:P.status})),O={date:M.tableHeaderDate,type:M.tableHeaderType,description:M.tableHeaderDescription,amount:M.tableHeaderAmount,status:M.tableHeaderStatus},j=(t==null?void 0:t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase())||"raport",U=new Date().toISOString().split("T")[0];YM(S,`Raport_Avansat_${j}_${U}.xlsx`,"Tranzacii",O),n(M.xlsxExportSuccess,Je.SUCCESS)}catch(S){n(M.xlsxExportFailed,Je.ERROR),console.error("XLSX Export Error:",S)}finally{g(!1)}},C=({theme:S})=>{const{user:O}=dn(),j=S==="dark"?"bg-neutral-900":"bg-white",U=S==="dark"?"text-neutral-100":"text-neutral-800",P=S==="dark"?"text-neutral-300":"text-neutral-600",F=S==="dark"?"border-neutral-700":"border-neutral-300",H=`p-2 text-left text-xs font-semibold ${S==="dark"?"text-neutral-300 bg-neutral-800":"text-neutral-600 bg-neutral-100"}`,L=`p-2 text-sm ${F} ${S==="dark"?"text-neutral-200":"text-neutral-700"}`,k=a.startDate&&a.endDate?`${or(a.startDate)} - ${or(a.endDate)}`:M.allTime,G=o.map(q=>hA[q]||q).join(", ")||"Toate Tipurile";return Nr.createElement("div",{className:`pdf-render-advanced-report p-4 ${j} ${U}`},Nr.createElement("h1",{className:"text-xl font-bold mb-2"},M.reportPdfTitle),Nr.createElement("p",{className:`text-sm mb-1 ${P}`},`${M.reportUserLabel} ${(O==null?void 0:O.name)||(t==null?void 0:t.name)}`),Nr.createElement("p",{className:`text-sm mb-1 ${P}`},`${M.reportPeriodLabel} ${k}`),Nr.createElement("p",{className:`text-sm mb-3 ${P}`},`${M.reportFiltersAppliedLabel} ${G}`),Nr.createElement("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px"}},Nr.createElement("thead",null,Nr.createElement("tr",null,Nr.createElement("th",{className:H,style:{border:`1px solid ${S==="dark"?"#404040":"#e0e0e0"}`}},M.tableHeaderDate),Nr.createElement("th",{className:H,style:{border:`1px solid ${S==="dark"?"#404040":"#e0e0e0"}`}},M.tableHeaderType),Nr.createElement("th",{className:H,style:{border:`1px solid ${S==="dark"?"#404040":"#e0e0e0"}`}},M.tableHeaderDescription),Nr.createElement("th",{className:H,style:{border:`1px solid ${S==="dark"?"#404040":"#e0e0e0"}`,textAlign:"right"}},M.tableHeaderAmount),Nr.createElement("th",{className:H,style:{border:`1px solid ${S==="dark"?"#404040":"#e0e0e0"}`}},M.tableHeaderStatus))),Nr.createElement("tbody",null,v.map(q=>Nr.createElement("tr",{key:q.id,style:{borderBottom:`1px solid ${S==="dark"?"#404040":"#e0e0e0"}`}},Nr.createElement("td",{className:L},or(q.timestamp,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),Nr.createElement("td",{className:L},hA[q.type]||q.type),Nr.createElement("td",{className:L,style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},q.description),Nr.createElement("td",{className:L,style:{textAlign:"right",color:(q.amount||0)>=0?S==="dark"?"#4ade80":"#16a34a":S==="dark"?"#f87171":"#dc2626"}},q.amount!==void 0?_t(q.amount):"-"),Nr.createElement("td",{className:L},q.status))))),Nr.createElement("p",{className:`text-xs mt-4 ${P}`},`${M.reportGeneratedDateLabel} ${or(new Date().toISOString())}`))},T=async()=>{if(v.length===0){n(M.noTransactionsFoundForFilters,Je.WARNING);return}g(!0),n(M.exportGeneratingPdf,Je.INFO);const S=document.createElement("div");S.style.position="absolute",S.style.left="-9999px",S.style.top="-9999px",S.style.width="1000px",document.body.appendChild(S);const O=W1.createRoot(S);O.render(f.jsx(Nr.StrictMode,{children:f.jsx(q1,{children:f.jsx(rx,{children:f.jsx(nx,{children:f.jsx(ix,{children:f.jsx(ax,{forcedTheme:c,children:f.jsx(C,{theme:c})})})})})})})),await new Promise(j=>setTimeout(j,1500));try{const j=S.querySelector(".pdf-render-advanced-report");if(!j)throw new Error("PDF content element not found after rendering.");const P=(await dx(j,{scale:2,useCORS:!0,logging:!1,backgroundColor:c==="dark"?"#0f172a":"#ffffff",onclone:I=>{c==="dark"?(I.documentElement.classList.add("dark"),I.documentElement.classList.remove("light")):(I.documentElement.classList.remove("dark"),I.documentElement.classList.add("light"))}})).toDataURL("image/png"),F=new gr({orientation:"landscape",unit:"pt",format:"a4"}),H=F.internal.pageSize.getWidth(),L=F.internal.pageSize.getHeight(),k=F.getImageProperties(P),G=40,q=H-2*G,ce=L-2*G;let Y=k.width,ie=k.height;if(k.width>q){const I=q/k.width;Y=q,ie=k.height*I}if(ie>ce){const I=ce/ie;ie=ce,Y=Y*I}const me=(H-Y)/2,Te=(L-ie)/2;F.addImage(P,"PNG",me,Te,Y,ie);const ue=(t==null?void 0:t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase())||"raport",ne=new Date().toISOString().split("T")[0];F.save(`Raport_Financiar_${ue}_${ne}_(${c}).pdf`),n(M.exportPdfSuccess,Je.SUCCESS)}catch(j){n(M.exportError,Je.ERROR),console.error("PDF Export Error:",j)}finally{O.unmount(),document.body.contains(S)&&document.body.removeChild(S),g(!1)}};return r||!t||!e?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})}):f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(Aw,{className:"h-8 w-8 mr-3 text-primary-500"}),M.advancedReportsPageTitle]}),f.jsxs(Pt,{title:"Filtre Raport",children:[f.jsx(fd,{onRangeChange:s,initialRangeType:"all"}),f.jsxs("div",{className:"mt-4",children:[f.jsx("h3",{className:"text-md font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:M.filterByTransactionType}),f.jsxs("div",{className:"mb-3 flex space-x-2",children:[f.jsx(ct,{variant:"outline",size:"sm",onClick:()=>w(!0),children:M.selectAllTransactionTypes}),f.jsx(ct,{variant:"outline",size:"sm",onClick:()=>w(!1),children:M.deselectAllTransactionTypes})]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:G_.map(S=>f.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 cursor-pointer transition-colors",children:[f.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-primary-600 rounded border-neutral-300 dark:border-neutral-600 bg-neutral-100 dark:bg-neutral-900 focus:ring-primary-500 dark:focus:ring-primary-400 dark:ring-offset-neutral-800",checked:o.includes(S),onChange:()=>m(S)}),f.jsx("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:hA[S]||S})]},S))})]})]}),f.jsxs(Pt,{title:"Rezultate Raport",children:[f.jsxs("div",{className:"mb-4 space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[f.jsx(ct,{onClick:b,variant:"secondary",leftIcon:f.jsx(ju,{className:"h-5 w-5"}),disabled:p,isLoading:p&&!1,children:M.exportToCsvButton}),f.jsx(ct,{onClick:_,variant:"secondary",leftIcon:f.jsx(Aw,{className:"h-5 w-5"}),disabled:p,isLoading:p&&!1,children:M.exportToXlsxButton}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx(ct,{onClick:T,variant:"primary",leftIcon:f.jsx(IB,{className:"h-5 w-5"}),disabled:p,isLoading:p,children:M.exportToPdfButton}),f.jsxs("select",{value:c,onChange:S=>d(S.target.value),className:"px-3 py-2 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500 text-sm h-full","aria-label":"Tem PDF",disabled:p,children:[f.jsx("option",{value:"light",children:M.lightMode}),f.jsx("option",{value:"dark",children:M.darkMode})]})]})]}),v.length>0?f.jsx("div",{className:"overflow-x-auto max-h-[60vh]",children:f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700",children:[f.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800 sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderDate}),f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderType}),f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderDescription}),f.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderAmount}),f.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.tableHeaderStatus})]})}),f.jsx("tbody",{className:"bg-white dark:bg-neutral-800/50 divide-y divide-neutral-200 dark:divide-neutral-700",children:v.map(S=>f.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30 transition-colors",children:[f.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:or(S.timestamp)}),f.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:hA[S.type]||S.type}),f.jsx("td",{className:"px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 max-w-xs truncate",title:S.description,children:S.description}),f.jsx("td",{className:`px-3 py-2 whitespace-nowrap text-sm text-right font-semibold ${(S.amount||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:S.amount!==void 0?_t(S.amount):"-"}),f.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:f.jsx("span",{className:`px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${S.status===fr.PENDING?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":S.status===fr.COMPLETED||S.status===fr.APPROVED?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":S.status===fr.REJECTED||S.status===fr.FAILED?"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100":"bg-neutral-100 text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100"}`,children:S.status})})]},S.id))})]})}):f.jsx("p",{className:"text-center py-10 text-neutral-500 dark:text-neutral-400",children:M.noTransactionsFoundForFilters})]})]})},Vle=()=>{const{user:t}=dn(),{appData:e,loading:r,addInvestmentGoal:n,updateInvestmentGoal:i,deleteInvestmentGoal:a,checkAndCompleteGoals:s}=An(),{addNotification:o}=gi(),[l,c]=X.useState(!1),[d,p]=X.useState(null),g={name:"",goalType:Lo.TARGET_BALANCE,targetAmount:"",targetDate:"",notes:""},[m,w]=X.useState(g),[v,b]=X.useState(!1),[_,C]=X.useState(null),T=X.useMemo(()=>!t||!(e!=null&&e.users)?null:e.users.find(Y=>Y.id===t.id),[e==null?void 0:e.users,t==null?void 0:t.id]);X.useEffect(()=>{t!=null&&t.id&&s(t.id)},[t==null?void 0:t.id,T==null?void 0:T.profileData,s]),X.useEffect(()=>{w(d?{name:d.name,goalType:d.goalType,targetAmount:d.targetAmount.toString(),targetDate:d.targetDate||"",notes:d.notes||""}:g)},[d,l]);const S=Y=>{const{name:ie,value:me}=Y.target;w(Te=>({...Te,[ie]:me}))},O=()=>{p(null),c(!0)},j=Y=>{p(Y),c(!0)},U=Y=>{C(Y),b(!0)},P=()=>{_&&(a(_.id)?o(M.goalCancelledSuccessfully,Je.SUCCESS):o(M.failedToCancelGoal,Je.ERROR)),b(!1),C(null)},F=Y=>{if(Y.preventDefault(),!t)return;const ie=parseFloat(m.targetAmount);if(isNaN(ie)||ie<=0){o("Suma int trebuie s fie un numr pozitiv.",Je.ERROR);return}if(m.targetDate&&new Date(m.targetDate)<new Date(new Date().toDateString())){o("Data int nu poate fi n trecut.",Je.ERROR);return}const me={name:m.name,goalType:m.goalType,targetAmount:ie,targetDate:m.targetDate||void 0,notes:m.notes};try{d?i(d.id,me):n({...me,userId:t.id}),c(!1)}catch(Te){console.error("Goal submission error:",Te)}},H=Y=>{if(!T)return{percentage:0,currentValue:0};let ie=0;Y.status===ai.COMPLETED&&Y.completedDate,Y.goalType===Lo.TARGET_BALANCE?ie=(T.profileData.investedAmount||0)+(T.profileData.totalProfitEarned||0):Y.goalType===Lo.TARGET_PROFIT_TOTAL&&(ie=T.profileData.totalProfitEarned||0);const me=Y.targetAmount>0?Math.min(Math.max(ie/Y.targetAmount*100,0),100):0;let Te;if(Y.targetDate&&Y.status===ai.ACTIVE){const ue=new Date(Y.targetDate),ne=new Date;ne.setHours(0,0,0,0),ue.setHours(0,0,0,0),ue>=ne&&(Te=Math.ceil((ue.getTime()-ne.getTime())/(1e3*60*60*24)))}return{percentage:me,currentValue:ie,daysLeft:Te}};if(r||!e||!t||!T)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const L=(e.investmentGoals||[]).filter(Y=>Y.userId===t.id).sort((Y,ie)=>new Date(ie.startDate).getTime()-new Date(Y.startDate).getTime()),k=L.filter(Y=>Y.status===ai.ACTIVE),G=L.filter(Y=>Y.status===ai.COMPLETED),q=L.filter(Y=>Y.status===ai.CANCELLED),ce=Y=>{const{percentage:ie,currentValue:me,daysLeft:Te}=H(Y);let ue="bg-blue-500";return Y.status===ai.COMPLETED?ue="bg-green-500":Y.status===ai.CANCELLED&&(ue="bg-neutral-500"),f.jsxs(Pt,{title:Y.name,icon:Y.status===ai.COMPLETED?f.jsx($1,{className:"h-6 w-6 text-yellow-400"}):f.jsx(gp,{className:"h-6 w-6 text-primary-500"}),className:`transition-all duration-300 ${Y.status===ai.CANCELLED?"opacity-60":""}`,children:[f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-1",children:FU[Y.goalType]}),f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex justify-between text-sm text-neutral-700 dark:text-neutral-200 mb-1",children:[f.jsx("span",{children:_t(me)}),f.jsx("span",{children:_t(Y.targetAmount)})]}),f.jsx("div",{className:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-3",children:f.jsx("div",{className:`${ue} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${Y.status===ai.COMPLETED?100:ie}%`},role:"progressbar","aria-valuenow":Y.status===ai.COMPLETED?100:ie,"aria-valuemin":0,"aria-valuemax":100})}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1 text-right",children:Y.status===ai.COMPLETED?M.goalAchieved:`${ie.toFixed(1)}% atins`})]}),f.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 space-y-0.5 mb-3",children:[f.jsxs("p",{children:[M.goalStartDateLabel," ",or(Y.startDate,{day:"numeric",month:"long",year:"numeric"})]}),Y.targetDate&&f.jsxs("p",{children:["Data int: ",or(Y.targetDate,{day:"numeric",month:"long",year:"numeric"}),Te!==void 0&&Y.status===ai.ACTIVE&&` (${M.daysRemaining} ${Te})`,Te===void 0&&Y.targetDate&&new Date(Y.targetDate)<new Date(new Date().toDateString())&&Y.status===ai.ACTIVE&&` (${M.targetDatePassed})`]}),Y.status===ai.COMPLETED&&Y.completedDate&&f.jsxs("p",{className:"font-semibold text-green-500",children:[M.goalCompletedDateLabel," ",or(Y.completedDate,{day:"numeric",month:"long",year:"numeric"})]})]}),Y.notes&&f.jsxs("p",{className:"text-sm italic text-neutral-600 dark:text-neutral-300 p-2 bg-neutral-50 dark:bg-neutral-700/30 rounded mb-3",children:["Notie: ",Y.notes]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-700 flex justify-end space-x-2",children:[Y.status===ai.ACTIVE&&f.jsxs(f.Fragment,{children:[f.jsx(ct,{variant:"outline",size:"sm",onClick:()=>j(Y),leftIcon:f.jsx(Jp,{className:"h-4 w-4"}),children:M.edit}),f.jsx(ct,{variant:"danger",size:"sm",onClick:()=>U(Y),leftIcon:f.jsx(Al,{className:"h-4 w-4"}),children:M.cancel})]}),Y.status===ai.COMPLETED&&f.jsxs("span",{className:"text-green-500 font-semibold flex items-center",children:[f.jsx(rl,{className:"h-5 w-5 mr-1"})," ",M.goalStatusCompleted]}),Y.status===ai.CANCELLED&&f.jsxs("span",{className:"text-neutral-500 font-semibold flex items-center",children:[f.jsx(Al,{className:"h-5 w-5 mr-1"})," ",M.goalStatusCancelled]})]})]},Y.id)};return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(gp,{className:"h-8 w-8 mr-3 text-primary-500"}),M.userGoalsPageTitle]}),f.jsx(ct,{onClick:O,variant:"primary",leftIcon:f.jsx(tx,{className:"h-5 w-5"}),children:M.createNewGoal}),k.length>0&&f.jsxs("section",{children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-200 mb-3",children:"Obiective Active"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(ce)})]}),G.length>0&&f.jsxs("section",{children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-200 mb-3",children:"Obiective Finalizate"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(ce)})]}),q.length>0&&f.jsxs("section",{children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-200 mb-3",children:"Obiective Anulate"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(ce)})]}),L.length===0&&f.jsxs(Pt,{className:"text-center py-10",children:[f.jsx(gp,{className:"h-12 w-12 text-neutral-400 dark:text-neutral-500 mx-auto mb-4"}),f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noGoalsSet})]}),l&&f.jsx(SA,{isOpen:l,onClose:()=>c(!1),title:d?`Modific Obiectiv: ${d.name}`:M.createNewGoal,size:"lg",children:f.jsxs("form",{onSubmit:F,className:"space-y-4",children:[f.jsx(Tr,{label:M.goalNameLabel,name:"name",value:m.name,onChange:S,placeholder:M.goalNamePlaceholder,required:!0}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"goalType",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.goalTypeLabel}),f.jsxs("select",{id:"goalType",name:"goalType",value:m.goalType,onChange:S,className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:Lo.TARGET_BALANCE,children:M.goalTypeTargetBalance}),f.jsx("option",{value:Lo.TARGET_PROFIT_TOTAL,children:M.goalTypeTargetProfitTotal})]})]}),f.jsx(Tr,{label:M.goalTargetAmountLabel,type:"number",name:"targetAmount",value:m.targetAmount,onChange:S,placeholder:"ex: 5000",min:"1",required:!0}),f.jsx(Tr,{label:M.goalTargetDateLabel,type:"date",name:"targetDate",value:m.targetDate,onChange:S,min:new Date().toISOString().split("T")[0]}),f.jsx(Pc,{label:M.goalNotesLabel,name:"notes",value:m.notes,onChange:S,rows:3,placeholder:"Detalii suplimentare despre obiectiv..."}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[f.jsx(ct,{variant:"ghost",type:"button",onClick:()=>c(!1),children:M.cancel}),f.jsx(ct,{variant:"primary",type:"submit",children:d?M.save:M.createNewGoal})]})]})}),v&&_&&f.jsx(wx,{isOpen:v,onClose:()=>b(!1),onConfirm:P,title:M.confirmGoalCancellationTitle,message:M.confirmGoalCancellationMessage.replace("{goalName}",_.name),confirmText:M.cancel,cancelText:"nchide"})]})},XM=({trigger:t})=>{const e=X.useRef(null);return X.useEffect(()=>{if(t===0)return;const r=e.current;if(!r)return;const n=r.getContext("2d");if(!n)return;let i;return(()=>{r.style.display="block";const s=r.width=window.innerWidth,o=r.height=window.innerHeight,l=["#22d3ee","#34d399","#fbbf24","#ef4444","#a78bfa","#60a5fa"],d=Array.from({length:180},()=>({x:Math.random()*s,y:-10-Math.random()*o*.3,vx:(Math.random()-.5)*3,vy:2+Math.random()*3,size:5+Math.random()*6,rot:Math.random()*Math.PI,vr:(Math.random()-.5)*.2,col:l[Math.floor(Math.random()*l.length)]}));let p=0;const g=2200,m=.05,w=performance.now(),v=b=>{p=b-w;const _=r.width=window.innerWidth,C=r.height=window.innerHeight;n.clearRect(0,0,_,C);for(const T of d)T.vy+=m,T.x+=T.vx,T.y+=T.vy,T.rot+=T.vr,(T.x>_+T.size||T.x<-T.size||T.y>C+T.size)&&(T.x=Math.random()*_,T.y=-20),n.save(),n.translate(T.x,T.y),n.rotate(T.rot),n.fillStyle=T.col,n.fillRect(-T.size/2,-T.size/2,T.size,T.size),n.restore();p<g?i=requestAnimationFrame(v):(r.style.display="none",n.clearRect(0,0,_,C))};i=requestAnimationFrame(v)})(),()=>{cancelAnimationFrame(i),r&&(r.style.display="none")}},[t]),f.jsx("canvas",{ref:e,style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:100,display:"none"}})},Kle=t=>t<0?0:t,Wle=t=>{const e=Kle(t),r=Math.floor(e/1e3),n=Math.floor(r/86400),i=Math.floor(r%86400/3600),a=Math.floor(r%3600/60),s=r%60;return n>0?`${n}z ${i}h ${a}m`:i>0?`${i}h ${a}m ${s}s`:a>0?`${a}m ${s}s`:`${s}s`},Yle=({details:t})=>t?f.jsxs("div",{className:"mt-3 pt-3 border-t border-dashed border-neutral-600",children:[f.jsx("h5",{className:"text-xs font-semibold text-neutral-400 mb-2",children:"PROFITURI POTENIALE (MIDDLE)"}),f.jsxs("div",{className:"p-2 bg-neutral-900/50 rounded text-xs grid grid-cols-1 sm:grid-cols-3 gap-2 text-center",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-400 block",children:"Dac iese Value Bet"}),f.jsx("b",{className:`text-sm ${(t.p1??0)>=0?"text-green-400":"text-red-400"}`,children:_t(t.p1)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-400 block",children:"Dac iese Middle Bet"}),f.jsx("b",{className:`text-sm ${(t.p2??0)>=0?"text-green-400":"text-red-400"}`,children:_t(t.p2)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-400 block",children:"Dac ies ambele"}),f.jsx("b",{className:"text-sm text-green-400",children:_t(t.pb)})]})]})]}):null,Xle=()=>{var U;const{user:t}=dn(),{appData:e,loading:r}=An(),n=fl(),[i,a]=X.useState({startDate:null,endDate:null}),o=((U=n.state)==null?void 0:U.preFilterStatus)==="PENDING"?"ACTIVE":"ALL",[l,c]=X.useState(o),[d,p]=X.useState("ALL"),[g,m]=X.useState(""),[w,v]=X.useState("list"),[b,_]=X.useState({key:"eventTimestamp",direction:"descending"}),C=X.useMemo(()=>{if(!(e!=null&&e.bets))return[];let P=e.bets;i.startDate&&i.endDate&&(P=P.filter(L=>{const k=L.date;return k>=i.startDate&&k<=i.endDate}));const F={};for(const L of P)F[L.groupId]||(F[L.groupId]=[]),F[L.groupId].push(L);let H=Object.values(F).map(L=>({groupId:L[0].groupId,bets:L,event:L[0].event,sport:L[0].sport,league:L[0].league,eventTimestamp:L[0].eventTimestamp}));if(g.trim()!==""){const L=g.toLowerCase().trim();H=H.filter(k=>{const G=k.event.toLowerCase().includes(L),q=k.bets.some(Y=>Y.selection.toLowerCase().includes(L)),ce=k.bets.some(Y=>OB[Y.status].toLowerCase().includes(L));return G||q||ce})}return l!=="ALL"&&(H=H.filter(L=>{const k=L.bets.every(q=>q.status!==Br.PENDING),G=L.bets.reduce((q,ce)=>q+(ce.profit??0),0);switch(l){case"ACTIVE":return!k;case"PROFIT":return k&&G>0;case"LOSS":return k&&G<0;case"ZERO_PROFIT":return k&&G===0;default:return!0}})),H.sort((L,k)=>{var ie,me,Te,ue;let G,q;switch(b.key){case"totalStake":G=L.bets.reduce((Q,z)=>Q+z.stake,0),q=k.bets.reduce((Q,z)=>Q+z.stake,0);break;case"totalProfit":const ne=L.bets.some(Q=>Q.status===Br.PENDING),I=k.bets.some(Q=>Q.status===Br.PENDING);G=ne?-1/0:L.bets.reduce((Q,z)=>Q+(z.profit??0),0),q=I?-1/0:k.bets.reduce((Q,z)=>Q+(z.profit??0),0);break;case"primaryOdds":G=((ie=L.bets.find(Q=>Q.betType===ya.VALUE))==null?void 0:ie.odds)??0,q=((me=k.bets.find(Q=>Q.betType===ya.VALUE))==null?void 0:me.odds)??0;break;case"primarySelection":G=((Te=L.bets.find(Q=>Q.betType===ya.VALUE))==null?void 0:Te.selection)??"",q=((ue=k.bets.find(Q=>Q.betType===ya.VALUE))==null?void 0:ue.selection)??"";break;case"eventTimestamp":case"event":G=L[b.key],q=k[b.key];break;default:G=0,q=0}if(G<q)return b.direction==="ascending"?-1:1;if(G>q)return b.direction==="ascending"?1:-1;const ce=new Date(L.eventTimestamp).getTime();return new Date(k.eventTimestamp).getTime()-ce}),H},[e==null?void 0:e.bets,i,l,g,b]),T=X.useMemo(()=>{let P=0,F=0,H=0;C.forEach(G=>{G.bets.filter(ce=>d==="VALUE"?ce.betType===ya.VALUE:d==="MIDDLE"?ce.betType===ya.MIDDLE:!0).forEach(ce=>{ce.status===Br.PENDING?H++:(F++,P+=ce.profit??0)})});const L=F+H,k=L>0?F/L*100:0;return{totalProfit:P,resolvedCount:F,pendingCount:H,totalCount:L,completion:k}},[C,d]),S=X.useMemo(()=>{if(w!=="daily")return null;const P={};for(const F of C){const H=F.bets[0].date;P[H]||(P[H]=[]),P[H].push(F)}return Object.entries(P).sort((F,H)=>H[0].localeCompare(F[0]))},[C,w]);if(r||!t)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const O=[{key:"ALL",label:"Toate"},{key:"ACTIVE",label:"Active"},{key:"PROFIT",label:"Profit"},{key:"LOSS",label:"Pierdere"},{key:"ZERO_PROFIT",label:"Profit 0"}],j=[{key:"ALL",label:"Toate Tipurile"},{key:"VALUE",label:"Doar Value"},{key:"MIDDLE",label:"Doar Middle"}];return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(lw,{className:"h-8 w-8 mr-3 text-primary-500"}),M.betHistory]}),f.jsx(Pt,{title:"Filtreaz Istoricul",icon:f.jsx(SB,{className:"h-6 w-6"}),children:f.jsxs("div",{className:"space-y-4",children:[f.jsx(fd,{onRangeChange:a,initialRangeType:"all"}),f.jsx("div",{className:"pt-2",children:f.jsx(Tr,{label:"Caut",placeholder:"Caut dup eveniment, selecie, status...",value:g,onChange:P=>m(P.target.value),containerClassName:"mb-0"})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:"Filtreaz dup Status"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(({key:P,label:F})=>f.jsx(ct,{variant:l===P?"primary":"outline",size:"sm",onClick:()=>c(P),children:F},P))})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:"Filtreaz dup Tipul Pariului"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(({key:P,label:F})=>f.jsx(ct,{variant:d===P?"primary":"outline",size:"sm",onClick:()=>p(P),children:F},P))})]})]}),f.jsxs("div",{className:"pt-4 mt-4 border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("h4",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:"Mod Vizualizare"}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(ct,{variant:w==="list"?"primary":"outline",size:"sm",onClick:()=>v("list"),leftIcon:f.jsx(LB,{className:"h-5 w-5"}),children:"List Sortabil"}),f.jsx(ct,{variant:w==="daily"?"primary":"outline",size:"sm",onClick:()=>v("daily"),leftIcon:f.jsx(S0,{className:"h-5 w-5"}),children:"Grupat pe Zile"})]})]})]})}),f.jsx(Pt,{title:"Sumar Performan (Filtre Aplicate)",icon:f.jsx(Q7,{className:"h-6 w-6"}),className:`transition-colors duration-300 ${T.totalProfit>=0?"bg-green-50 border-green-200 dark:bg-green-900/30 dark:border-green-800":"bg-red-50 border-red-200 dark:bg-red-900/30 dark:border-red-800"}`,children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-center",children:[f.jsxs("div",{className:"md:col-span-1 text-center p-4 rounded-lg bg-white/50 dark:bg-black/20 shadow-inner",children:[f.jsx("p",{className:"text-sm font-medium text-neutral-500 dark:text-neutral-400",children:"Profit Total (Net)"}),f.jsx("p",{className:`text-4xl font-bold transition-colors duration-300 ${T.totalProfit>=0?"text-green-500":"text-red-500"}`,children:_t(T.totalProfit)})]}),f.jsxs("div",{className:"md:col-span-2 space-y-4",children:[f.jsxs("div",{className:"flex justify-around text-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-neutral-500 dark:text-neutral-400",children:"Pariuri Finalizate"}),f.jsx("p",{className:"text-2xl font-semibold text-neutral-800 dark:text-neutral-100",children:T.resolvedCount})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-neutral-500 dark:text-neutral-400",children:"Pariuri n Ateptare"}),f.jsx("p",{className:"text-2xl font-semibold text-neutral-800 dark:text-neutral-100",children:T.pendingCount})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"h-2.5 w-full rounded-full bg-neutral-200 dark:bg-neutral-700 overflow-hidden",children:f.jsx("div",{className:"h-2.5 rounded-full bg-primary-500 transition-all duration-500 ease-out",style:{width:`${T.completion}%`}})}),f.jsxs("p",{className:"text-xs text-center mt-1 text-neutral-500 dark:text-neutral-400",children:[T.completion.toFixed(0),"% Finalizat (",T.resolvedCount," din ",T.totalCount," pariuri)"]})]})]})]})}),f.jsx("div",{className:"space-y-3",children:C.length>0?f.jsxs(f.Fragment,{children:[w==="list"&&f.jsx("div",{className:"space-y-3",children:C.map(P=>f.jsx(eU,{group:P,typeFilter:d},P.groupId))}),w==="daily"&&S&&S.map(([P,F])=>f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-200 mb-2 mt-4 p-2 bg-neutral-100 dark:bg-neutral-700/50 rounded-md",children:or(P,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),f.jsx("div",{className:"space-y-3",children:F.map(H=>f.jsx(eU,{group:H,typeFilter:d},H.groupId))})]},P))]}):f.jsx(Pt,{children:f.jsx("p",{className:"text-center text-neutral-500 dark:text-neutral-400 py-10",children:"Niciun pariu gsit pentru filtrele selectate."})})})]})},eU=({group:t,typeFilter:e})=>{var T,S;const[r,n]=X.useState(!1),[i,a]=X.useState(()=>Date.now()),[s,o]=X.useState(0),l=t.bets.find(O=>O.betType===ya.MIDDLE),c=t.bets.some(O=>O.status===Br.PENDING);X.useEffect(()=>{if(c){const O=window.setInterval(()=>a(Date.now()),1e3);return()=>clearInterval(O)}},[c]);const d=new Date(t.eventTimestamp).getTime(),p=c?d<=i:!1,m=c&&i<d?Wle(d-i):null,w=t.bets.reduce((O,j)=>O+(j.profit??0),0),v=!c&&w>0;X.useEffect(()=>{v&&r&&o(O=>O+1)},[v,r]);const b=/Scor: (.*?)\./,_=t.bets.find(O=>{var j;return(j=O.notes)==null?void 0:j.match(b)}),C=(S=(T=_==null?void 0:_.notes)==null?void 0:T.match(b))==null?void 0:S[1];return f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 shadow-lg transition-all hover:border-primary-600/50",children:[f.jsx(XM,{trigger:s}),f.jsxs("div",{className:"flex justify-between items-start border-b border-dashed border-neutral-600 pb-3 mb-3 flex-wrap gap-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-neutral-100",children:t.event}),f.jsxs("div",{className:"flex items-center flex-wrap gap-x-3 gap-y-1 text-xs mt-1",children:[!c&&C&&f.jsxs("span",{className:"font-bold text-amber-300 bg-amber-900/60 px-2 py-0.5 rounded-full",children:["Scor: ",C]}),c?p?f.jsxs("span",{className:"flex items-center font-bold text-red-500 animate-pulse",children:[f.jsxs("span",{className:"relative flex h-2 w-2 mr-1.5",children:[f.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),f.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),"LIVE"]}):m&&f.jsxs("span",{className:"font-semibold text-amber-300",children:["ncepe n ",m]}):f.jsx("span",{className:"font-semibold text-green-400",children:"Finalizat"}),f.jsx("span",{className:"text-neutral-400",children:or(t.eventTimestamp,{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})}),f.jsxs("span",{className:"text-neutral-400",children:[" ",t.sport,"  ",t.league]})]})]}),f.jsxs("button",{onClick:()=>n(!r),className:"text-primary-400 font-bold text-sm px-4 py-2 bg-primary-900/50 hover:bg-primary-800/50 rounded-md transition-colors flex items-center gap-2",children:[r?f.jsx(N0,{className:"h-4 w-4"}):f.jsx(T0,{className:"h-4 w-4"}),r?"Ascunde":"Detalii"]})]}),r&&f.jsxs("div",{className:"space-y-2 animate-fade-in",children:[t.bets.filter(O=>e==="ALL"||O.betType===e).map(O=>f.jsx(qle,{bet:O},O.id)),(l==null?void 0:l.middleDetails)&&f.jsx(Yle,{details:l.middleDetails})]}),!c&&f.jsxs("div",{className:`mt-3 p-3 rounded-md flex justify-between items-center font-bold text-lg ${w>=0?"bg-green-900/40 text-green-200":"bg-red-900/40 text-red-200"}`,children:[f.jsx("span",{children:"Profit Total Grup"}),f.jsx("span",{children:_t(w)})]})]})},qle=({bet:t})=>{const e=r=>{let n="";switch(r){case Br.WON:case Br.HALF_WON:n="bg-green-900/60 text-green-300";break;case Br.LOST:case Br.HALF_LOST:n="bg-red-900/60 text-red-300";break;case Br.VOID:n="bg-neutral-700 text-neutral-300";break;default:n="bg-yellow-900/60 text-yellow-300"}return f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${n}`,children:OB[r]})};return f.jsxs("div",{className:"grid grid-cols-[auto_1fr_repeat(4,auto)] items-center gap-x-4 gap-y-1 p-2 rounded bg-neutral-700/50 text-sm",children:[f.jsx("div",{className:"font-bold",children:f.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.betType===ya.VALUE?"bg-blue-900/60 text-blue-300":"bg-teal-900/60 text-teal-300"}`,children:t.betType})}),f.jsx("div",{className:"text-neutral-100 font-medium truncate",title:t.selection,children:t.selection}),f.jsxs("div",{className:"text-neutral-300 text-right whitespace-nowrap",children:[f.jsx("span",{className:"text-neutral-400 text-xs",children:"Miz:"})," ",_t(t.stake)]}),f.jsxs("div",{className:"text-neutral-300 text-right whitespace-nowrap",children:[f.jsx("span",{className:"text-neutral-400 text-xs",children:"Cot:"})," ",t.odds.toFixed(2)]}),f.jsx("div",{className:"w-28 text-center",children:e(t.status)}),f.jsx("div",{className:`w-24 text-right font-bold ${t.profit===void 0?"text-neutral-300":t.profit>=0?"text-green-400":"text-red-400"}`,children:t.profit!==void 0?_t(t.profit):"-"})]})},$le=({isOpen:t,onClose:e,user:r})=>{if(!r)return null;const n=r.profileData.badges||[];return f.jsx(SA,{isOpen:t,onClose:e,title:`${M.profile}: ${r.name}`,size:"xl",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx(Pt,{title:"Informaii Generale",icon:f.jsx(kp,{className:"h-6 w-6 text-primary-500 dark:text-primary-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("img",{src:r.avatar,alt:r.name,className:"h-20 w-20 rounded-full object-cover border-2 border-primary-300 dark:border-primary-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xl font-semibold text-neutral-800 dark:text-neutral-100",children:r.name}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:r.email})]})]}),f.jsxs("div",{className:"space-y-1 text-sm text-neutral-700 dark:text-neutral-300",children:[f.jsxs("p",{children:[f.jsx("strong",{className:"font-medium",children:"ID Utilizator:"})," ",f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:r.id})]}),f.jsxs("p",{children:[f.jsxs("strong",{className:"font-medium",children:[M.userRole,":"]})," ",f.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:r.role})]}),f.jsxs("p",{children:[f.jsx("strong",{className:"font-medium",children:"Status:"}),f.jsx("span",{className:`ml-1 px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full ${r.isActive?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"}`,children:r.isActive?M.userIsActive:M.userIsInactive})]}),f.jsxs("p",{children:[f.jsx("strong",{className:"font-medium",children:"Data nscrierii:"})," ",or(r.profileData.joinDate)]})]})]})}),(r.profileData.contactPhone||r.profileData.address)&&f.jsxs(Pt,{title:"Informaii Contact",icon:f.jsx(rQ,{className:"h-6 w-6 text-primary-500 dark:text-primary-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:[r.profileData.contactPhone&&f.jsxs("p",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[f.jsx("strong",{className:"font-medium",children:"Telefon:"})," ",r.profileData.contactPhone]}),r.profileData.address&&f.jsxs("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 mt-1",children:[f.jsx("strong",{className:"font-medium",children:"Adres:"})," ",r.profileData.address]})]}),r.profileData.cookieConsent&&f.jsxs(Pt,{title:"Consimmnt Cookie",icon:f.jsx(rl,{className:"h-6 w-6 text-primary-500 dark:text-primary-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:[f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2",children:["Consimmnt acordat la: ",or(r.profileData.cookieConsent.timestamp)]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[f.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-neutral-50 dark:bg-neutral-700/50 rounded",children:[r.profileData.cookieConsent.preferences?f.jsx(rl,{className:"h-5 w-5 text-green-500"}):f.jsx(Al,{className:"h-5 w-5 text-red-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Preferine"})]}),f.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-neutral-50 dark:bg-neutral-700/50 rounded",children:[r.profileData.cookieConsent.statistics?f.jsx(rl,{className:"h-5 w-5 text-green-500"}):f.jsx(Al,{className:"h-5 w-5 text-red-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Statistici"})]}),f.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-neutral-50 dark:bg-neutral-700/50 rounded",children:[r.profileData.cookieConsent.marketing?f.jsx(rl,{className:"h-5 w-5 text-green-500"}):f.jsx(Al,{className:"h-5 w-5 text-red-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Marketing"})]})]})]}),r.role===ar.USER&&f.jsxs(Pt,{title:"Sumar Financiar",icon:f.jsx($p,{className:"h-6 w-6 text-primary-500 dark:text-primary-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:M.investedAmount}),f.jsx("p",{className:"text-lg font-semibold text-primary-600 dark:text-primary-400",children:_t(r.profileData.investedAmount)})]}),f.jsxs("div",{className:"p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:M.totalProfit}),f.jsx("p",{className:"text-lg font-semibold text-green-500",children:_t(r.profileData.totalProfitEarned)})]}),f.jsxs("div",{className:"p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:M.totalBalance}),f.jsx("p",{className:"text-lg font-semibold text-purple-600 dark:text-purple-400",children:_t((r.profileData.investedAmount||0)+(r.profileData.totalProfitEarned||0))})]})]}),f.jsxs("div",{className:"mt-4 pt-3 border-t border-neutral-200 dark:border-neutral-600",children:[f.jsx("h4",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-1",children:M.currentCycleDetails}),f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:[M.grossProfit,": ",_t(r.profileData.currentGrossProfit)]}),f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:[M.platformFee,": ",_t(r.profileData.platformFeePaid)]}),f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:[M.netProfit,": ",_t(r.profileData.currentNetProfit)]})]})]}),r.role===ar.USER&&r.profileData.investmentHistory&&r.profileData.investmentHistory.length>0&&f.jsx(Pt,{title:"Istoric Investiii",icon:f.jsx(S0,{className:"h-6 w-6 text-primary-500 dark:text-primary-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:f.jsx("div",{className:"max-h-60 overflow-y-auto pr-1 space-y-2",children:r.profileData.investmentHistory.sort((i,a)=>new Date(a.date).getTime()-new Date(i.date).getTime()).map((i,a)=>f.jsxs("div",{className:"flex justify-between items-center p-2.5 rounded-md bg-neutral-50 dark:bg-neutral-700/50 shadow-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-100",children:i.type==="DEPOSIT"?"Depunere":i.type==="WITHDRAWAL"?"Retragere":i.type==="PROFIT_PAYOUT"?"Plat Profit":i.type==="FEE"?"Tax Platform":i.type}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:or(i.date)})]}),f.jsx("span",{className:`text-sm font-semibold ${i.amount>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:_t(i.amount)})]},a))})}),r.role===ar.USER&&f.jsx(Pt,{title:M.badgesSectionTitle,icon:f.jsx($1,{className:"h-6 w-6 text-yellow-500 dark:text-yellow-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:n.length>0?f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:n.sort((i,a)=>new Date(i.earnedAt).getTime()-new Date(a.earnedAt).getTime()).map(i=>{const a=p1[i.badgeType];if(!a)return null;const s=a.icon;return f.jsxs("div",{className:"flex flex-col items-center p-2 bg-neutral-50 dark:bg-neutral-700/50 rounded-md shadow-sm cursor-help",title:`${a.description}${i.details?` (${i.details})`:""}
Ctigat la: ${or(i.earnedAt)}`,children:[f.jsx(s,{className:"h-10 w-10 mb-1"})," ",f.jsx("p",{className:"text-xs font-medium text-center text-neutral-700 dark:text-neutral-200",children:a.name})]},i.badgeType)})}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-center py-3",children:M.noBadgesEarned})}),r.role===ar.ADMIN&&f.jsxs(Pt,{title:"Permisiuni Administrator",icon:f.jsx(h5,{className:"h-6 w-6 text-primary-500 dark:text-primary-400"}),className:"border border-neutral-200 dark:border-neutral-700",children:[r.isGlobalAdmin&&f.jsxs("p",{className:"flex items-center text-md font-semibold text-green-600 dark:text-green-400 mb-3 p-2 bg-green-50 dark:bg-green-900/30 rounded-md",children:[f.jsx(NB,{className:"h-5 w-5 mr-2"})," Administrator Global (toate permisiunile active)"]}),f.jsx("ul",{className:"space-y-1 text-sm text-neutral-700 dark:text-neutral-300",children:NU.map(i=>{var a,s;return f.jsxs("li",{className:"flex justify-between items-center p-1.5 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700/50",children:[f.jsx("span",{children:i.label}),f.jsx("span",{className:`font-semibold ${(a=r.adminPermissions)!=null&&a[i.key]||r.isGlobalAdmin?"text-green-500":"text-red-500"}`,children:(s=r.adminPermissions)!=null&&s[i.key]||r.isGlobalAdmin?M.permissionStateActive:M.permissionStateInactive})]},i.key)})})]})]})})},Jle=()=>{const{user:t}=dn(),{appData:e,loading:r,addUserInContext:n,updateUserInContext:i,addTransaction:a,exportData:s,linkReferral:o,sendBulkUserMessages:l}=An(),{addNotification:c}=gi(),[d,p]=X.useState([]),[g,m]=X.useState("ALL"),[w,v]=X.useState("ALL"),[b,_]=X.useState(""),[C,T]=X.useState(!1),[S,O]=X.useState(!1),[j,U]=X.useState(!1),[P,F]=X.useState(!1),[H,L]=X.useState(null),[k,G]=X.useState(!1),[q,ce]=X.useState(new Set),[Y,ie]=X.useState(""),[me,Te]=X.useState(""),[ue,ne]=X.useState(!1);X.useEffect(()=>{e!=null&&e.users&&p(e.users)},[e==null?void 0:e.users]);const I=X.useMemo(()=>d.filter(Ue=>!(g!=="ALL"&&Ue.role!==g||w!=="ALL"&&Ue.isActive!==(w==="ACTIVE")||b&&!Ue.name.toLowerCase().includes(b.toLowerCase())&&!Ue.email.toLowerCase().includes(b.toLowerCase()))).sort((Ue,at)=>Ue.name.localeCompare(at.name)),[d,g,w,b]),Q=X.useMemo(()=>I.filter(Ue=>Ue.role===ar.USER),[I]),z=Ue=>{ce(at=>{const Oe=new Set(at);return Oe.has(Ue)?Oe.delete(Ue):Oe.add(Ue),Oe})},W=()=>{q.size===Q.length?ce(new Set):ce(new Set(Q.map(Ue=>Ue.id)))},re=Ue=>{G(!0),L({id:"",name:"",email:"",role:Ue,avatar:GT,isActive:!0,profileData:{investedAmount:0,totalProfitEarned:0,joinDate:new Date().toISOString(),investmentHistory:[],badges:[]},adminPermissions:Ue===ar.ADMIN?{}:void 0}),T(!0)},Ae=Ue=>{G(!1),L(Ue),T(!0)},be=Ue=>{if(Ue.id===(t==null?void 0:t.id)){c(M.cannotDeleteSelf,Je.ERROR);return}if(Ue.isGlobalAdmin){c(M.cannotDeleteGlobalAdmin,Je.ERROR);return}L(Ue),O(!0)},Se=Ue=>{L(Ue),U(!0)},Ne=()=>{if(q.size===0){c("Selecteaz cel puin un utilizator pentru a trimite un mesaj.",Je.WARNING);return}F(!0)},qe=async()=>{if(!t||!Y.trim()||!me.trim()){c("Titlul i coninutul mesajului sunt obligatorii.",Je.WARNING);return}ne(!0);try{await l(Array.from(q),Y,me,t.id),ie(""),Te(""),ce(new Set),F(!1)}catch{c("Eroare la trimiterea mesajului.",Je.ERROR)}finally{ne(!1)}};return r||!e?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(f1,{className:"h-8 w-8 mr-3 text-primary-500"}),M.manageUsers]}),f.jsxs(Pt,{children:[f.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ct,{onClick:()=>re(ar.USER),variant:"primary",leftIcon:f.jsx(tQ,{className:"h-5 w-5"}),children:M.createNewUser}),f.jsx(ct,{onClick:()=>re(ar.ADMIN),variant:"secondary",leftIcon:f.jsx(h5,{className:"h-5 w-5"}),children:M.createNewAdmin}),f.jsx(ct,{onClick:Ne,variant:"outline",disabled:q.size===0,children:M.sendMessageToSelectedUsers.replace("{count}",String(q.size))})]}),f.jsx(Tr,{type:"search",placeholder:"Caut dup nume sau email...",value:b,onChange:Ue=>_(Ue.target.value),containerClassName:"mb-0 w-full md:w-auto"})]}),f.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[f.jsxs("select",{onChange:Ue=>m(Ue.target.value),className:"px-3 py-2 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 focus:ring-primary-500",children:[f.jsx("option",{value:"ALL",children:M.filterByRole}),f.jsx("option",{value:ar.ADMIN,children:M.roleAdmin}),f.jsx("option",{value:ar.USER,children:M.roleUser})]}),f.jsxs("select",{onChange:Ue=>v(Ue.target.value),className:"px-3 py-2 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 focus:ring-primary-500",children:[f.jsx("option",{value:"ALL",children:M.filterByStatus}),f.jsx("option",{value:"ACTIVE",children:M.statusActive}),f.jsx("option",{value:"INACTIVE",children:M.statusInactive})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700",children:[f.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"p-4",children:f.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-primary-600 rounded",onChange:W,checked:Q.length>0&&q.size===Q.length,disabled:Q.length===0,"aria-label":"Selecteaz toi investitorii"})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Utilizator"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Rol"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Status"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Consimmnt Cookie"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Aciuni"})]})}),f.jsx("tbody",{className:"bg-white dark:bg-neutral-800/50 divide-y divide-neutral-200 dark:divide-neutral-700",children:I.map(Ue=>f.jsxs("tr",{children:[f.jsx("td",{className:"p-4",children:Ue.role===ar.USER&&f.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-primary-600 rounded",checked:q.has(Ue.id),onChange:()=>z(Ue.id),"aria-label":`Selecteaz ${Ue.name}`})}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:Ue.avatar||GT,alt:Ue.name}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:Ue.name}),f.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:Ue.email})]})]})}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:Ue.role}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:f.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Ue.isActive?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"}`,children:Ue.isActive?M.userIsActive:M.userIsInactive})}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ue.profileData.cookieConsent?f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("span",{title:`Preferine: ${Ue.profileData.cookieConsent.preferences?"Acordat":"Refuzat"}`,children:Ue.profileData.cookieConsent.preferences?f.jsx(rl,{className:"h-5 w-5 text-green-500"}):f.jsx(Al,{className:"h-5 w-5 text-neutral-400"})}),f.jsx("span",{title:`Statistici: ${Ue.profileData.cookieConsent.statistics?"Acordat":"Refuzat"}`,children:Ue.profileData.cookieConsent.statistics?f.jsx(rl,{className:"h-5 w-5 text-green-500"}):f.jsx(Al,{className:"h-5 w-5 text-neutral-400"})}),f.jsx("span",{title:`Marketing: ${Ue.profileData.cookieConsent.marketing?"Acordat":"Refuzat"}`,children:Ue.profileData.cookieConsent.marketing?f.jsx(rl,{className:"h-5 w-5 text-green-500"}):f.jsx(Al,{className:"h-5 w-5 text-neutral-400"})})]}):f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 italic",children:"Nu a rspuns"})}),f.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:[f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>Se(Ue),children:f.jsx(FB,{className:"h-5 w-5"})}),f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>Ae(Ue),children:f.jsx(Jp,{className:"h-5 w-5"})}),f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>be(Ue),className:"text-red-500",children:f.jsx(ex,{className:"h-5 w-5"})})]})]},Ue.id))})]})})]})]}),f.jsx($le,{isOpen:j,onClose:()=>U(!1),user:H}),f.jsxs(SA,{isOpen:P,onClose:()=>F(!1),title:M.sendMessageModalTitle.replace("{count}",String(q.size)),children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx(Tr,{label:M.messageTitleLabel,value:Y,onChange:Ue=>ie(Ue.target.value),required:!0}),f.jsx(Pc,{label:M.messageContentLabel,value:me,onChange:Ue=>Te(Ue.target.value),required:!0,rows:5})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[f.jsx(ct,{variant:"ghost",onClick:()=>F(!1),children:"Anuleaz"}),f.jsx(ct,{variant:"primary",onClick:qe,isLoading:ue,disabled:ue,children:M.sendMessageButton})]})]})]})},tU=t=>t.toISOString().split("T")[0],gB=t=>t.toISOString().substring(0,16),Zle=t=>t<0?0:t,ece=t=>{const e=Zle(t),r=Math.floor(e/1e3),n=Math.floor(r/86400),i=Math.floor(r%86400/3600),a=Math.floor(r%3600/60),s=r%60;return n>0?`${n}z ${i}h ${a}m`:i>0?`${i}h ${a}m ${s}s`:a>0?`${a}m ${s}s`:`${s}s`},tce=()=>{var I;const{user:t}=dn(),{appData:e,loading:r,resolveDayAndDistribute:n,updateBet:i,deleteBetGroup:a}=An(),{addNotification:s}=gi(),o=fl(),[l,c]=X.useState(!1),[d,p]=X.useState(!1),[g,m]=X.useState(null),[w,v]=X.useState(tU(new Date)),[b,_]=X.useState(0),[C,T]=X.useState(new Set),[S,O]=X.useState(!1),[j,U]=X.useState(null),[P,F]=X.useState(""),H=(I=o.state)==null?void 0:I.preFilterStatus,[L,k]=X.useState(H||"ALL"),G=Q=>{m(Q),p(!0)},q=Q=>{var re;U(Q);const z=/Scor: (.*?)\./,W=(re=Q.notes)==null?void 0:re.match(z);F(W?W[1]:""),O(!0)},ce=async()=>{if(!j||!P.trim()){s("Scorul nu poate fi gol.",Je.ERROR);return}const Q=`Scor: ${P.trim()}.`,z=j.notes||"",W=/Scor: .*?\./;let re="";W.test(z)?re=z.replace(W,Q):re=`${Q} ${z}`.trim(),await i(j.id,{notes:re}),s("Scorul a fost salvat.",Je.SUCCESS),O(!1),U(null)},Y=X.useMemo(()=>{if(!(e!=null&&e.bets))return{};const Q={},z=[...e.bets].sort((re,Ae)=>new Date(Ae.eventTimestamp).getTime()-new Date(re.eventTimestamp).getTime());for(const re of z)if(!Q[re.groupId]){const Ae=z.find(be=>be.groupId===re.groupId&&be.betType===ya.VALUE);Ae&&(Q[re.groupId]={groupId:re.groupId,valueBet:Ae,middleBet:z.find(be=>be.groupId===re.groupId&&be.betType===ya.MIDDLE),sport:Ae.sport,league:Ae.league,event:Ae.event,eventTimestamp:Ae.eventTimestamp})}if(L==="ALL")return Q;const W={};for(const re in Q){const Ae=Q[re],be=Ae.valueBet.status===Br.PENDING||Ae.middleBet&&Ae.middleBet.status===Br.PENDING;(L==="PENDING"&&be||L==="RESOLVED"&&!be)&&(W[re]=Ae)}return W},[e==null?void 0:e.bets,L]);X.useEffect(()=>{const Q=new Set;Object.values(Y).forEach(z=>{const{valueBet:W,middleBet:re,groupId:Ae}=z;W.status!==Br.PENDING&&(re==null?void 0:re.status)!==Br.PENDING&&(W.profit??0)+((re==null?void 0:re.profit)??0)>0&&!C.has(Ae)&&Q.add(Ae)}),Q.size>0&&(_(z=>z+1),T(z=>new Set([...z,...Q])))},[Y,C]);const ie=X.useMemo(()=>{const Q=((e==null?void 0:e.bets)||[]).filter(be=>be.date===w),z=new Set;let W=0,re=0,Ae=0;for(const be of Q)z.add(be.groupId),be.status!==Br.PENDING?(re+=1,W+=be.profit??0):Ae+=1;return{totalProfit:W,resolvedCount:re,pendingCount:Ae,totalBets:Q.length,totalGroups:z.size,completion:Q.length>0?Math.min(100,Math.round(re/Q.length*100)):0}},[e==null?void 0:e.bets,w]),[me,Te]=X.useState(!1);X.useEffect(()=>{ie.totalProfit>0&&!me&&(Te(!0),_(Q=>Q+1)),ie.totalProfit<=0&&me&&Te(!1)},[ie.totalProfit,me]);const ue=X.useMemo(()=>{var Q;return((Q=e==null?void 0:e.bets)==null?void 0:Q.filter(z=>z.date===w&&z.status!==Br.PENDING&&!z.processedInDailyHistory).length)||0},[e==null?void 0:e.bets,w]),ne=async()=>{t&&await n(w,t.id)};return r||!t||!e?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})}):f.jsxs(f.Fragment,{children:[f.jsx(XM,{trigger:b}),f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsx("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100",children:M.dataManagement}),f.jsxs(Pt,{title:M.closeDayTitle,icon:f.jsx(S0,{className:"h-6 w-6"}),children:[f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-4",children:M.closeDayDescription}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-4",children:[f.jsx(Tr,{label:M.selectDateForClosure,type:"date",value:w,onChange:Q=>v(Q.target.value),max:tU(new Date),containerClassName:"flex-grow"}),f.jsx("div",{className:"flex-shrink-0",children:f.jsxs(ct,{onClick:ne,variant:"primary",disabled:ue===0,children:[M.closeDayAndDistribute," (",ue," pariuri)"]})})]})]}),f.jsxs("div",{className:`rounded-xl border shadow-sm p-4 transition-colors
            ${ie.totalProfit>=0?"bg-green-50 border-green-200 dark:bg-green-900/30 dark:border-green-800":"bg-red-50 border-red-200 dark:bg-red-900/30 dark:border-red-800"}`,children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:["Profit pentru ",f.jsx("b",{children:or(w,{day:"2-digit",month:"long",year:"numeric"})})," (pn acum)"]}),f.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[f.jsxs("span",{className:"text-xs rounded-full px-2 py-0.5 bg-neutral-200 text-neutral-800 dark:bg-neutral-900/40 dark:text-neutral-100",children:["Rezolvate: ",ie.resolvedCount]}),f.jsxs("span",{className:"text-xs rounded-full px-2 py-0.5 bg-neutral-200 text-neutral-800 dark:bg-neutral-900/40 dark:text-neutral-100",children:["n ateptare: ",ie.pendingCount]}),f.jsxs("span",{className:"text-xs rounded-full px-2 py-0.5 bg-neutral-200 text-neutral-800 dark:bg-neutral-900/40 dark:text-neutral-100",children:["Grupuri: ",ie.totalGroups]})]})]}),f.jsx("div",{className:"text-3xl font-extrabold",children:_t(ie.totalProfit)})]}),f.jsxs("div",{className:"mt-3",children:[f.jsx("div",{className:"h-2 rounded-full bg-neutral-200 dark:bg-neutral-700 overflow-hidden",children:f.jsx("div",{className:`h-2 ${ie.totalProfit>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${ie.completion}%`}})}),f.jsxs("div",{className:"text-[11px] mt-1 text-neutral-500 dark:text-neutral-400",children:["Progres rezolvare pariuri: ",ie.completion,"%"]})]})]}),f.jsxs(Pt,{title:M.betManagementTitle,children:[f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center mb-4",children:[f.jsx(ct,{onClick:()=>c(!0),variant:"secondary",leftIcon:f.jsx(tx,{className:"h-5 w-5"}),children:"Adaug Grup"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ct,{variant:L==="ALL"?"primary":"outline",size:"sm",onClick:()=>k("ALL"),children:"Toate"}),f.jsx(ct,{variant:L==="PENDING"?"primary":"outline",size:"sm",onClick:()=>k("PENDING"),children:"n Ateptare"}),f.jsx(ct,{variant:L==="RESOLVED"?"primary":"outline",size:"sm",onClick:()=>k("RESOLVED"),children:"Finalizate"})]})]}),f.jsx("div",{className:"space-y-4",children:Object.values(Y).length>0?Object.values(Y).map(Q=>f.jsx(rce,{group:Q,onEdit:G,onOpenScoreModal:q,onDelete:a},Q.groupId)):f.jsx("p",{className:"text-center py-6 text-neutral-500 dark:text-neutral-400",children:"Niciun pariu gsit pentru filtrul selectat."})})]}),f.jsx(nce,{isOpen:l,onClose:()=>c(!1)}),f.jsx(ice,{isOpen:d,onClose:()=>p(!1),bet:g}),f.jsxs(SA,{isOpen:S,onClose:()=>O(!1),title:"Introdu Scorul Final",children:[f.jsx(Tr,{label:`Scor pentru meciul: ${j==null?void 0:j.event}`,value:P,onChange:Q=>F(Q.target.value),placeholder:"ex: 2-1",autoFocus:!0}),f.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[f.jsx(ct,{variant:"ghost",onClick:()=>O(!1),children:"Anuleaz"}),f.jsx(ct,{variant:"primary",onClick:ce,children:"Salveaz Scorul"})]})]})]})]})},rce=({group:t,onEdit:e,onOpenScoreModal:r,onDelete:n})=>{var F,H,L;const{updateBet:i}=An(),[a,s]=X.useState(!1),[o,l]=X.useState(!1),[c,d]=X.useState(()=>Date.now());X.useEffect(()=>{const k=window.setInterval(()=>d(Date.now()),1e3);return()=>clearInterval(k)},[]);const{valueBet:p,middleBet:g}=t,m=async(k,G)=>{const q=t.valueBet.status!==Br.PENDING,ce=!t.middleBet||t.middleBet.status!==Br.PENDING,Y=q&&ce,ie=await i(k,{status:G});if(!ie)return;const me=ie.id===t.valueBet.id,Te=me?G!==Br.PENDING:t.valueBet.status!==Br.PENDING,ue=!t.middleBet||(me?t.middleBet.status!==Br.PENDING:G!==Br.PENDING);!Y&&Te&&ue&&r(ie)},w=p.status===Br.PENDING||g&&g.status===Br.PENDING,v=t.eventTimestamp?new Date(t.eventTimestamp).getTime():null,b=w&&v?c>=v:!1,_=v?ece(v-c):null,C=async()=>{await n(t.groupId),l(!1)},T=(p.profit??0)+((g==null?void 0:g.profit)??0),S=p.status!==Br.PENDING&&(g?g.status!==Br.PENDING:!0),O=/Scor: (.*?)\./,j=(F=t.valueBet.notes)==null?void 0:F.match(O),U=(L=(H=t.middleBet)==null?void 0:H.notes)==null?void 0:L.match(O),P=(j==null?void 0:j[1])||(U==null?void 0:U[1]);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-neutral-800/50 border border-neutral-700 rounded-lg p-4 shadow-lg transition-all hover:border-primary-600/50",children:[f.jsxs("div",{className:"flex justify-between items-start border-b border-dashed border-neutral-600 pb-3 mb-3 flex-wrap gap-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg text-neutral-100",children:t.event}),f.jsxs("div",{className:"flex items-center flex-wrap gap-x-3 gap-y-1 text-xs mt-1",children:[w?b?f.jsxs("span",{className:"flex items-center font-bold text-red-500 animate-pulse",children:[f.jsxs("span",{className:"relative flex h-2 w-2 mr-1.5",children:[f.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),f.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),"LIVE"]}):_&&f.jsxs("span",{className:"font-semibold text-amber-300 bg-amber-900/60 px-2 py-0.5 rounded-full",children:["ncepe n ",_]}):f.jsx("span",{className:"font-semibold text-green-300 bg-green-900/60 px-2 py-0.5 rounded-full",children:"Finalizat"}),P&&f.jsxs("span",{className:"font-bold text-amber-300 bg-amber-900/60 px-2 py-0.5 rounded-full",children:["Scor: ",P]}),f.jsx("span",{className:"text-neutral-400",children:or(t.eventTimestamp,{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})}),f.jsxs("span",{className:"text-neutral-400",children:[" ",t.sport,"  ",t.league]})]})]}),f.jsxs("button",{onClick:()=>s(!a),className:"text-primary-400 font-bold text-sm px-4 py-2 bg-primary-900/50 hover:bg-primary-800/50 rounded-md transition-colors flex items-center gap-2",children:[a?f.jsx(N0,{className:"h-4 w-4"}):f.jsx(T0,{className:"h-4 w-4"}),a?"Ascunde":"Detalii"]})]}),a&&f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[f.jsx(rU,{bet:p,type:"Value",onStatusChange:m,onEdit:e}),g&&f.jsx(rU,{bet:g,type:"Middle",onStatusChange:m,onEdit:e})]}),(g==null?void 0:g.middleDetails)&&f.jsxs("div",{children:[f.jsx("h5",{className:"text-xs font-semibold text-neutral-400 mb-2",children:"PROFITURI POTENIALE (MIDDLE)"}),f.jsxs("div",{className:"p-2 bg-neutral-900/50 rounded text-xs grid grid-cols-1 sm:grid-cols-3 gap-2 text-center",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-400 block",children:"Dac iese Value Bet"}),f.jsx("b",{className:`text-sm ${(g.middleDetails.p1??0)>=0?"text-green-400":"text-red-400"}`,children:_t(g.middleDetails.p1)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-400 block",children:"Dac iese Middle Bet"}),f.jsx("b",{className:`text-sm ${(g.middleDetails.p2??0)>=0?"text-green-400":"text-red-400"}`,children:_t(g.middleDetails.p2)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-400 block",children:"Dac ies ambele"}),f.jsx("b",{className:"text-sm text-green-400",children:_t(g.middleDetails.pb)})]})]})]}),f.jsxs("div",{className:"flex justify-end items-center gap-2 pt-2 border-t border-neutral-700/50",children:[f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>r(p),children:"Scor"}),f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"text-red-500/80 hover:text-red-500",children:f.jsx(ex,{className:"h-5 w-5"})})]})]}),S&&f.jsxs("div",{className:`mt-3 p-3 rounded-md flex justify-between items-center font-bold text-lg ${T>=0?"bg-green-900/40 text-green-200":"bg-red-900/40 text-red-200"}`,children:[f.jsx("span",{children:T>=0?"Profit Total Grup":"Pierdere Total Grup"}),f.jsx("span",{children:_t(T)})]})]}),f.jsx(wx,{isOpen:o,onClose:()=>l(!1),onConfirm:C,title:"Confirm tergere Grup",message:`Eti sigur c vrei s tergi ambele pariuri (Value i Middle) pentru meciul ${t.event}?`})]})},rU=({bet:t,type:e,onStatusChange:r,onEdit:n})=>f.jsxs("div",{className:"bg-neutral-700/50 p-3 rounded-md border border-neutral-600/50",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${e==="Value"?"bg-blue-900/60 text-blue-300":"bg-teal-900/60 text-teal-300"}`,children:e}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("select",{value:t.status,onChange:i=>r(t.id,i.target.value),className:"text-xs px-2 py-1 rounded bg-neutral-800 border border-neutral-600 focus:ring-primary-500 text-neutral-100",children:Object.values(Br).map(i=>f.jsx("option",{value:i,children:OB[i]},i))}),f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>n(t),className:"p-1 h-auto text-neutral-400 hover:text-white",children:f.jsx(Jp,{className:"h-4 w-4"})})]})]}),f.jsx("p",{className:"font-semibold text-neutral-100 text-base",children:t.selection}),f.jsxs("div",{className:"flex justify-between items-end mt-2",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs text-neutral-400",children:["Cot: ",f.jsx("span",{className:"font-mono text-sm text-neutral-200",children:t.odds.toFixed(2)})]}),f.jsxs("p",{className:"text-xs text-neutral-400",children:["Miz: ",f.jsx("span",{className:"font-mono text-sm text-neutral-200",children:_t(t.stake)})]})]}),t.profit!==void 0&&f.jsx("p",{className:`text-lg font-bold ${t.profit>=0?"text-green-400":"text-red-400"}`,children:_t(t.profit)})]})]}),nce=({isOpen:t,onClose:e})=>{var ut,yt,Dt,ze;const{appData:r,addValueMiddlePair:n,getPlatformSettingValue:i,addBet:a}=An(),{user:s}=dn(),{addNotification:o}=gi(),[l,c]=X.useState("value"),[d,p]=X.useState(gB(new Date)),[g,m]=X.useState(""),[w,v]=X.useState(""),[b,_]=X.useState(""),[C,T]=X.useState(""),[S,O]=X.useState(""),[j,U]=X.useState(""),[P,F]=X.useState(""),[H,L]=X.useState("fromMiddle"),[k,G]=X.useState(2.1),[q,ce]=X.useState(100),[Y,ie]=X.useState(10),[me,Te]=X.useState(0),[ue,ne]=X.useState(""),[I,Q]=X.useState(""),[z,W]=X.useState(""),[re,Ae]=X.useState(!1),[be,Se]=X.useState([]),[Ne,qe]=X.useState(null),Ue=X.useMemo(()=>{const We=parseFloat(I),ot=parseFloat(z);return!isNaN(We)&&!isNaN(ot)&&We>1&&ot>0?ot*(We-1):null},[I,z]),{valueOdds:at,valueStake:Oe,middleOdds:we,middleStake:zt,suggestion:J}=X.useMemo(()=>{if(H==="fromValue"){const We=cQ(k,q,Y,me);return{valueOdds:k,valueStake:q,middleOdds:We.feasible&&We.o2?parseFloat(We.o2.toFixed(3)):0,middleStake:We.feasible&&We.s2?parseFloat(We.s2.toFixed(2)):0,suggestion:We}}else{const We=uQ(k,q,Y,me);return{middleOdds:k,middleStake:q,valueOdds:We.feasible&&We.o1?parseFloat(We.o1.toFixed(3)):0,valueStake:We.feasible&&We.s1?parseFloat(We.s1.toFixed(2)):0,suggestion:We}}},[H,k,q,Y,me]),_e=X.useMemo(()=>{const We={stake:null,middle:null};if(!r||!J.feasible)return We;const ot=Oe+zt,dt=parseFloat(i(Mi.AI_WATCHDOG_STAKE_THRESHOLD_PERCENT,"5")),Rt=r.dailyHistory.length>0?[...r.dailyHistory].sort((Mt,ht)=>new Date(ht.date).getTime()-new Date(Mt.date).getTime())[0]:null,nt=Rt?Rt.totalBankValueEnd:r.globalStats.totalInvested;if(nt>0&&ot>0){const Mt=ot/nt*100;Mt>dt&&(We.stake=M.watchdogStakeWarning.replace("{totalStake}",_t(ot)).replace("{stakePercentage}",Mt.toFixed(1)).replace("{thresholdPercentage}",dt.toString()))}const Ct=parseFloat(i(Mi.AI_WATCHDOG_MIDDLE_PROFIT_THRESHOLD_PERCENT,"1"));if(J.pb!==void 0&&ot>0){const Mt=J.pb/ot*100;Mt<Ct&&(We.middle=M.watchdogMiddleWarning.replace("{middleProfit}",_t(J.pb)).replace("{middleProfitPercentage}",Mt.toFixed(2)))}return We},[r,J,Oe,zt,i]),xe=X.useCallback(()=>{p(gB(new Date)),m(""),v(""),_(""),T(""),O(""),U(""),F(""),L("fromMiddle"),G(2.1),ce(100),ie(10),Te(0),ne(""),Q(""),W(""),Se([]),qe(null),Ae(!1)},[]);X.useEffect(()=>{t&&xe()},[t,xe]);const De=async()=>{if(!(H==="fromValue"?j:P).trim()){o(`Introdu o selecie pentru ${H==="fromValue"?"Value Bet":"Middle Bet"} pentru a genera sugestii.`,Je.WARNING);return}{o(M.geminiApiKeyMissing,Je.ERROR);return}},Fe=async()=>{if(!s||!J.feasible){o("Setrile nu sunt fezabile sau datele sunt incomplete.",Je.ERROR);return}const We=new Date(d);if(isNaN(We.getTime())){o("Data i ora evenimentului sunt invalide.",Je.ERROR);return}const dt={date:We.toISOString().split("T")[0],eventTimestamp:d,sport:g,league:w,event:b,createdByAdminId:s.id,notes:S},Rt={...dt,market:C||j,selection:j,odds:at,stake:Oe},nt={...dt,market:C||P,selection:P,odds:we,stake:zt,middleDetails:{p1:J.p1,p2:J.p2,pb:J.pb}};await n(Rt,nt),setTimeout(()=>{xe(),e()},150)},tt=async()=>{if(!s){o("Utilizator neautentificat.",Je.ERROR);return}const We=parseFloat(I),ot=parseFloat(z);if(isNaN(We)||isNaN(ot)||We<=1||ot<=0){o("Cota i miza trebuie s fie numere valide i pozitive.",Je.ERROR);return}const dt=new Date(d);if(isNaN(dt.getTime())){o("Data i ora evenimentului sunt invalide.",Je.ERROR);return}const nt={date:dt.toISOString().split("T")[0],eventTimestamp:d,sport:g,league:w,event:b,market:C||ue,selection:ue,odds:We,stake:ot,createdByAdminId:s.id,notes:S};await a(nt),setTimeout(()=>{xe(),e()},150)};return f.jsxs(SA,{isOpen:t,onClose:e,title:"Adaug Grup de Pariuri",size:"xl",children:[f.jsxs("div",{className:"flex justify-center items-center gap-2 p-2 mb-4 bg-neutral-100 dark:bg-neutral-800 rounded-lg",children:[f.jsx(ct,{variant:l==="value"?"primary":"ghost",onClick:()=>c("value"),size:"sm",children:"Doar Value"}),f.jsx(ct,{variant:l==="valueAndMiddle"?"primary":"ghost",onClick:()=>c("valueAndMiddle"),size:"sm",children:"Value + Middle"})]}),f.jsxs("div",{className:"space-y-4 mb-4 pb-4 border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx(Tr,{label:"Data i Ora Eveniment",type:"datetime-local",value:d,onChange:We=>p(We.target.value),required:!0}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsx(sg,{label:"Sport",value:g,onChange:m,placeholder:"ex. Fotbal",suggestions:sQ}),f.jsx(sg,{label:"Lig/Campionat",value:w,onChange:v,placeholder:"ex. Premier League",suggestions:oQ}),f.jsx(Tr,{label:"Eveniment",value:b,onChange:We=>_(We.target.value),placeholder:"ex. Liverpool vs Man City"})]}),f.jsx(Tr,{label:"Pia (opional)",value:C,onChange:We=>T(We.target.value),placeholder:"ex. Total Goluri"}),f.jsx(Pc,{label:"Notie (opional)",value:S,onChange:We=>O(We.target.value),rows:2})]}),l==="value"&&f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsx("h2",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100",children:"Detalii Pariu Value"}),f.jsx(sg,{label:"Selecie",value:ue,onChange:ne,required:!0,suggestions:uy}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Tr,{label:"Cot",type:"number",step:"0.01",min:"1.01",value:I,onChange:We=>Q(We.target.value),required:!0}),f.jsx(Tr,{label:"Miz ()",type:"number",step:"1",min:"1",value:z,onChange:We=>W(We.target.value),required:!0})]}),f.jsxs("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/30 rounded-lg text-center",children:[f.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Profit Potenial"}),f.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Ue!==null?_t(Ue):""})]}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[f.jsx(ct,{variant:"ghost",type:"button",onClick:e,children:"Anuleaz"}),f.jsx(ct,{variant:"primary",type:"button",onClick:tt,children:"Salveaz Pariu"})]})]}),l==="valueAndMiddle"&&f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[f.jsx(sg,{label:"Selecie (Value Bet)",value:j,onChange:U,placeholder:"ex. Peste 2.5",suggestions:uy}),f.jsx(sg,{label:"Selecie (Middle)",value:P,onChange:F,placeholder:"ex. Sub 3.5",suggestions:uy})]}),f.jsx("div",{className:"text-right -mt-2",children:f.jsx(ct,{onClick:De,isLoading:re,disabled:re||!j.trim()&&!P.trim(),leftIcon:f.jsx(Qu,{className:"h-5 w-5"}),size:"sm",variant:"ghost",children:M.generateMiddleSuggestions})}),f.jsxs("div",{className:"pl-2",children:[re&&f.jsx(Cn,{size:"sm"}),Ne&&f.jsx("p",{className:"text-xs text-red-500",children:Ne}),be.length>0&&!re&&f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 self-center",children:"Sugestii:"}),be.map((We,ot)=>f.jsx(ct,{variant:"outline",size:"sm",onClick:()=>H==="fromValue"?F(We):U(We),children:We},ot))]})]}),f.jsx("div",{className:"pt-4 border-t border-neutral-200 dark:border-neutral-600",children:f.jsx(Fc,{id:"calcModeToggle",label:H==="fromMiddle"?"Optimizare pe baza Middle Bet":"Optimizare pe baza Value Bet",description:"Schimb care pariu este considerat principal pentru calculul optimizrilor.",checked:H==="fromMiddle",onChange:We=>L(We?"fromMiddle":"fromValue")})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Tr,{label:`Cota ${H==="fromMiddle"?"Middle (P2)":"Value (P1)"}`,type:"number",step:"0.01",min:"1.01",value:k,onChange:We=>G(parseFloat(We.target.value)||0)}),f.jsx(Tr,{label:`Miza ${H==="fromMiddle"?"Middle (P2)":"Value (P1)"} ()`,type:"number",step:"1",min:"1",value:q,onChange:We=>ce(parseFloat(We.target.value)||0)})]}),f.jsx("h3",{className:"text-md font-semibold pt-2 border-t border-neutral-300 dark:border-neutral-600",children:"Setri & Rezultate Calculator"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Tr,{label:"Profit minim dorit (% din miza principal)",type:"number",step:"0.1",min:"0",value:Y,onChange:We=>ie(parseFloat(We.target.value)||0)}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Buffer cot secundar"}),f.jsx("div",{className:"flex gap-2",children:[0,.03,.05,.1].map(We=>f.jsxs(ct,{variant:me===We?"primary":"outline",size:"sm",onClick:()=>Te(We),children:["+",We.toFixed(2)]},We))})]})]}),f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg space-y-2",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[f.jsxs("p",{children:["Fezabil: ",f.jsx("b",{className:J.feasible?"text-green-500":"text-red-500",children:J.feasible?"DA":"NU"})]}),H==="fromValue"&&f.jsxs("p",{children:["Cota min. P2: ",f.jsx("b",{children:((ut=J.o2min)==null?void 0:ut.toFixed(3))||""})]}),H==="fromMiddle"&&f.jsxs("p",{children:["Cota min. P1: ",f.jsx("b",{children:((yt=J.o1min)==null?void 0:yt.toFixed(3))||""})]}),f.jsxs("p",{children:["Cota rec. secundar: ",f.jsx("b",{children:H==="fromValue"?(Dt=J.o2)==null?void 0:Dt.toFixed(3):((ze=J.o1)==null?void 0:ze.toFixed(3))||""})]}),f.jsxs("p",{children:["Miza rec. secundar: ",f.jsx("b",{children:_t(H==="fromValue"?J.s2:J.s1)})]})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-xs pt-2 border-t border-neutral-300 dark:border-neutral-600",children:[f.jsxs("p",{children:["Profit P1: ",f.jsx("b",{className:(J.p1??0)>=0?"text-green-500":"text-red-500",children:_t(J.p1)})]}),f.jsxs("p",{children:["Profit P2: ",f.jsx("b",{className:(J.p2??0)>=0?"text-green-500":"text-red-500",children:_t(J.p2)})]}),f.jsxs("p",{children:["Profit Middle: ",f.jsx("b",{className:"text-green-500",children:_t(J.pb)})]})]})]}),(_e.stake||_e.middle)&&f.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg space-y-2",children:[f.jsxs("h4",{className:"flex items-center text-sm font-semibold text-yellow-800 dark:text-yellow-200",children:[f.jsx(h1,{className:"h-5 w-5 mr-2"}),"AI Watchdog - Avertizri de Risc"]}),_e.stake&&f.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:_e.stake}),_e.middle&&f.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:_e.middle})]}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[f.jsx(ct,{variant:"ghost",type:"button",onClick:e,children:"Anuleaz"}),f.jsx(ct,{variant:"primary",type:"button",onClick:Fe,disabled:!J.feasible,children:"Salveaz Grup"})]})]})]})},ice=({isOpen:t,onClose:e,bet:r})=>{const{appData:n,updateBet:i}=An(),{addNotification:a}=gi(),[s,o]=X.useState({date:"",eventTimestamp:"",sport:"",league:"",event:"",selection:"",market:"",odds:"",stake:"",notes:""});X.useEffect(()=>{r&&o({date:r.date,eventTimestamp:r.eventTimestamp?gB(new Date(r.eventTimestamp)):"",sport:r.sport,league:r.league,event:r.event,selection:r.selection,market:r.market,odds:String(r.odds),stake:String(r.stake),notes:r.notes||""})},[r]);const l=d=>{const{name:p,value:g}=d.target;o(m=>({...m,[p]:g}))},c=async()=>{var b,_;if(!r)return;const d=parseFloat(s.odds),p=parseFloat(s.stake);if(isNaN(d)||isNaN(p)||d<=1||p<=0){a("Cota i miza trebuie s fie numere valide i pozitive.",Je.ERROR);return}const g=new Date(s.eventTimestamp);if(isNaN(g.getTime())){a("Data i ora evenimentului sunt invalide.",Je.ERROR);return}const m={date:g.toISOString().split("T")[0],eventTimestamp:s.eventTimestamp,sport:s.sport,league:s.league,event:s.event,selection:s.selection,market:s.market,odds:d,stake:p,notes:s.notes},w=(b=n==null?void 0:n.bets)==null?void 0:b.find(C=>C.groupId===r.groupId&&C.betType===ya.VALUE),v=(_=n==null?void 0:n.bets)==null?void 0:_.find(C=>C.groupId===r.groupId&&C.betType===ya.MIDDLE);if(r.betType===ya.MIDDLE&&w)m.middleDetails=dw(w.odds,w.stake,d,p),await i(r.id,m);else if(r.betType===ya.VALUE&&v){await i(r.id,m);const C=dw(d,p,v.odds,v.stake);await i(v.id,{middleDetails:C})}else await i(r.id,m);e()};return f.jsx(SA,{isOpen:t,onClose:e,title:`Modific Pariu: ${(r==null?void 0:r.selection)||""}`,size:"lg",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Tr,{label:"Data i Ora Eveniment",type:"datetime-local",name:"eventTimestamp",value:s.eventTimestamp,onChange:l,required:!0}),f.jsx(Tr,{label:"Sport",name:"sport",value:s.sport,onChange:l}),f.jsx(Tr,{label:"Lig",name:"league",value:s.league,onChange:l}),f.jsx(Tr,{label:"Eveniment",name:"event",value:s.event,onChange:l}),f.jsx(Tr,{label:"Pia",name:"market",value:s.market,onChange:l}),f.jsx(Tr,{label:"Selecie",name:"selection",value:s.selection,onChange:l}),f.jsx(Tr,{label:"Cot",name:"odds",type:"number",step:"0.01",value:s.odds,onChange:l}),f.jsx(Tr,{label:"Miz ()",name:"stake",type:"number",step:"1",value:s.stake,onChange:l})]}),f.jsx(Pc,{label:"Notie",name:"notes",value:s.notes,onChange:l}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[f.jsx(ct,{variant:"ghost",type:"button",onClick:e,children:"Anuleaz"}),f.jsx(ct,{variant:"primary",type:"button",onClick:c,children:"Salveaz Modificrile"})]})]})})},sg=({label:t,value:e,onChange:r,placeholder:n,suggestions:i,required:a})=>{const[s,o]=X.useState(!1),l=X.useRef(null),c=X.useMemo(()=>e?i.filter(p=>p.toLowerCase().includes(e.toLowerCase())):i,[e,i]);X.useEffect(()=>{const p=g=>{l.current&&!l.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=p=>{r(p),o(!1)};return f.jsxs("div",{className:"relative",ref:l,children:[f.jsx(Tr,{label:t,value:e,onChange:p=>r(p.target.value),onFocus:()=>o(!0),placeholder:n,required:a,autoComplete:"off"}),s&&c.length>0&&f.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:c.map((p,g)=>f.jsx("li",{onClick:()=>d(p),className:"px-4 py-2 text-sm text-neutral-800 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-600 cursor-pointer",children:p},g))})]})},ace=()=>{const{user:t}=dn(),{appData:e,loading:r,updateAppData:n,addTransaction:i,updateUserInContext:a,exportData:s,checkAndAwardBadges:o,completeReferral:l}=An(),{addNotification:c}=gi(),[d,p]=X.useState(null),g=async(b,_)=>{if(!e||!e.users||!e.transactions||!e.globalStats||!t){c("Datele necesare nu sunt ncrcate.",Je.ERROR);return}p(b.id);try{await new Promise(G=>setTimeout(G,1e3));const C=e.transactions.map(G=>G.id===b.id?{...G,status:_,adminId:t.id}:G);let T=[...e.users];const S=T.findIndex(G=>G.id===b.userId);let O="Utilizator necunoscut",j=T,U={...e.globalStats},P;if(S!==-1){const G={...T[S]};if(O=G.name,_===fr.APPROVED&&b.amount){let q=G.profileData.investedAmount;const ce=b.type===At.INVESTMENT_REQUEST?"DEPOSIT":"WITHDRAWAL",Y=b.type===At.INVESTMENT_REQUEST?b.amount:-b.amount,ie={date:new Date().toISOString(),amount:Y,type:ce};b.type===At.INVESTMENT_REQUEST?q+=b.amount:b.type===At.WITHDRAWAL_REQUEST&&(q-=b.amount,q<0&&(q=0)),P={...G,profileData:{...G.profileData,investedAmount:q,investmentHistory:[...G.profileData.investmentHistory,ie]}},T[S]=P,j=T}}const F=j.filter(G=>G.role===ar.USER).reduce((G,q)=>G+(q.profileData.investedAmount||0),0),H=j.filter(G=>G.role===ar.USER&&G.isActive&&(G.profileData.investedAmount||0)>0).length,L=RB(H);U={...e.globalStats,totalInvested:F,activeInvestors:H,platformFeeRate:L},n({transactions:C,users:j,globalStats:U}),await s("users",j),await s("globalStats",U),await s("transactions",C);const k=_===fr.APPROVED?b.type===At.INVESTMENT_REQUEST?At.INVESTMENT_APPROVAL:At.WITHDRAWAL_APPROVAL:b.type===At.INVESTMENT_REQUEST?At.INVESTMENT_REJECTION:At.WITHDRAWAL_REJECTION;i({adminId:t.id,userId:b.userId,type:k,status:fr.COMPLETED,description:`Cererea de ${b.type===At.INVESTMENT_REQUEST?"investiie":"retragere"} (${_t(b.amount)}) pentru ${O} a fost ${_===fr.APPROVED?"aprobat":"respins"} de ${t.name}.`,amount:b.amount,details:{originalRequestId:b.id}}),_===fr.APPROVED&&b.type===At.INVESTMENT_REQUEST&&P&&b.amount&&(await o(P.id,"INVESTMENT_APPROVAL",b.amount),e.transactions.filter(q=>q.userId===b.userId&&q.type===At.INVESTMENT_APPROVAL&&q.status===fr.COMPLETED).length===0&&await l(b.userId)),c(_===fr.APPROVED?M.requestApproved:M.requestRejected,Je.SUCCESS)}catch(C){c(`Eroare la procesarea cererii: ${C.message}`,Je.ERROR)}finally{p(null)}};if(r||!e)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const m=e.transactions.filter(b=>b.type===At.INVESTMENT_REQUEST&&b.status===fr.PENDING),w=e.transactions.filter(b=>b.type===At.WITHDRAWAL_REQUEST&&b.status===fr.PENDING),v=(b,_)=>f.jsx(Pt,{title:_,icon:f.jsx(ed,{className:"h-6 w-6"}),children:b.length>0?f.jsx("ul",{className:"space-y-4",children:b.map(C=>{const T=e.users.find(S=>S.id===C.userId);return f.jsx("li",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-neutral-700/60 shadow-md hover:shadow-lg transition-shadow",children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100",children:[(T==null?void 0:T.name)||"Utilizator necunoscut"," (",T==null?void 0:T.email,")"]}),f.jsx("p",{className:"text-md text-primary-600 dark:text-primary-400 font-semibold",children:_t(C.amount)}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Data cererii: ",or(C.timestamp)]}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["ID Cerere: ",C.id]})]}),f.jsxs("div",{className:"mt-3 sm:mt-0 flex space-x-2 flex-shrink-0",children:[f.jsx(ct,{onClick:()=>g(C,fr.APPROVED),variant:"primary",size:"sm",isLoading:d===C.id,disabled:d===C.id,leftIcon:f.jsx(rl,{className:"h-5 w-5"}),children:M.approve}),f.jsx(ct,{onClick:()=>g(C,fr.REJECTED),variant:"danger",size:"sm",isLoading:d===C.id,disabled:d===C.id,leftIcon:f.jsx(Al,{className:"h-5 w-5"}),children:M.reject})]})]})},C.id)})}):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-center py-4",children:M.noDataAvailable})});return f.jsxs("div",{className:"space-y-8 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(ed,{className:"h-8 w-8 mr-3 text-primary-500"}),M.pendingRequests]}),v(m,M.pendingInvestmentRequests),v(w,M.pendingWithdrawalRequests)]})},sce=({details:t,initialValues:e,deletedValues:r})=>t&&t.length>0?f.jsxs("div",{className:"mt-2 p-3 bg-neutral-100 dark:bg-neutral-700/70 rounded-md shadow-inner text-xs",children:[f.jsx("h4",{className:"font-semibold text-neutral-700 dark:text-neutral-200 mb-1.5",children:"Detalii Modificri:"}),f.jsx("ul",{className:"list-disc list-inside space-y-1 pl-3",children:t.map((n,i)=>f.jsxs("li",{className:"text-neutral-600 dark:text-neutral-300 leading-relaxed",children:[f.jsxs("span",{className:"font-medium",children:[n.fieldName,":"]}),f.jsx("em",{className:"text-neutral-500 dark:text-neutral-400 mx-1 break-all",children:String(n.oldValue)}),f.jsx("span",{className:"font-bold text-primary-600 dark:text-primary-400 mx-1",children:""}),f.jsx("strong",{className:"text-neutral-700 dark:text-neutral-200 break-all",children:String(n.newValue)})]},i))})]}):e&&Object.keys(e).length>0?f.jsxs("div",{className:"mt-2 p-3 bg-neutral-100 dark:bg-neutral-700/70 rounded-md shadow-inner text-xs",children:[f.jsx("h4",{className:"font-semibold text-neutral-700 dark:text-neutral-200 mb-1.5",children:"Valori Iniiale:"}),f.jsx("ul",{className:"list-disc list-inside space-y-1 pl-3",children:Object.entries(e).map(([n,i])=>f.jsxs("li",{className:"text-neutral-600 dark:text-neutral-300 leading-relaxed",children:[f.jsxs("span",{className:"font-medium",children:[n,":"]})," ",f.jsx("span",{className:"break-all",children:String(i)})]},n))})]}):r&&Object.keys(r).length>0?f.jsxs("div",{className:"mt-2 p-3 bg-neutral-100 dark:bg-neutral-700/70 rounded-md shadow-inner text-xs",children:[f.jsx("h4",{className:"font-semibold text-neutral-700 dark:text-neutral-200 mb-1.5",children:"Valori terse:"}),f.jsx("ul",{className:"list-disc list-inside space-y-1 pl-3",children:Object.entries(r).map(([n,i])=>f.jsxs("li",{className:"text-neutral-600 dark:text-neutral-300 leading-relaxed",children:[f.jsxs("span",{className:"font-medium",children:[n,":"]})," ",f.jsx("span",{className:"break-all",children:String(i)})]},n))})]}):f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1 italic",children:"Nicio modificare specific sau valoare detaliat nregistrat."}),oce=()=>{const{appData:t,loading:e}=An(),[r,n]=X.useState(null),[i,a]=X.useState({startDate:null,endDate:null}),[s,o]=X.useState([]),[l,c]=X.useState("ALL"),[d,p]=X.useState(!1),g=X.useMemo(()=>Object.values(At),[]),m=X.useMemo(()=>(t==null?void 0:t.users.filter(_=>_.role===ar.ADMIN))||[],[t==null?void 0:t.users]),w=X.useMemo(()=>{if(!(t!=null&&t.transactions))return[];let _=[...t.transactions];return i.startDate&&(_=_.filter(C=>new Date(C.timestamp).toISOString().split("T")[0]>=i.startDate)),i.endDate&&(_=_.filter(C=>new Date(C.timestamp).toISOString().split("T")[0]<=i.endDate)),s.length>0&&(_=_.filter(C=>s.includes(C.type))),l!=="ALL"&&(_=_.filter(C=>C.adminId===l)),_.sort((C,T)=>new Date(T.timestamp).getTime()-new Date(C.timestamp).getTime())},[t==null?void 0:t.transactions,i,s,l]),v=_=>{n(r===_?null:_)},b=_=>{o(C=>C.includes(_)?C.filter(T=>T!==_):[...C,_])};return e||!t?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})}):f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(ju,{className:"h-8 w-8 mr-3 text-primary-500"}),M.systemLog]}),f.jsx(ct,{variant:"outline",onClick:()=>p(!d),leftIcon:f.jsx(SB,{className:"h-5 w-5"}),children:d?"Ascunde Filtre":"Afieaz Filtre"})]}),d&&f.jsxs(Pt,{title:"Filtre Avansate",className:"animate-fade-in",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-md font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:"Interval de Date"}),f.jsx(fd,{onRangeChange:a,initialRangeType:"all"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"adminFilter",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Filtreaz dup Admin"}),f.jsxs("select",{id:"adminFilter",value:l,onChange:_=>c(_.target.value),className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:"ALL",children:"Toi Adminii"}),m.map(_=>f.jsxs("option",{value:_.id,children:[_.name," (",_.email,")"]},_.id))]})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"text-md font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:"Tipul Aciunii"}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 max-h-60 overflow-y-auto p-2 border rounded-md dark:border-neutral-700",children:g.map(_=>f.jsxs("label",{className:"flex items-center space-x-2 p-1.5 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700/50 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:s.includes(_),onChange:()=>b(_),className:"form-checkbox h-4 w-4 text-primary-600 rounded border-neutral-300 dark:border-neutral-600 bg-neutral-100 dark:bg-neutral-900 focus:ring-primary-500 dark:focus:ring-primary-400 dark:ring-offset-neutral-800"}),f.jsx("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:hA[_]||_})]},_))}),f.jsxs("div",{className:"mt-3 flex space-x-2",children:[f.jsx(ct,{size:"sm",variant:"outline",onClick:()=>o([...g]),children:M.selectAllTransactionTypes}),f.jsx(ct,{size:"sm",variant:"outline",onClick:()=>o([]),children:M.deselectAllTransactionTypes})]})]})]}),f.jsx(Pt,{children:w.length>0?f.jsx("div",{className:"overflow-x-auto max-h-[75vh]",children:f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700",children:[f.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800 sticky top-0 z-10",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase w-10"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Data"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Tip"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Descriere"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Utilizator"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Admin"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Status"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Detalii Scurte"})]})}),f.jsx("tbody",{className:"bg-white dark:bg-neutral-800/50 divide-y divide-neutral-200 dark:divide-neutral-700",children:w.map(_=>{var U,P,F,H;const C=_.userId?t.users.find(L=>L.id===_.userId):null,T=_.adminId?t.users.find(L=>L.id===_.adminId):null,S=_.details&&(Array.isArray(_.details.changedFields)&&_.details.changedFields.length>0||_.details.initialValues&&Object.keys(_.details.initialValues).length>0||_.details.deletedValues&&Object.keys(_.details.deletedValues).length>0),O=r===_.id;let j="-";return(P=(U=_.details)==null?void 0:U.changedFields)!=null&&P.length?j=`${_.details.changedFields.length} cmp(uri) modificate.`:(F=_.details)!=null&&F.initialValues?j="Valori iniiale nregistrate.":(H=_.details)!=null&&H.deletedValues?j="Valori terse nregistrate.":_.details&&(j=Object.keys(_.details).slice(0,2).map(L=>`${L}: ${String(_.details[L]).substring(0,15)}...`).join(", ")),f.jsxs(Nr.Fragment,{children:[f.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30 transition-colors",children:[f.jsx("td",{className:"px-2 py-3 whitespace-nowrap",children:S&&f.jsxs("button",{onClick:()=>v(_.id),className:"p-1 text-neutral-500 hover:text-primary-500 dark:hover:text-primary-400","aria-expanded":O,"aria-controls":`details-${_.id}`,children:[O?f.jsx(N0,{className:"h-4 w-4"}):f.jsx(T0,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Extinde detalii"})]})}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:or(_.timestamp)}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:hA[_.type]||_.type}),f.jsx("td",{className:"px-4 py-3 text-sm text-neutral-800 dark:text-neutral-100 max-w-sm break-words",children:_.description}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:C?`${C.name}`:"-"}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:T?`${T.name}`:"-"}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:f.jsx("span",{className:`px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${_.status==="PENDING"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":_.status==="COMPLETED"||_.status==="APPROVED"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":_.status==="REJECTED"||_.status==="FAILED"?"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100":"bg-neutral-100 text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100"}`,children:_.status})}),f.jsx("td",{className:"px-4 py-3 text-xs text-neutral-500 dark:text-neutral-400 max-w-xs truncate",title:typeof _.details=="string"?_.details:JSON.stringify(_.details),children:j})]}),O&&S&&_.details&&f.jsx("tr",{children:f.jsx("td",{colSpan:8,className:"p-0",children:f.jsx(sce,{details:_.details.changedFields,initialValues:_.details.initialValues,deletedValues:_.details.deletedValues})})})]},_.id)})})]})}):f.jsxs("p",{className:"text-center py-10 text-neutral-500 dark:text-neutral-400",children:[M.noDataAvailable," (pentru filtrele selectate)."]})})]})},Ace=()=>{var H;const{user:t}=dn(),{appData:e,loading:r,addAnnouncement:n,updateAnnouncement:i,deleteAnnouncement:a,addTransaction:s}=An(),{addNotification:o}=gi(),[l,c]=X.useState(!1),[d,p]=X.useState(null),[g,m]=X.useState({title:"",content:"",importance:uA.MEDIUM}),[w,v]=X.useState(!1),[b,_]=X.useState(null),C=(t==null?void 0:t.isGlobalAdmin)||((H=t==null?void 0:t.adminPermissions)==null?void 0:H[zr.CAN_MANAGE_ANNOUNCEMENTS]);X.useEffect(()=>{m(d?{title:d.title,content:d.content,importance:d.importance}:{title:"",content:"",importance:uA.MEDIUM})},[d,l]);const T=L=>{const{name:k,value:G}=L.target;m(q=>({...q,[k]:G}))},S=()=>{if(!C){o(M.accessDenied,Je.ERROR);return}p(null),c(!0)},O=L=>{if(!C){o(M.accessDenied,Je.ERROR);return}p(L),c(!0)},j=L=>{if(!C){o(M.accessDenied,Je.ERROR);return}_(L),v(!0)},U=()=>{if(b&&C&&t)try{a(b.id),o(M.announcementDeletedSuccessfully,Je.SUCCESS)}catch{o(M.failedToDeleteAnnouncement,Je.ERROR)}v(!1),_(null)},P=L=>{if(L.preventDefault(),!(!C||!t)){if(!g.title.trim()||!g.content.trim()){o("Titlul i coninutul sunt obligatorii.",Je.ERROR);return}try{if(d){const k={...d,title:g.title,content:g.content,importance:g.importance};i(d,k),o(M.announcementUpdatedSuccessfully,Je.SUCCESS)}else n({...g,createdBy:t.id})?o(M.announcementCreatedSuccessfully,Je.SUCCESS):o(M.failedToCreateAnnouncement,Je.ERROR);c(!1)}catch{o(d?M.failedToUpdateAnnouncement:M.failedToCreateAnnouncement,Je.ERROR)}}};if(r||!e)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});if(!C)return f.jsx(Pt,{title:M.accessDenied,className:"text-center",children:f.jsxs("p",{children:[M.accessDenied,". Nu avei permisiunea de a gestiona anunurile."]})});const F=[...e.announcements||[]].sort((L,k)=>new Date(k.createdAt).getTime()-new Date(L.createdAt).getTime());return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(DB,{className:"h-8 w-8 mr-3 text-primary-500"}),M.manageAnnouncements]}),f.jsx(ct,{onClick:S,variant:"primary",leftIcon:f.jsx(tx,{className:"h-5 w-5"}),children:M.createNewAnnouncement}),f.jsx(Pt,{children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700",children:[f.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Titlu"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Importan"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Creat La"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:"Aciuni"})]})}),f.jsx("tbody",{className:"bg-white dark:bg-neutral-800/50 divide-y divide-neutral-200 dark:divide-neutral-700",children:F.map(L=>f.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30 transition-colors",children:[f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-neutral-900 dark:text-neutral-100",children:L.title}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:f.jsx("span",{className:`px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${L.importance===uA.HIGH?"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100":L.importance===uA.MEDIUM?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100"}`,children:L.importance})}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:or(L.createdAt)}),f.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium space-x-1",children:[f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>O(L),"aria-label":`Modific ${L.title}`,children:f.jsx(Jp,{className:"h-5 w-5"})}),f.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>j(L),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400","aria-label":`terge ${L.title}`,children:f.jsx(ex,{className:"h-5 w-5"})})]})]},L.id))})]}),F.length===0&&f.jsx("p",{className:"text-center py-4 text-neutral-500 dark:text-neutral-400",children:M.noAnnouncements})]})}),l&&f.jsx(SA,{isOpen:l,onClose:()=>c(!1),title:d?"Modific Anun":M.createNewAnnouncement,size:"lg",children:f.jsxs("form",{onSubmit:P,className:"space-y-4",children:[f.jsx(Tr,{label:M.announcementTitle,name:"title",value:g.title,onChange:T,required:!0}),f.jsx(Pc,{label:M.announcementContent,name:"content",value:g.content,onChange:T,rows:5,required:!0}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"importance",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.announcementImportance}),f.jsxs("select",{id:"importance",name:"importance",value:g.importance,onChange:T,className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:uA.LOW,children:M.importanceLow}),f.jsx("option",{value:uA.MEDIUM,children:M.importanceMedium}),f.jsx("option",{value:uA.HIGH,children:M.importanceHigh})]})]}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[f.jsx(ct,{variant:"ghost",type:"button",onClick:()=>c(!1),children:M.cancel}),f.jsx(ct,{variant:"primary",type:"submit",children:d?M.save:M.createNewAnnouncement})]})]})}),w&&b&&f.jsx(wx,{isOpen:w,onClose:()=>v(!1),onConfirm:U,title:M.confirmAnnouncementDeletionTitle,message:`${M.confirmAnnouncementDeletionMessage} "${b.title}"`,confirmText:M.delete})]})},lce=()=>{var T;const{user:t}=dn(),{appData:e,loading:r,updateFeedbackStatus:n}=An(),[i,a]=X.useState("ALL"),[s,o]=X.useState("ALL"),[l,c]=X.useState(!1),[d,p]=X.useState(null),g=S=>{p(S),c(!0)};if(r||!e||!t)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});if(!(t.isGlobalAdmin||((T=t.adminPermissions)==null?void 0:T[zr.CAN_VIEW_FEEDBACK])))return f.jsx(Pt,{title:M.accessDenied,className:"text-center",children:f.jsxs("p",{children:[M.accessDenied," Nu avei permisiunea de a vizualiza feedback-ul."]})});const w=X.useMemo(()=>{if(!(e!=null&&e.feedback))return[];let S=[...e.feedback];return i!=="ALL"&&(S=S.filter(O=>O.category===i)),s!=="ALL"&&(S=S.filter(O=>O.status===s)),S.sort((O,j)=>new Date(j.timestamp).getTime()-new Date(O.timestamp).getTime())},[e==null?void 0:e.feedback,i,s]),v=(S,O)=>{t&&n&&(n(S,O,t.id),c(!1))},b=S=>{switch(S){case Fs.NEW:return"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100";case Fs.IN_PROGRESS:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100";case Fs.RESOLVED:return"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100";default:return"bg-neutral-100 text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100"}},_=S=>{switch(S){case $A.BUG_REPORT:return M.feedbackCategoryBugReport;case $A.SUGGESTION:return M.feedbackCategorySuggestion;case $A.GENERAL_FEEDBACK:return M.feedbackCategoryGeneral;default:return S}},C=S=>{switch(S){case Fs.NEW:return M.feedbackStatusNew;case Fs.IN_PROGRESS:return M.feedbackStatusInProgress;case Fs.RESOLVED:return M.feedbackStatusResolved;default:return S}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(Z1,{className:"h-8 w-8 mr-3 text-primary-500"}),M.adminViewFeedbackTitle]}),f.jsxs(Pt,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"categoryFilter",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.adminFeedbackFilterByCategory}),f.jsxs("select",{id:"categoryFilter",value:i,onChange:S=>a(S.target.value),className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:"ALL",children:M.allCategories}),f.jsx("option",{value:$A.BUG_REPORT,children:M.feedbackCategoryBugReport}),f.jsx("option",{value:$A.SUGGESTION,children:M.feedbackCategorySuggestion}),f.jsx("option",{value:$A.GENERAL_FEEDBACK,children:M.feedbackCategoryGeneral})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.adminFeedbackFilterByStatus}),f.jsxs("select",{id:"statusFilter",value:s,onChange:S=>o(S.target.value),className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:"ALL",children:M.allStatuses}),f.jsx("option",{value:Fs.NEW,children:M.feedbackStatusNew}),f.jsx("option",{value:Fs.IN_PROGRESS,children:M.feedbackStatusInProgress}),f.jsx("option",{value:Fs.RESOLVED,children:M.feedbackStatusResolved})]})]})]}),w.length>0?f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700",children:[f.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.adminFeedbackTableDate}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.adminFeedbackTableUser}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.adminFeedbackTableCategory}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.adminFeedbackTableSubject}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.adminFeedbackTableDescription}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase",children:M.adminFeedbackTableStatus})]})}),f.jsx("tbody",{className:"bg-white dark:bg-neutral-800/50 divide-y divide-neutral-200 dark:divide-neutral-700",children:w.map(S=>f.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30 transition-colors cursor-pointer",onClick:()=>g(S),"aria-label":`Vezi detalii pentru feedback: ${S.subject}`,tabIndex:0,children:[f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:or(S.timestamp)}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-neutral-900 dark:text-neutral-100",title:S.userEmail,children:S.userName}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-600 dark:text-neutral-300",children:_(S.category)}),f.jsx("td",{className:"px-4 py-3 text-sm text-neutral-800 dark:text-neutral-100 max-w-xs truncate",title:S.subject,children:S.subject}),f.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600 dark:text-neutral-300 max-w-sm truncate",title:S.description,children:S.description}),f.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:f.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${b(S.status)}`,children:C(S.status)})})]},S.id))})]})}):f.jsx("p",{className:"text-center py-10 text-neutral-500 dark:text-neutral-400",children:M.noFeedbackSubmitted})]})]}),f.jsx(SA,{isOpen:l,onClose:()=>c(!1),title:`Detalii Feedback: "${(d==null?void 0:d.subject)||""}"`,size:"screen75",footerContent:d&&f.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[f.jsx(ct,{variant:"outline",size:"md",onClick:()=>v(d.id,Fs.IN_PROGRESS),disabled:d.status===Fs.IN_PROGRESS||d.status===Fs.RESOLVED,children:M.markAsInProgress}),f.jsx(ct,{variant:"secondary",size:"md",onClick:()=>v(d.id,Fs.RESOLVED),disabled:d.status===Fs.RESOLVED,children:M.markAsResolved})]}),children:d&&f.jsxs("div",{className:"space-y-4 text-sm",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:"Utilizator"}),f.jsxs("p",{children:[d.userName," (",d.userEmail,")"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:"Categorie"}),f.jsx("p",{children:_(d.category)})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:"Data"}),f.jsx("p",{children:or(d.timestamp)})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:"Status"}),f.jsx("p",{children:f.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${b(d.status)}`,children:C(d.status)})})]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:"Descriere complet"}),f.jsx("div",{className:"mt-1 p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg max-h-64 overflow-y-auto border dark:border-neutral-600",children:f.jsx("p",{className:"whitespace-pre-wrap text-neutral-700 dark:text-neutral-200",children:d.description})})]})]})})]})},cce=()=>{var g;const{user:t}=dn(),{appData:e,loading:r,updatePlatformSettings:n}=An(),{addNotification:i}=gi(),[a,s]=X.useState({}),[o,l]=X.useState(!1);X.useEffect(()=>{if(e!=null&&e.platformSettings){const m=e.platformSettings.reduce((w,v)=>(w[v.key]=v.value,w),{});s(m)}},[e==null?void 0:e.platformSettings]);const c=(t==null?void 0:t.isGlobalAdmin)||((g=t==null?void 0:t.adminPermissions)==null?void 0:g[zr.CAN_MANAGE_PLATFORM_SETTINGS]);if(r||!e||!t)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});if(!c)return f.jsx(Pt,{title:M.accessDenied,className:"text-center",children:f.jsxs("p",{children:[M.accessDenied," Nu avei permisiunea de a gestiona setrile platformei."]})});const d=(m,w)=>{s(v=>({...v,[m]:w}))},p=async m=>{m.preventDefault(),l(!0);try{const w=e.platformSettings.map(v=>({...v,value:a[v.key]!==void 0?a[v.key]:v.value}));await n(w)}catch(w){i(M.failedToSaveSettings,Je.ERROR),console.error("Failed to save platform settings:",w)}finally{l(!1)}};return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(CU,{className:"h-8 w-8 mr-3 text-primary-500"}),M.adminPlatformSettingsTitle]}),f.jsxs(Pt,{children:[f.jsx("p",{className:"mb-6 text-sm text-neutral-600 dark:text-neutral-400",children:M.platformSettingsDescription}),f.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.platformSettings.map(m=>m.type==="boolean"?f.jsx("div",{className:"p-4 border border-neutral-200 dark:border-neutral-700 rounded-lg",children:f.jsx(Fc,{id:m.key,label:m.label,description:m.description,checked:a[m.key]==="true",onChange:w=>d(m.key,w?"true":"false")})},m.key):f.jsxs("div",{className:"p-4 border border-neutral-200 dark:border-neutral-700 rounded-lg",children:[f.jsx("label",{htmlFor:m.key,className:"block text-md font-semibold text-neutral-800 dark:text-neutral-100 mb-1",children:m.label}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2",children:m.description}),m.type==="textarea"?f.jsx(Pc,{id:m.key,name:m.key,value:a[m.key]||"",onChange:w=>d(m.key,w.target.value),rows:3,className:"mt-1 block w-full"}):f.jsx(Tr,{id:m.key,name:m.key,type:m.type==="number"?"number":"text",value:a[m.key]||"",onChange:w=>d(m.key,w.target.value),className:"mt-1 block w-full"})]},m.key)),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(ct,{type:"submit",variant:"primary",isLoading:o,disabled:o,children:M.saveSettingsButton})})]})]})]})},uce=()=>{var re;const{user:t}=dn(),{appData:e,loading:r,addTransaction:n,exportData:i}=An(),{addNotification:a}=gi(),[s,o]=X.useState([]);X.useEffect(()=>{e!=null&&e.calendarEvents&&o(e.calendarEvents)},[e==null?void 0:e.calendarEvents]);const l=X.useCallback(Ae=>{if(!t)return null;const be={...Ae,id:xa("calevent"),createdAt:new Date().toISOString(),createdByAdminId:t.id},Se=[be,...s];return o(Se),i("calendarEvents",Se),n({adminId:t.id,type:At.CALENDAR_EVENT_CREATED,status:fr.COMPLETED,description:`Eveniment nou creat n calendar: "${be.title}"`,details:{eventId:be.id,initialValues:{title:be.title,date:be.date,eventType:be.type,description:be.description}}}),be},[t,s,i,n]),c=X.useCallback((Ae,be)=>{if(!t)return null;const Se={...Ae,...be},Ne=s.map(Ue=>Ue.id===Se.id?Se:Ue);o(Ne),i("calendarEvents",Ne);const qe=Pf(Ae,Se,["title","date","type","description"],{title:"Titlu",date:"Data",type:"Tip Eveniment",description:"Descriere"});return n({adminId:t.id,type:At.CALENDAR_EVENT_UPDATED,status:fr.COMPLETED,description:`Eveniment din calendar actualizat: "${Se.title}"`,details:{eventId:Se.id,changedFields:qe}}),Se},[t,s,i,n]),d=X.useCallback(Ae=>{if(!t)return!1;const be=s.find(Ne=>Ne.id===Ae);if(!be)return!1;const Se=s.filter(Ne=>Ne.id!==Ae);return o(Se),i("calendarEvents",Se),n({adminId:t.id,type:At.CALENDAR_EVENT_DELETED,status:fr.COMPLETED,description:`Eveniment ters din calendar: "${be.title}"`,details:{eventId:be.id,deletedValues:{title:be.title,date:be.date,type:be.type}}}),!0},[t,s,i,n]),[p,g]=X.useState(new Date().getMonth()),[m,w]=X.useState(new Date().getFullYear()),[v,b]=X.useState(!1),[_,C]=X.useState(null),[T,S]=X.useState(new Date().toISOString().split("T")[0]),O={title:"",type:Tc.OTHER,description:""},[j,U]=X.useState(O),[P,F]=X.useState(!1),[H,L]=X.useState(null),k=(t==null?void 0:t.isGlobalAdmin)||((re=t==null?void 0:t.adminPermissions)==null?void 0:re[zr.CAN_MANAGE_CALENDAR_EVENTS]);X.useEffect(()=>{_?(U({title:_.title,type:_.type,description:_.description||""}),S(_.date)):U(O)},[_,v]);const G=()=>{p===0?(g(11),w(m-1)):g(p-1)},q=()=>{p===11?(g(0),w(m+1)):g(p+1)},ce=(Ae,be)=>{if(!k){a(M.accessDenied,Je.ERROR);return}C(Ae||null),S(be||(Ae==null?void 0:Ae.date)||new Date().toISOString().split("T")[0]),b(!0)},Y=Ae=>{const{name:be,value:Se}=Ae.target;U(Ne=>({...Ne,[be]:Se}))},ie=Ae=>{if(Ae.preventDefault(),!k||!t)return;if(!j.title.trim()){a("Titlul evenimentului este obligatoriu.",Je.ERROR);return}const be={title:j.title,date:T,type:j.type,description:j.description},Se={title:j.title,date:T,type:j.type,description:j.description,createdByAdminId:t.id,createdAt:new Date().toISOString()};_?(c(_,be),a(M.eventUpdatedSuccessfully,Je.SUCCESS)):(l(Se),a(M.eventCreatedSuccessfully,Je.SUCCESS)),b(!1)},me=Ae=>{k&&(L(Ae),F(!0))},Te=()=>{H&&k&&(d(H.id),a(M.eventDeletedSuccessfully,Je.SUCCESS)),F(!1),L(null)},ue=new Date(m,p+1,0).getDate(),ne=new Date(m,p,1).getDay(),I=ne===0?6:ne-1,Q=[];for(let Ae=0;Ae<I;Ae++)Q.push(null);for(let Ae=1;Ae<=ue;Ae++)Q.push(new Date(m,p,Ae));const z=7-Q.length%7;if(z<7)for(let Ae=0;Ae<z;Ae++)Q.push(null);if(r||!e||!t)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});if(!k)return f.jsx(Pt,{title:M.accessDenied,className:"text-center",children:f.jsxs("p",{children:[M.accessDenied," Nu avei permisiunea de a gestiona calendarul."]})});const W=s.filter(Ae=>{const be=new Date(Ae.date);return be.getFullYear()===m&&be.getMonth()===p});return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(S0,{className:"h-8 w-8 mr-3 text-primary-500"}),M.adminCalendarTitle]}),k&&f.jsx(ct,{onClick:()=>ce(),variant:"primary",leftIcon:f.jsx(tx,{className:"h-5 w-5"}),children:M.addNewEvent})]}),f.jsxs(Pt,{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx(ct,{onClick:G,variant:"outline",size:"sm",leftIcon:f.jsx(nQ,{className:"h-5 w-5"}),children:M.previousMonth}),f.jsx("h2",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-200",children:new Date(m,p).toLocaleString("ro-RO",{month:"long",year:"numeric"})}),f.jsx(ct,{onClick:q,variant:"outline",size:"sm",rightIcon:f.jsx(TU,{className:"h-5 w-5"}),children:M.nextMonth})]}),f.jsxs("div",{className:"grid grid-cols-7 gap-px border border-neutral-200 dark:border-neutral-700 bg-neutral-200 dark:bg-neutral-700 rounded-lg overflow-hidden",children:[["Luni","Mari","Miercuri","Joi","Vineri","Smbt","Duminic"].map(Ae=>f.jsx("div",{className:"p-2 text-center text-xs font-medium text-neutral-600 dark:text-neutral-300 bg-neutral-100 dark:bg-neutral-800",children:Ae},Ae)),Q.map((Ae,be)=>{const Se=Ae?Ae.toISOString().split("T")[0]:`empty-${be}`,Ne=Ae?W.filter(Ue=>Ue.date===Ae.toISOString().split("T")[0]):[],qe=Ae&&Ae.toDateString()===new Date().toDateString();return f.jsxs("div",{className:`p-1.5 h-32 flex flex-col bg-white dark:bg-neutral-800/50 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors ${Ae?"":"opacity-50"} ${qe?"ring-2 ring-primary-500":""}`,onClick:Ae&&k?()=>ce(void 0,Ae.toISOString().split("T")[0]):void 0,role:Ae&&k?"button":void 0,tabIndex:Ae&&k?0:-1,"aria-label":Ae?`Adaug eveniment pentru ${or(Ae,{day:"numeric",month:"long"})}`:"Zi inactiv",children:[Ae&&f.jsx("span",{className:`text-xs font-semibold ${qe?"text-primary-600 dark:text-primary-400":"text-neutral-700 dark:text-neutral-200"}`,children:Ae.getDate()}),f.jsxs("div",{className:"mt-1 space-y-0.5 overflow-y-auto text-xs flex-grow",children:[Ne.slice(0,2).map(Ue=>{var at,Oe;return f.jsx("div",{className:`p-1 rounded text-xs truncate ${((at=h2[Ue.type])==null?void 0:at.bg)||h2.OTHER.bg} ${((Oe=h2[Ue.type])==null?void 0:Oe.text)||h2.OTHER.text} cursor-pointer`,onClick:we=>{we.stopPropagation(),k&&ce(Ue)},title:Ue.title,children:Ue.title},Ue.id)}),Ne.length>2&&f.jsxs("div",{className:"p-1 text-neutral-500 dark:text-neutral-400 text-center text-xs cursor-pointer",onClick:Ue=>{Ue.stopPropagation()},children:["+ ",Ne.length-2," altele"]})]})]},Se)})]}),W.length===0&&f.jsx("p",{className:"text-center py-6 text-neutral-500 dark:text-neutral-400",children:M.noEventsThisMonth})]}),v&&f.jsx(SA,{isOpen:v,onClose:()=>b(!1),title:_?M.editEvent:M.addNewEvent,children:f.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[f.jsx(Tr,{label:M.eventTitleLabel,name:"title",value:j.title,onChange:Y,required:!0}),f.jsx(Tr,{label:M.eventDateLabel,type:"date",name:"date",value:T,onChange:Ae=>S(Ae.target.value),required:!0}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:M.eventTypeLabel}),f.jsxs("select",{id:"type",name:"type",value:j.type,onChange:Y,className:"w-full px-3 py-2.5 rounded-lg shadow-sm bg-neutral-50 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 text-neutral-900 dark:text-neutral-100 focus:ring-primary-500 focus:border-primary-500",children:[f.jsx("option",{value:Tc.SPORT_EVENT,children:M.eventTypeSport}),f.jsx("option",{value:Tc.MAINTENANCE,children:M.eventTypeMaintenance}),f.jsx("option",{value:Tc.ADMIN_REMINDER,children:M.eventTypeAdminReminder}),f.jsx("option",{value:Tc.OTHER,children:M.eventTypeOther})]})]}),f.jsx(Pc,{label:M.eventDescriptionLabel,name:"description",value:j.description||"",onChange:Y,rows:3}),f.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[_&&f.jsx(ct,{variant:"danger",type:"button",onClick:()=>me(_),leftIcon:f.jsx(ex,{className:"h-5 w-5"}),children:M.delete}),f.jsx(ct,{variant:"ghost",type:"button",onClick:()=>b(!1),children:M.cancel}),f.jsx(ct,{variant:"primary",type:"submit",children:M.save})]})]})}),P&&H&&f.jsx(wx,{isOpen:P,onClose:()=>F(!1),onConfirm:Te,title:M.confirmEventDeletionTitle,message:M.confirmEventDeletionMessage.replace("{eventTitle}",H.title),confirmText:M.delete})]})};z0.register(...dO);z0.register(I1,D1,Yg,Bp,Lc,NC,FC,SC,CC);const fce=()=>{var w,v,b;const{user:t}=dn(),{appData:e,loading:r}=An(),{addNotification:n}=gi(),{theme:i}=zo(),[a,s]=X.useState(null),[o,l]=X.useState(!1),[c,d]=X.useState(null),p=(t==null?void 0:t.isGlobalAdmin)||((w=t==null?void 0:t.adminPermissions)==null?void 0:w[zr.CAN_USE_GEMINI_ANALYSIS]),g=async()=>{if(!p){n(M.accessDenied,Je.ERROR);return}{n(M.geminiApiKeyMissing,Je.ERROR);return}},m={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1,ticks:{color:i==="dark"?"#e5e7eb":"#374151"},grid:{color:i==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}},x:{ticks:{color:i==="dark"?"#e5e7eb":"#374151"},grid:{display:!1}}},plugins:{legend:{labels:{color:i==="dark"?"#e5e7eb":"#374151"}}}};return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(d1,{className:"h-8 w-8 mr-3 text-primary-500"}),M.adminMarketPulse]}),f.jsxs(Pt,{children:[!a&&!o&&f.jsxs("div",{className:"text-center p-6",children:[f.jsx(Qu,{className:"h-12 w-12 text-primary-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-semibold mb-2",children:M.geminiMarketPulseReportTitle}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 mb-6 max-w-2xl mx-auto",children:M.geminiMarketPulseReportDescription}),f.jsx(ct,{onClick:g,variant:"primary",size:"lg",disabled:!p,children:M.generateMarketPulseReport}),!p&&f.jsx("p",{className:"text-xs text-red-500 mt-2",children:M.accessDenied})]}),o&&f.jsxs("div",{className:"text-center p-10",children:[f.jsx(Cn,{size:"lg"}),f.jsx("p",{className:"mt-4 text-neutral-600 dark:text-neutral-300",children:M.marketPulseAnalysisInProgress})]}),c&&f.jsx("p",{className:"text-red-500 p-4",children:c}),a&&f.jsxs("div",{className:"space-y-8 p-2",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:a.reportTitle}),f.jsx("p",{className:"mt-2 text-neutral-700 dark:text-neutral-200 max-w-3xl mx-auto",children:a.overallSummary})]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(a.charts||[]).map((_,C)=>{const S=(_.datasets||[]).some(O=>O.yAxisID)?{...m,scales:{x:m.scales.x,y_profit:{type:"linear",position:"left",title:{display:!0,text:"Profit (EUR)"},ticks:{color:i==="dark"?"#e5e7eb":"#374151"},grid:{color:i==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}},y_turnover:{type:"linear",position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"Turnover (EUR)"},ticks:{color:i==="dark"?"#e5e7eb":"#374151"}}}}:m;return f.jsx(Pt,{title:_.chartTitle,className:(a.charts&&a.charts.length||0)===1?"lg:col-span-2":"",children:f.jsx("div",{className:"h-80",children:f.jsx(gO,{type:_.chartType||"bar",data:{labels:_.labels||[],datasets:(_.datasets||[]).map(O=>{var j,U;return{...O,backgroundColor:(j=O.label)!=null&&j.toLowerCase().includes("profit")?Ci.backgroundColorProfit:O.type==="line"?"transparent":Ci.backgroundColorUser,borderColor:(U=O.label)!=null&&U.toLowerCase().includes("profit")?Ci.borderColorProfit:Ci.borderColorUser}})},options:S})})},C)})}),((v=a.analysisPeriods)==null?void 0:v.length)>0&&f.jsx(Pt,{title:"Analiza Perioadelor",children:f.jsx("div",{className:"space-y-4",children:a.analysisPeriods.map((_,C)=>f.jsxs("div",{className:"p-3 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-primary-700 dark:text-primary-300",children:_.periodName}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:_.description})]},C))})}),((b=a.keyTakeaways)==null?void 0:b.length)>0&&f.jsx(Pt,{title:"Concluzii Cheie",children:f.jsx("ul",{className:"list-disc list-inside space-y-2 text-neutral-700 dark:text-neutral-200",children:a.keyTakeaways.map((_,C)=>f.jsx("li",{children:_},C))})}),f.jsx("div",{className:"text-center pt-4",children:f.jsx(ct,{onClick:g,variant:"secondary",children:"Genereaz un Raport Nou"})})]})]})]})};z0.register(I1,D1,Bp,Lc,NC,FC,SC,CC);const nU=t=>t.toISOString().split("T")[0],dce=()=>{const{user:t}=dn(),{appData:e,loading:r}=An(),{addNotification:n}=gi(),i=nU(new Date),a=nU(new Date(new Date().setMonth(new Date().getMonth()-1))),[s,o]=X.useState("1000"),[l,c]=X.useState(a),[d,p]=X.useState(i),[g,m]=X.useState(null),[w,v]=X.useState(!1),b=T=>{var k;T.preventDefault(),v(!0),m(null);const S=parseFloat(s);if(isNaN(S)||S<=0||!l||!d||new Date(l)>new Date(d)){n(M.backtestingInvalidInput,Je.ERROR),v(!1);return}if(!(e!=null&&e.dailyHistory)||e.dailyHistory.length===0){n(M.backtestingNoDataForPeriod,Je.WARNING),v(!1);return}const O=e.dailyHistory.filter(G=>G.date>=l&&G.date<=d).sort((G,q)=>new Date(G.date).getTime()-new Date(q.date).getTime());if(O.length===0){n(M.backtestingNoDataForPeriod,Je.WARNING),v(!1);return}let j=S,U=0,P=0;const F=[{date:l,value:j}];O.forEach(G=>{var I;const q=G.dailyGrossProfit,ce=G.totalBankValueStart;if(ce<=0)return;const Y=j/ce,ie=q*Y;let me=0;G.dailyGrossProfit>0&&G.collectedFees!==void 0&&G.collectedFees>=0&&(me=G.collectedFees/G.dailyGrossProfit);const Te=ie>0?ie*me:0,ue=ie-Te;j+=ue,U+=ie,P+=Te,((I=F[F.length-1])==null?void 0:I.date)!==G.date?F.push({date:G.date,value:j}):F.length>0&&(F[F.length-1].value=j)}),((k=F[F.length-1])==null?void 0:k.date)<d&&F.push({date:d,value:j});const H=U-P,L=S>0?H/S*100:H>0?1/0:0;m({initialInvestment:S,finalBalance:j,totalGrossProfit:U,totalFeesPaid:P,totalNetProfit:H,growthPercentage:L,period:`${or(l,{year:"numeric",month:"short",day:"numeric"})} - ${or(d,{year:"numeric",month:"short",day:"numeric"})}`,dailyEvolution:F}),v(!1)},_=X.useMemo(()=>g?{labels:g.dailyEvolution.map(T=>or(T.date,{month:"short",day:"numeric"})),datasets:[{label:M.backtestingChartLabel,data:g.dailyEvolution.map(T=>T.value),borderColor:Ci.borderColorUser,backgroundColor:Ci.backgroundColorUser,tension:.1,fill:!0}]}:null,[g]),C={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1}},plugins:{legend:{display:!0}}};return r||!t?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})}):f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(SU,{className:"h-8 w-8 mr-3 text-primary-500"}),M.userBacktestingTitle]}),f.jsxs(Pt,{title:"Parametri Simulare",children:[f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-4",children:M.backtestingIntro}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsx(Tr,{label:M.simulatedInvestmentAmountLabel,type:"number",name:"simulatedAmount",value:s,onChange:T=>o(T.target.value),placeholder:"ex: 1000",min:"1",required:!0}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Tr,{label:M.simulationStartDateLabel,type:"date",name:"startDate",value:l,onChange:T=>c(T.target.value),max:i,required:!0}),f.jsx(Tr,{label:M.simulationEndDateLabel,type:"date",name:"endDate",value:d,onChange:T=>p(T.target.value),min:l||void 0,max:i,required:!0})]}),f.jsx(ct,{type:"submit",variant:"primary",isLoading:w,disabled:w,children:M.runSimulationButton})]})]}),w&&f.jsxs("div",{className:"text-center py-6",children:[f.jsx(Cn,{}),f.jsx("p",{className:"mt-2 text-neutral-600 dark:text-neutral-300",children:"Se proceseaz simularea..."})]}),g&&!w&&f.jsxs(Pt,{title:M.backtestingResultsTitle,children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 text-sm",children:[f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:M.initialSimulatedInvestment}),f.jsx("p",{className:"text-xl font-semibold text-primary-600 dark:text-primary-400",children:_t(g.initialInvestment)})]}),f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:M.finalSimulatedBalance}),f.jsx("p",{className:"text-xl font-semibold text-purple-600 dark:text-purple-400",children:_t(g.finalBalance)})]}),f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:M.totalSimulatedGrossProfit}),f.jsx("p",{className:`text-lg font-semibold ${g.totalGrossProfit>=0?"text-green-500":"text-red-500"}`,children:_t(g.totalGrossProfit)})]}),f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:M.totalSimulatedFeesPaid}),f.jsx("p",{className:"text-lg font-semibold text-red-500",children:_t(g.totalFeesPaid)})]}),f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:M.totalSimulatedNetProfit}),f.jsx("p",{className:`text-xl font-bold ${g.totalNetProfit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:_t(g.totalNetProfit)})]}),f.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-700/50 rounded-lg",children:[f.jsx("p",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:M.totalSimulatedGrowthPercentage}),f.jsx("p",{className:`text-xl font-bold ${g.growthPercentage>=0?"text-teal-600 dark:text-teal-400":"text-orange-600 dark:text-orange-400"}`,children:g.growthPercentage===1/0?"N/A":`${g.growthPercentage.toFixed(2)}%`})]})]}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-4",children:[M.simulationPeriod," ",g.period]}),_&&f.jsxs("div",{className:"mt-4 h-72 md:h-96",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:M.backtestingChartTitle}),f.jsx(Uw,{data:_,options:C})]}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-6",children:M.backtestingDisclaimer})]})]})},hce=()=>{const{user:t}=dn(),{appData:e,loading:r,markUserMessageAsRead:n,markAllUserMessagesAsRead:i}=An(),[a,s]=X.useState("announcements"),o=X.useMemo(()=>e!=null&&e.announcements?[...e.announcements].sort((m,w)=>new Date(w.createdAt).getTime()-new Date(m.createdAt).getTime()):[],[e==null?void 0:e.announcements]),l=X.useMemo(()=>!(e!=null&&e.userMessages)||!t?[]:[...e.userMessages].filter(m=>m.userId===t.id).sort((m,w)=>new Date(w.createdAt).getTime()-new Date(m.createdAt).getTime()),[e==null?void 0:e.userMessages,t]);if(r||!e||!t)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(Cn,{})});const c=m=>{switch(m){case uA.HIGH:return"border-l-4 border-red-500 bg-red-50 dark:bg-red-900/30";case uA.MEDIUM:return"border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/30";case uA.LOW:return"border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-900/30";default:return"border-l-4 border-neutral-300 dark:border-neutral-600"}},d=m=>{switch(m){case tl.SUCCESS:return f.jsx(rl,{className:"h-5 w-5 text-green-500"});case tl.INFO:return f.jsx(uw,{className:"h-5 w-5 text-blue-500"});case tl.WARNING:return f.jsx(h1,{className:"h-5 w-5 text-yellow-500"});case tl.ERROR:return f.jsx(Al,{className:"h-5 w-5 text-red-500"});case tl.ACTION_REQUIRED:return f.jsx(h1,{className:"h-5 w-5 text-purple-500"});default:return f.jsx(uw,{className:"h-5 w-5 text-neutral-500"})}},p=m=>{n(m,t.id)},g=()=>{i(t.id)};return f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("h1",{className:"text-3xl font-bold text-neutral-800 dark:text-neutral-100 flex items-center",children:[f.jsx(fw,{className:"h-8 w-8 mr-3 text-primary-500"}),M.notificationCenter]}),f.jsxs(Pt,{children:[f.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[f.jsxs("button",{onClick:()=>s("announcements"),className:`${a==="announcements"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:border-neutral-600"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center`,children:[f.jsx(DB,{className:"h-5 w-5 mr-2"})," ",M.announcementsTab]}),f.jsxs("button",{onClick:()=>s("personalMessages"),className:`${a==="personalMessages"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:border-neutral-600"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center`,children:[f.jsx(fw,{className:"h-5 w-5 mr-2"})," ",M.personalMessagesTab,l.filter(m=>!m.isRead).length>0&&f.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full",children:l.filter(m=>!m.isRead).length})]})]})}),f.jsxs("div",{className:"mt-6",children:[a==="announcements"&&f.jsx("div",{className:"space-y-4",children:o.length>0?o.map(m=>f.jsxs("div",{className:`p-4 rounded-lg shadow-sm ${c(m.importance)}`,children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mb-1",children:m.title}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2",children:["Publicat la: ",or(m.createdAt)," de Admin ID: ",m.createdBy.substring(0,8),"..."]}),f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 whitespace-pre-line",children:m.content})]},m.id)):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noAnnouncements})}),a==="personalMessages"&&f.jsxs("div",{className:"space-y-4",children:[l.filter(m=>!m.isRead).length>0&&f.jsx("div",{className:"text-right mb-4",children:f.jsx(ct,{onClick:g,variant:"outline",size:"sm",children:M.markAllAsRead})}),l.length>0?l.map(m=>f.jsx("div",{className:`p-4 rounded-lg shadow-sm border-l-4 ${m.isRead?"border-neutral-300 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-800/60":"border-primary-500 bg-primary-50 dark:bg-primary-900/30"}`,children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0 pt-0.5 mr-3",children:d(m.type)}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:`text-md font-semibold ${m.isRead?"text-neutral-700 dark:text-neutral-200":"text-primary-700 dark:text-primary-300"}`,children:m.title}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:["Primit la: ",or(m.createdAt)]}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 whitespace-pre-line",children:m.content}),m.linkTo&&f.jsx(un,{to:m.linkTo,className:"mt-2 inline-block",children:f.jsx(ct,{variant:"ghost",size:"sm",className:"text-primary-600 dark:text-primary-400",children:M.viewDetails})})]}),!m.isRead&&f.jsx(ct,{onClick:()=>p(m.id),variant:"ghost",size:"sm",className:"ml-4 flex-shrink-0","aria-label":M.markAsRead,children:f.jsx(rl,{className:"h-5 w-5 text-gray-400 hover:text-green-500"})})]})},m.id)):f.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:M.noPersonalMessages})]})]})]})]})};/*!
 * paths 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var pce=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,mce=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,gce=Math.PI/180,Iv=Math.sin,Dv=Math.cos,A1=Math.abs,og=Math.sqrt,xce=function(e){return typeof e=="number"},iU=1e5,Df=function(e){return Math.round(e*iU)/iU||0};function vce(t,e,r,n,i,a,s){for(var o=t.length,l,c,d,p,g;--o>-1;)for(l=t[o],c=l.length,d=0;d<c;d+=2)p=l[d],g=l[d+1],l[d]=p*e+g*n+a,l[d+1]=p*r+g*i+s;return t._dirty=1,t}function wce(t,e,r,n,i,a,s,o,l){if(!(t===o&&e===l)){r=A1(r),n=A1(n);var c=i%360*gce,d=Dv(c),p=Iv(c),g=Math.PI,m=g*2,w=(t-o)/2,v=(e-l)/2,b=d*w+p*v,_=-p*w+d*v,C=b*b,T=_*_,S=C/(r*r)+T/(n*n);S>1&&(r=og(S)*r,n=og(S)*n);var O=r*r,j=n*n,U=(O*j-O*T-j*C)/(O*T+j*C);U<0&&(U=0);var P=(a===s?-1:1)*og(U),F=P*(r*_/n),H=P*-(n*b/r),L=(t+o)/2,k=(e+l)/2,G=L+(d*F-p*H),q=k+(p*F+d*H),ce=(b-F)/r,Y=(_-H)/n,ie=(-b-F)/r,me=(-_-H)/n,Te=ce*ce+Y*Y,ue=(Y<0?-1:1)*Math.acos(ce/og(Te)),ne=(ce*me-Y*ie<0?-1:1)*Math.acos((ce*ie+Y*me)/og(Te*(ie*ie+me*me)));isNaN(ne)&&(ne=g),!s&&ne>0?ne-=m:s&&ne<0&&(ne+=m),ue%=m,ne%=m;var I=Math.ceil(A1(ne)/(m/4)),Q=[],z=ne/I,W=4/3*Iv(z/2)/(1+Dv(z/2)),re=d*r,Ae=p*r,be=p*-n,Se=d*n,Ne;for(Ne=0;Ne<I;Ne++)i=ue+Ne*z,b=Dv(i),_=Iv(i),ce=Dv(i+=z),Y=Iv(i),Q.push(b-W*_,_+W*b,ce+W*Y,Y-W*ce,ce,Y);for(Ne=0;Ne<Q.length;Ne+=2)b=Q[Ne],_=Q[Ne+1],Q[Ne]=b*re+_*be+G,Q[Ne+1]=b*Ae+_*Se+q;return Q[Ne-2]=o,Q[Ne-1]=l,Q}}function bce(t){var e=(t+"").replace(mce,function(F){var H=+F;return H<1e-4&&H>-1e-4?0:H}).match(pce)||[],r=[],n=0,i=0,a=2/3,s=e.length,o=0,l="ERROR: malformed path: "+t,c,d,p,g,m,w,v,b,_,C,T,S,O,j,U,P=function(H,L,k,G){C=(k-H)/3,T=(G-L)/3,v.push(H+C,L+T,k-C,G-T,k,G)};if(!t||!isNaN(e[0])||isNaN(e[1]))return console.log(l),r;for(c=0;c<s;c++)if(O=m,isNaN(e[c])?(m=e[c].toUpperCase(),w=m!==e[c]):c--,p=+e[c+1],g=+e[c+2],w&&(p+=n,g+=i),c||(b=p,_=g),m==="M")v&&(v.length<8?r.length-=1:o+=v.length),n=b=p,i=_=g,v=[p,g],r.push(v),c+=2,m="L";else if(m==="C")v||(v=[0,0]),w||(n=i=0),v.push(p,g,n+e[c+3]*1,i+e[c+4]*1,n+=e[c+5]*1,i+=e[c+6]*1),c+=6;else if(m==="S")C=n,T=i,(O==="C"||O==="S")&&(C+=n-v[v.length-4],T+=i-v[v.length-3]),w||(n=i=0),v.push(C,T,p,g,n+=e[c+3]*1,i+=e[c+4]*1),c+=4;else if(m==="Q")C=n+(p-n)*a,T=i+(g-i)*a,w||(n=i=0),n+=e[c+3]*1,i+=e[c+4]*1,v.push(C,T,n+(p-n)*a,i+(g-i)*a,n,i),c+=4;else if(m==="T")C=n-v[v.length-4],T=i-v[v.length-3],v.push(n+C,i+T,p+(n+C*1.5-p)*a,g+(i+T*1.5-g)*a,n=p,i=g),c+=2;else if(m==="H")P(n,i,n=p,i),c+=1;else if(m==="V")P(n,i,n,i=p+(w?i-n:0)),c+=1;else if(m==="L"||m==="Z")m==="Z"&&(p=b,g=_,v.closed=!0),(m==="L"||A1(n-p)>.5||A1(i-g)>.5)&&(P(n,i,p,g),m==="L"&&(c+=2)),n=p,i=g;else if(m==="A"){if(j=e[c+4],U=e[c+5],C=e[c+6],T=e[c+7],d=7,j.length>1&&(j.length<3?(T=C,C=U,d--):(T=U,C=j.substr(2),d-=2),U=j.charAt(1),j=j.charAt(0)),S=wce(n,i,+e[c+1],+e[c+2],+e[c+3],+j,+U,(w?n:0)+C*1,(w?i:0)+T*1),c+=d,S)for(d=0;d<S.length;d++)v.push(S[d]);n=v[v.length-2],i=v[v.length-1]}else console.log(l);return c=v.length,c<6?(r.pop(),c=0):v[0]===v[c-2]&&v[1]===v[c-1]&&(v.closed=!0),r.totalPoints=o+c,r}function yce(t){xce(t[0])&&(t=[t]);var e="",r=t.length,n,i,a,s;for(i=0;i<r;i++){for(s=t[i],e+="M"+Df(s[0])+","+Df(s[1])+" C",n=s.length,a=2;a<n;a++)e+=Df(s[a++])+","+Df(s[a++])+" "+Df(s[a++])+","+Df(s[a++])+" "+Df(s[a++])+","+Df(s[a])+" ";s.closed&&(e+="z")}return e}/*!
 * CustomEase 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Do,qM,$M=function(){return Do||typeof window<"u"&&(Do=window.gsap)&&Do.registerPlugin&&Do},aU=function(){Do=$M(),Do?(Do.registerEase("_CE",Yp.create),qM=1):console.warn("Please gsap.registerPlugin(CustomEase)")},_ce=1e20,Lv=function(e){return~~(e*1e3+(e<0?-.5:.5))/1e3},Ece=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,Bce=/[cLlsSaAhHvVtTqQ]/g,Cce=function(e){var r=e.length,n=_ce,i;for(i=1;i<r;i+=6)+e[i]<n&&(n=+e[i]);return n},Sce=function(e,r,n){!n&&n!==0&&(n=Math.max(+e[e.length-1],+e[1]));var i=+e[0]*-1,a=-n,s=e.length,o=1/(+e[s-2]+i),l=-r||(Math.abs(+e[s-1]-+e[1])<.01*(+e[s-2]-+e[0])?Cce(e)+a:+e[s-1]+a),c;for(l?l=1/l:l=-o,c=0;c<s;c+=2)e[c]=(+e[c]+i)*o,e[c+1]=(+e[c+1]+a)*l},Tce=function t(e,r,n,i,a,s,o,l,c,d,p){var g=(e+n)/2,m=(r+i)/2,w=(n+a)/2,v=(i+s)/2,b=(a+o)/2,_=(s+l)/2,C=(g+w)/2,T=(m+v)/2,S=(w+b)/2,O=(v+_)/2,j=(C+S)/2,U=(T+O)/2,P=o-e,F=l-r,H=Math.abs((n-o)*F-(i-l)*P),L=Math.abs((a-o)*F-(s-l)*P),k;return d||(d=[{x:e,y:r},{x:o,y:l}],p=1),d.splice(p||d.length-1,0,{x:j,y:U}),(H+L)*(H+L)>c*(P*P+F*F)&&(k=d.length,t(e,r,g,m,C,T,j,U,c,d,p),t(j,U,S,O,b,_,o,l,c,d,p+1+(d.length-k))),d},Yp=(function(){function t(r,n,i){qM||aU(),this.id=r,this.setData(n,i)}var e=t.prototype;return e.setData=function(n,i){i=i||{},n=n||"0,0,1,1";var a=n.match(Ece),s=1,o=[],l=[],c=i.precision||1,d=c<=1,p,g,m,w,v,b,_,C,T;if(this.data=n,(Bce.test(n)||~n.indexOf("M")&&n.indexOf("C")<0)&&(a=bce(n)[0]),p=a.length,p===4)a.unshift(0,0),a.push(1,1),p=8;else if((p-2)%6)throw"Invalid CustomEase";for((+a[0]!=0||+a[p-2]!=1)&&Sce(a,i.height,i.originY),this.segment=a,w=2;w<p;w+=6)g={x:+a[w-2],y:+a[w-1]},m={x:+a[w+4],y:+a[w+5]},o.push(g,m),Tce(g.x,g.y,+a[w],+a[w+1],+a[w+2],+a[w+3],m.x,m.y,1/(c*2e5),o,o.length-1);for(p=o.length,w=0;w<p;w++)_=o[w],C=o[w-1]||_,(_.x>C.x||C.y!==_.y&&C.x===_.x||_===C)&&_.x<=1?(C.cx=_.x-C.x,C.cy=_.y-C.y,C.n=_,C.nx=_.x,d&&w>1&&Math.abs(C.cy/C.cx-o[w-2].cy/o[w-2].cx)>2&&(d=0),C.cx<s&&(C.cx?s=C.cx:(C.cx=.001,w===p-1&&(C.x-=.001,s=Math.min(s,.001),d=0)))):(o.splice(w--,1),p--);if(p=1/s+1|0,v=1/p,b=0,_=o[0],d){for(w=0;w<p;w++)T=w*v,_.nx<T&&(_=o[++b]),g=_.y+(T-_.x)/_.cx*_.cy,l[w]={x:T,cx:v,y:g,cy:0,nx:9},w&&(l[w-1].cy=g-l[w-1].y);b=o[o.length-1],l[p-1].cy=b.y-g,l[p-1].cx=b.x-l[l.length-1].x}else{for(w=0;w<p;w++)_.nx<w*v&&(_=o[++b]),l[w]=_;b<o.length-1&&(l[w-1]=o[o.length-2])}return this.ease=function(S){var O=l[S*p|0]||l[p-1];return O.nx<S&&(O=O.n),O.y+(S-O.x)/O.cx*O.cy},this.ease.custom=this,this.id&&Do&&Do.registerEase(this.id,this.ease),this},e.getSVGData=function(n){return t.getSVGData(this,n)},t.create=function(n,i,a){return new t(n,i,a).ease},t.register=function(n){Do=n,aU()},t.get=function(n){return Do.parseEase(n)},t.getSVGData=function(n,i){i=i||{};var a=i.width||100,s=i.height||100,o=i.x||0,l=(i.y||0)+s,c=Do.utils.toArray(i.path)[0],d,p,g,m,w,v,b,_,C,T;if(i.invert&&(s=-s,l=0),typeof n=="string"&&(n=Do.parseEase(n)),n.custom&&(n=n.custom),n instanceof t)d=yce(vce([n.segment],a,0,0,-s,o,l));else{for(d=[o,l],b=Math.max(5,(i.precision||1)*200),m=1/b,b+=2,_=5/b,C=Lv(o+m*a),T=Lv(l+n(m)*-s),p=(T-l)/(C-o),g=2;g<b;g++)w=Lv(o+g*m*a),v=Lv(l+n(g*m)*-s),(Math.abs((v-T)/(w-C)-p)>_||g===b-1)&&(d.push(C,T),p=(v-T)/(w-C)),C=w,T=v;d="M"+d.join(",")}return c&&c.setAttribute("d",d),d},t})();Yp.version="3.13.0";Yp.headless=!0;$M()&&Do.registerPlugin(Yp);const Nce=()=>{const t=X.useRef(null),{appData:e}=An(),{setSidebarForceHidden:r}=yB(),[n,i]=X.useState(!1),[a,s]=X.useState({title:"",body:null}),o=X.useMemo(()=>{const d={topInvestor:{name:"N/A",profit:0},recordProfit:{amount:0,date:""},highRoller:{name:"N/A",amount:0},topAmbassador:{name:"N/A",count:0},veteranInvestor:{name:"N/A",joinDate:""},winningStreak:{days:0,endDate:""},platformMilestone:{investors:0,target:100}};if(!e)return d;const p=e.users.filter(b=>b.role===ar.USER&&b.isActive);if(p.length>0){const b=[...p].sort((_,C)=>(C.profileData.totalProfitEarned||0)-(_.profileData.totalProfitEarned||0))[0];b&&(d.topInvestor={name:b.name,profit:b.profileData.totalProfitEarned||0})}if(e.dailyHistory&&e.dailyHistory.length>0){const b=[...e.dailyHistory].sort((_,C)=>C.dailyGrossProfit-_.dailyGrossProfit)[0];b&&(d.recordProfit={amount:b.dailyGrossProfit,date:b.date})}let g={name:"N/A",amount:0};p.forEach(b=>{(b.profileData.investmentHistory||[]).forEach(_=>{_.type==="DEPOSIT"&&_.amount>g.amount&&(g={name:b.name,amount:_.amount})})}),d.highRoller=g;let m=0,w=0,v="";if(e.dailyHistory&&e.dailyHistory.length>0){const b=[...e.dailyHistory].sort((_,C)=>new Date(_.date).getTime()-new Date(C.date).getTime());for(const _ of b)_.dailyGrossProfit>0?m++:(m>w&&(w=m,v=_.date),m=0);m>w&&(w=m,v=b[b.length-1].date)}return d.winningStreak={days:w,endDate:v},e.globalStats&&(d.platformMilestone.investors=e.globalStats.activeInvestors),d},[e]),l=(d,p)=>{var w;let g="",m=null;if(d==="category"&&p)switch(g=`Categorie: ${p}`,p){case"Investitori":const v=((e==null?void 0:e.users)||[]).filter(G=>G.role===ar.USER&&G.isActive).sort((G,q)=>(q.profileData.totalProfitEarned||0)-(G.profileData.totalProfitEarned||0)).slice(0,5);m=f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Top 5 Investitori (dup Profit Total)"}),v.length>0?f.jsx("ol",{className:"list-decimal list-inside space-y-2",children:v.map(G=>f.jsxs("li",{children:[f.jsx("span",{className:"font-semibold",children:G.name})," - ",f.jsx("span",{className:"text-green-500 font-bold",children:_t(G.profileData.totalProfitEarned)})]},G.id))}):f.jsx("p",{children:"Nu exist date suficiente."})]});break;case"Profituri":const b=(e==null?void 0:e.dailyHistory)||[],_=e==null?void 0:e.globalStats,C=b.length>0?[...b].sort((G,q)=>q.dailyGrossProfit-G.dailyGrossProfit)[0]:null,T=b.length>0?[...b].sort((G,q)=>G.dailyGrossProfit-q.dailyGrossProfit)[0]:null;m=f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sumar Profituri"}),b.length>0&&_?f.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[f.jsxs("li",{children:["Profit Total Distribuit: ",f.jsx("span",{className:"font-bold text-green-500",children:_t(_.totalProfitDistributed)})]}),C&&f.jsxs("li",{children:["Cea mai bun zi: ",f.jsx("span",{className:"font-semibold",children:or(C.date,{day:"numeric",month:"long",year:"numeric"})})," cu un profit de ",f.jsx("span",{className:"font-bold text-green-500",children:_t(C.dailyGrossProfit)})]}),T&&f.jsxs("li",{children:["Cea mai slab zi: ",f.jsx("span",{className:"font-semibold",children:or(T.date,{day:"numeric",month:"long",year:"numeric"})})," cu un profit de ",f.jsx("span",{className:"font-bold text-red-500",children:_t(T.dailyGrossProfit)})]})]}):f.jsx("p",{children:"Nu exist date suficiente."})]});break;case"Recomandri":m=f.jsx("p",{children:"Informaii despre recomandri vor fi disponibile n curnd."});break;case"Mize Record":const S=(e==null?void 0:e.bets)||[],O=S.length>0?[...S].sort((G,q)=>q.stake-G.stake)[0]:null,j=S.length>0?[...S].filter(G=>G.status===Br.WON).sort((G,q)=>q.odds-G.odds)[0]:null;m=f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recorduri Pariuri"}),S.length>0?f.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[O&&f.jsxs("li",{children:["Cea mai mare miz: ",f.jsx("span",{className:"font-bold",children:_t(O.stake)})," pe ",f.jsxs("span",{className:"italic",children:['"',O.selection,'"']})]}),j&&f.jsxs("li",{children:["Cea mai mare cot ctigat: ",f.jsx("span",{className:"font-bold",children:j.odds.toFixed(2)})," pe ",f.jsxs("span",{className:"italic",children:['"',j.selection,'"']})]}),!O&&!j&&f.jsx("li",{children:"Nu exist date suficiente."})]}):f.jsx("p",{children:"Nu exist date despre pariuri."})]});break;case"Milestones":const U=e==null?void 0:e.globalStats,P=[{target:1e4,label:"Total Investit",value:(U==null?void 0:U.totalInvested)||0,type:"currency"},{target:5e4,label:"Total Investit",value:(U==null?void 0:U.totalInvested)||0,type:"currency"},{target:50,label:"Investitori Activi",value:(U==null?void 0:U.activeInvestors)||0,type:"count"},{target:100,label:"Investitori Activi",value:(U==null?void 0:U.activeInvestors)||0,type:"count"}];m=f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Progres Obiective Platform"}),U?f.jsx("ul",{className:"list-disc list-inside space-y-2",children:P.map((G,q)=>{const ce=G.type==="currency"?_t(G.value):G.value.toLocaleString("ro-RO"),Y=G.type==="currency"?_t(G.target):G.target.toLocaleString("ro-RO");return f.jsxs("li",{className:G.value>=G.target?"text-green-500":"",children:[G.label,": ",G.value>=G.target?f.jsxs("span",{className:"font-bold",children:["Atins (",ce,")"]}):f.jsxs("span",{children:[ce," / ",Y]})]},q)})}):f.jsx("p",{children:"Nu exist date suficiente."})]});break;case"Longevitate":const F=((e==null?void 0:e.users)||[]).filter(G=>G.role===ar.USER).sort((G,q)=>new Date(G.profileData.joinDate).getTime()-new Date(q.profileData.joinDate).getTime()).slice(0,5);m=f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cei mai vechi investitori"}),F.length>0?f.jsx("ol",{className:"list-decimal list-inside space-y-2",children:F.map(G=>f.jsxs("li",{children:[f.jsx("span",{className:"font-semibold",children:G.name})," - membru din ",or(G.profileData.joinDate,{year:"numeric",month:"long",day:"numeric"})]},G.id))}):f.jsx("p",{children:"Nu exist date suficiente."})]});break;case"Strategii":m=f.jsx("p",{children:"Informaii despre strategii vor fi disponibile n curnd."});break;case"Comunitate":const H=(e==null?void 0:e.users)||[],L=new Date;L.setDate(L.getDate()-30);const k=H.filter(G=>new Date(G.profileData.joinDate)>=L).length;m=f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sumar Comunitate"}),H.length>0?f.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[f.jsxs("li",{children:["Total utilizatori nregistrai: ",f.jsx("span",{className:"font-bold",children:H.length})]}),f.jsxs("li",{children:["Utilizatori noi (ultimele 30 zile): ",f.jsx("span",{className:"font-bold",children:k})]}),f.jsxs("li",{children:["Investitori activi curent: ",f.jsx("span",{className:"font-bold",children:((w=e==null?void 0:e.globalStats)==null?void 0:w.activeInvestors)||0})]})]}):f.jsx("p",{children:"Nu exist date suficiente."})]});break;default:m=f.jsx("p",{children:`Informaii pentru categoria "${p}" vor fi disponibile n curnd.`})}else{let v="";switch(d){case"topInvestor":g="Investitorul Lunii",v=`Felicitri lui ${o.topInvestor.name} pentru obinerea celui mai mare profit total: ${_t(o.topInvestor.profit)}. O performan remarcabil!`;break;case"recordProfit":g="Profit Record Zilnic",v=`Cel mai mare profit nregistrat ntr-o singur zi este de ${_t(o.recordProfit.amount)}, realizat pe data de ${or(o.recordProfit.date)}.`;break;case"highRoller":g="High Roller",v=`Cea mai mare investiie singular a fost fcut de ${o.highRoller.name}, n valoare de ${_t(o.highRoller.amount)}.`;break;case"winningStreak":g="Serie de Victorii",v=`Cea mai lung serie de zile consecutive pe profit a fost de ${o.winningStreak.days} zile.`;break;case"platformMilestone":g="Milestone Platform",v=`Am atins ${o.platformMilestone.investors} investitori activi din obiectivul de ${o.platformMilestone.target}. Mulumim comunitii!`;break;case"tip":g="Sfatul Sptmnii",v='"Disciplina este podul dintre obiective i realizri. Rmi consecvent n strategia ta, chiar i atunci cnd emoiile ncearc s preia controlul." - Admin';break;case"topAmbassador":g="Ambasador Top",v="Informaii despre cel mai bun ambasador vor fi disponibile n curnd.";break;case"veteranInvestor":g="Investitor Veteran",v="Informaii despre cei mai longevivi investitori vor fi disponibile n curnd.";break}m=f.jsx("p",{children:v})}s({title:g,body:m}),i(!0)};X.useEffect(()=>{if(!window.matchMedia("(min-width: 769px)").matches)return;Pi.registerPlugin(Yp),document.body.classList.add("trophy-page-body");const d=t.current;if(!d)return;const p=d.querySelector("#gridContainer"),g=d.querySelector("#centerCard"),m=d.querySelector("#categoriesMenu"),w=d.querySelectorAll(".trophy-category"),v=d.querySelectorAll(".trophy-logo .trophy-char"),b=d.querySelector(".trophy-logo .v-char"),_=d.querySelector(".trophy-logo .s-char"),C=d.querySelector(".trophy-logo .trophy-spacer");if(!p||!g||!m||!b||!_||!C)return;Yp.create("customEase","0.86,0,0.07,1");const T=.64,S=Pi.timeline({paused:!0}),O=Pi.timeline({paused:!0});S.to(".trophy-card-1",{top:0,left:0,xPercent:0,yPercent:0,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.05},0).to(".trophy-card-2",{top:0,left:"50%",xPercent:-50,yPercent:0,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.1},0).to(".trophy-card-3",{top:0,left:"100%",xPercent:-100,yPercent:0,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.15},0).to(".trophy-card-4",{top:"50%",left:0,xPercent:0,yPercent:-50,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.2},0).to(".trophy-card-6",{top:"50%",left:"100%",xPercent:-100,yPercent:-50,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.25},0).to(".trophy-card-7",{top:"100%",left:0,xPercent:0,yPercent:-100,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.3},0).to(".trophy-card-8",{top:"100%",left:"50%",xPercent:-50,yPercent:-100,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.35},0).to(".trophy-card-9",{top:"100%",left:"100%",xPercent:-100,yPercent:-100,opacity:1,scale:1,visibility:"visible",ease:"customEase",duration:T,delay:.4},0);const j=[1,2,3,4,6,7,8,9,10,11,12,13];j.forEach((k,G)=>{const q=d.querySelector(`.trophy-char[data-index="${k}"]`);q&&O.to(q,{opacity:0,filter:"blur(8px)",duration:.15},G*.05)}),C&&O.to(C,{opacity:0,filter:"blur(8px)",duration:.15},j.length*.05),_&&b&&O.to(_,{x:()=>-(_.getBoundingClientRect().left-b.getBoundingClientRect().right),duration:.5},j.length*.05+.05),Pi.set(w,{opacity:0,y:20,visibility:"hidden"}),Pi.set(v,{opacity:1,filter:"blur(0px)"});let U=!1;const P=()=>Pi.timeline().staggerTo(Array.from(w).reverse(),.64,{opacity:1,y:0,visibility:"visible",ease:"customEase",stagger:.08}),F=()=>Pi.timeline().staggerTo(w,.48,{opacity:0,y:20,visibility:"hidden",ease:"customEase",stagger:.05}),H=()=>{U||(U=!0,r(!0),S.play(),P(),O.play())},L=()=>{U&&(U=!1,r(!1),S.reverse(),F(),O.reverse())};return g.addEventListener("mouseenter",H),p.addEventListener("mouseleave",L),m.addEventListener("mouseenter",H),m.addEventListener("mouseleave",L),()=>{document.body.classList.remove("trophy-page-body"),Pi.globalTimeline.clear(),S.kill(),O.kill(),r&&r(!1),g.removeEventListener("mouseenter",H),p.removeEventListener("mouseleave",L),m.removeEventListener("mouseenter",H),m.removeEventListener("mouseleave",L)}},[e,r]);const c=["Investitori","Profituri","Recomandri","Mize Record","Milestones","Longevitate","Strategii","Comunitate"];return f.jsxs("div",{ref:t,className:"w-full h-full flex justify-center items-center",children:[f.jsxs("div",{className:"trophy-grid-container",id:"gridContainer",children:[f.jsxs("div",{className:"trophy-card trophy-card-1",onClick:()=>l("topInvestor"),children:[f.jsx("img",{src:"https://i.ibb.co/jZPj0jgt/Chat-GPT-Image-20-sept-2025-20-30-06.png",alt:"Top Investor"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"INVESTITORUL LUNII"}),f.jsx("p",{children:o.topInvestor.name})]})]}),f.jsxs("div",{className:"trophy-card trophy-card-2",onClick:()=>l("recordProfit"),children:[f.jsx("img",{src:"https://i.ibb.co/21c9xkV0/Chat-GPT-Image-20-sept-2025-20-39-47.png",alt:"Record Profit"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"PROFIT RECORD"}),f.jsx("p",{children:_t(o.recordProfit.amount)})]})]}),f.jsxs("div",{className:"trophy-card trophy-card-3",onClick:()=>l("platformMilestone"),children:[f.jsx("img",{src:"https://i.ibb.co/HLKQmKJn/Chat-GPT-Image-20-sept-2025-20-42-04.png",alt:"Platform Milestone"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"MILESTONE PLATFORM"}),f.jsxs("p",{children:[o.platformMilestone.investors," Investitori Activi"]})]})]}),f.jsxs("div",{className:"trophy-card trophy-card-4",onClick:()=>l("topAmbassador"),children:[f.jsx("img",{src:"https://i.ibb.co/QvkkMLQ7/Chat-GPT-Image-20-sept-2025-20-43-20.png",alt:"Top Referral"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"AMBASADOR TOP"}),f.jsx("p",{children:"Coming Soon..."})]})]}),f.jsxs("div",{className:"trophy-card trophy-card-5",id:"centerCard",children:[f.jsx("img",{src:"https://i.ibb.co/jZfMTLGq/Chat-GPT-Image-20-sept-2025-20-44-10.png",alt:"Trophy Room Center",id:"centerImage"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:M.trophyRoom}),f.jsx("p",{children:"Exploreaz realizrile comunitii"})]})]}),f.jsxs("div",{className:"trophy-card trophy-card-6",onClick:()=>l("highRoller"),children:[f.jsx("img",{src:"https://i.ibb.co/Xxbh26T7/Chat-GPT-Image-20-sept-2025-20-50-27.png",alt:"High Roller"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"HIGH ROLLER"}),f.jsx("p",{children:o.highRoller.name})]})]}),f.jsx("div",{className:"trophy-card trophy-card-7",id:"flipCard",onClick:()=>l("tip"),children:f.jsxs("div",{className:"trophy-card-inner",id:"cardInner",children:[f.jsxs("div",{className:"trophy-card-front",children:[f.jsx("img",{src:"https://i.ibb.co/3m1Q5B9r/Chat-GPT-Image-20-sept-2025-20-46-19.png",alt:"Pro Tip"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"SFATUL SPTMNII"}),f.jsx("p",{children:"nelepciune de la admin"})]})]}),f.jsx("div",{className:"trophy-card-back",children:f.jsxs("div",{className:"trophy-quote",children:[f.jsx("p",{children:'"Disciplina este podul dintre obiective i realizri. Rmi consecvent n strategia ta, chiar i atunci cnd emoiile ncearc s preia controlul."'}),f.jsx("span",{className:"trophy-author",children:"Admin"})]})})]})}),f.jsxs("div",{className:"trophy-card trophy-card-8",onClick:()=>l("veteranInvestor"),children:[f.jsx("img",{src:"https://i.ibb.co/rrxwJhf/Chat-GPT-Image-20-sept-2025-20-47-43.png",alt:"Veteran Investor"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"INVESTITOR VETERAN"}),f.jsx("p",{children:"Coming Soon..."})]})]}),f.jsxs("div",{className:"trophy-card trophy-card-9",onClick:()=>l("winningStreak"),children:[f.jsx("img",{src:"https://i.ibb.co/fzCtk8MB/Chat-GPT-Image-20-sept-2025-20-48-39.png",alt:"Winning Streak"}),f.jsxs("div",{className:"trophy-card-content",children:[f.jsx("h2",{children:"SERIE DE VICTORII"}),f.jsxs("p",{children:[o.winningStreak.days," Zile Consecutive"]})]})]})]}),f.jsx("div",{className:"trophy-categories",id:"categoriesMenu",children:c.map((d,p)=>f.jsx("div",{className:"trophy-category",onClick:()=>l("category",d),children:d},p))}),f.jsx(un,{to:"/",className:"trophy-logo",id:"logoContainer",children:f.jsxs("div",{className:"trophy-logo-wrapper",children:[f.jsx("span",{className:"trophy-char v-char","data-index":"0",children:"S"}),f.jsx("span",{className:"trophy-char","data-index":"1",children:"A"}),f.jsx("span",{className:"trophy-char","data-index":"2",children:"L"}),f.jsx("span",{className:"trophy-char","data-index":"3",children:"A"}),f.jsx("span",{className:"trophy-char trophy-spacer","data-index":"4",children:" "}),f.jsx("span",{className:"trophy-char s-char","data-index":"5",children:"T"}),f.jsx("span",{className:"trophy-char","data-index":"6",children:"R"}),f.jsx("span",{className:"trophy-char","data-index":"7",children:"O"}),f.jsx("span",{className:"trophy-char","data-index":"8",children:"F"}),f.jsx("span",{className:"trophy-char","data-index":"9",children:"E"}),f.jsx("span",{className:"trophy-char","data-index":"10",children:"E"}),f.jsx("span",{className:"trophy-char","data-index":"11",children:"L"}),f.jsx("span",{className:"trophy-char","data-index":"12",children:"O"}),f.jsx("span",{className:"trophy-char","data-index":"13",children:"R"})]})}),f.jsx(un,{to:"/desert-oasis",className:"trophy-mysterious-message",id:"mysteriousMessage",children:"Numele tu poate fi urmtorul..."}),f.jsx("div",{className:"trophy-interactive-area",id:"interactiveArea"}),f.jsxs(SA,{isOpen:n,onClose:()=>i(!1),title:a.title,children:[f.jsx("div",{className:"text-neutral-700 dark:text-neutral-200",children:a.body}),f.jsx("div",{className:"mt-6 flex justify-end",children:f.jsx(ct,{onClick:()=>i(!1),children:"nchide"})})]})]})},Fce=()=>{const{setSidebarForceHidden:t}=yB(),e=X.useRef(null);return X.useEffect(()=>{t(!0);const r=e.current;if(!r)return;const n=[],i=(s,o)=>{const l=document.createElement("div");l.classList.add(s),l.style.left=`${Math.random()*window.innerWidth}px`,l.style.top=`${window.innerHeight*.5+Math.random()*window.innerHeight*.5}px`,s==="sand-particle"&&(l.style.animationDelay=`${Math.random()*8}s`),r.appendChild(l),setTimeout(()=>l.remove(),o)};n.push(window.setInterval(()=>i("sparkle",2500),2e3)),n.push(window.setInterval(()=>i("sand-particle",8e3),100)),n.push(window.setInterval(()=>i("mote",6e3),500));const a=s=>{const o=s.clientX/window.innerWidth-.5,l=s.clientY/window.innerHeight-.5;r.style.setProperty("--mouse-x",o.toString()),r.style.setProperty("--mouse-y",l.toString())};return document.addEventListener("mousemove",a),()=>{t(!1),n.forEach(clearInterval),document.removeEventListener("mousemove",a),r.querySelectorAll(".sparkle, .sand-particle, .mote").forEach(s=>s.remove())}},[t]),f.jsxs("div",{ref:e,id:"desert-oasis-page-container",children:[f.jsx(un,{to:"/",className:"absolute top-4 right-4 z-20 p-2 bg-black/20 rounded-full text-white hover:bg-black/40 transition-colors","aria-label":"napoi la pagina principal",children:f.jsx(J1,{className:"h-6 w-6"})}),f.jsxs("div",{className:"scene",children:[f.jsx("div",{className:"sun"}),f.jsx("div",{className:"sand back"}),f.jsx("div",{className:"pyramid left"}),f.jsx("div",{className:"pyramid right"}),f.jsx("div",{className:"sand"}),f.jsx("div",{className:"foreground"}),f.jsx("div",{className:"haze"}),f.jsx("div",{className:"heat-wave"}),f.jsx("div",{className:"cloud-wrapper",style:{top:"10%",animationDuration:"45s"},children:f.jsx("div",{className:"cloud"})}),f.jsx("div",{className:"cloud-wrapper",style:{top:"15%",animationDuration:"60s",animationDelay:"-10s"},children:f.jsx("div",{className:"cloud"})}),f.jsx("div",{className:"cloud-wrapper",style:{top:"20%",animationDuration:"35s",animationDelay:"-5s"},children:f.jsx("div",{className:"cloud"})}),f.jsx("div",{className:"cloud-wrapper",style:{top:"8%",animationDuration:"50s",animationDelay:"-20s"},children:f.jsx("div",{className:"cloud"})}),f.jsx("div",{className:"arboles",style:{left:"20%",bottom:"20%"},children:f.jsxs("div",{className:"hojas",children:[f.jsx("div",{className:"hojas1"}),f.jsx("div",{className:"hojas2"}),f.jsx("div",{className:"hojas3"}),f.jsx("div",{className:"hojas4"}),f.jsx("div",{className:"hojas5"}),f.jsx("div",{className:"hojas6"})]})}),f.jsx("div",{className:"arboles",style:{left:"70%",bottom:"22%"},children:f.jsxs("div",{className:"hojas",children:[f.jsx("div",{className:"hojas1"}),f.jsx("div",{className:"hojas2"}),f.jsx("div",{className:"hojas3"}),f.jsx("div",{className:"hojas4"}),f.jsx("div",{className:"hojas5"}),f.jsx("div",{className:"hojas6"})]})}),f.jsxs("div",{className:"caravan",children:[f.jsxs("div",{className:"camel",style:{left:0,opacity:1,visibility:"visible"},children:[f.jsx("div",{className:"camel-body"}),f.jsx("div",{className:"camel-hump"}),f.jsx("div",{className:"camel-neck"}),f.jsxs("div",{className:"camel-head",children:[f.jsx("div",{className:"camel-ear"}),f.jsx("div",{className:"camel-ear right"}),f.jsx("div",{className:"camel-jaw"}),f.jsx("div",{className:"camel-eye"})]}),f.jsx("div",{className:"camel-tail"}),f.jsx("div",{className:"camel-leg front-left"}),f.jsx("div",{className:"camel-leg front-right"}),f.jsx("div",{className:"camel-leg back-left"}),f.jsx("div",{className:"camel-leg back-right"})]}),f.jsxs("div",{className:"camel small",style:{left:"80px",opacity:1,visibility:"visible"},children:[f.jsx("div",{className:"camel-body"}),f.jsx("div",{className:"camel-hump"}),f.jsx("div",{className:"camel-neck"}),f.jsxs("div",{className:"camel-head",children:[f.jsx("div",{className:"camel-ear"}),f.jsx("div",{className:"camel-ear right"}),f.jsx("div",{className:"camel-jaw"}),f.jsx("div",{className:"camel-eye"})]}),f.jsx("div",{className:"camel-tail"}),f.jsx("div",{className:"camel-leg front-left"}),f.jsx("div",{className:"camel-leg front-right"}),f.jsx("div",{className:"camel-leg back-left"}),f.jsx("div",{className:"camel-leg back-right"})]})]})]})]})},Ice=()=>{const{setSidebarForceHidden:t}=yB(),e=X.useRef(null),r=X.useRef({x:-100,y:-100});return X.useEffect(()=>{t(!0);const n=e.current;if(!n)return;const i=n.getContext("2d");if(!i)return;let a=n.width=window.innerWidth,s=n.height=window.innerHeight;const o="0123456789$",l=16,c=Math.floor(a/l),d=[];for(let v=0;v<c;v++)d[v]=1;const p=v=>{r.current={x:v.clientX,y:v.clientY}};document.addEventListener("mousemove",p);const g=()=>{a=n.width=window.innerWidth,s=n.height=window.innerHeight};window.addEventListener("resize",g);let m;const w=()=>{i.fillStyle="rgba(0, 0, 0, 0.04)",i.fillRect(0,0,a,s),i.fillStyle="#0f0",i.font=`${l}px monospace`;for(let v=0;v<d.length;v++){const b=o[Math.floor(Math.random()*o.length)],_=v*l,C=d[v]*l,T=_-r.current.x,S=C-r.current.y;Math.sqrt(T*T+S*S)<50?(i.fillStyle="#fff",i.font=`${l+4}px monospace`):(i.fillStyle="#0f0",i.font=`${l}px monospace`),i.fillText(b,_,C),C>s&&Math.random()>.975&&(d[v]=0),d[v]++}m=requestAnimationFrame(w)};return w(),()=>{t(!1),cancelAnimationFrame(m),document.removeEventListener("mousemove",p),window.removeEventListener("resize",g)}},[t]),f.jsxs("div",{id:"data-stream-page-container",children:[f.jsx("canvas",{ref:e,id:"data-stream-canvas"}),f.jsx(un,{to:"/",className:"absolute top-4 right-4 z-20 p-2 bg-white/10 rounded-full text-white hover:bg-white/20 backdrop-blur-sm transition-colors","aria-label":"napoi la pagina principal",children:f.jsx(J1,{className:"h-6 w-6"})})]})},Dce=()=>f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 text-center animate-fade-in",children:[f.jsx("div",{className:"flex-grow flex flex-col items-center justify-center w-full",children:f.jsxs(Pt,{className:"max-w-lg w-full",icon:f.jsx(h1,{className:"h-16 w-16 text-red-500 mx-auto mb-6"}),children:[f.jsx("h1",{className:"text-5xl font-bold text-neutral-800 dark:text-neutral-100 mb-4",children:"404"}),f.jsx("h2",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-200 mb-3",children:"Oops! Pagina nu a fost gsit."}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 mb-8",children:"Se pare c pagina pe care o caui nu exist sau a fost mutat. Te rugm s verifici adresa URL sau s te ntorci la pagina principal."}),f.jsx(un,{to:"/",children:f.jsx(ct,{variant:"primary",size:"lg",children:M.home})})]})}),f.jsx(MB,{})," "]}),Lce=({type:t})=>{switch(t){case Je.SUCCESS:return f.jsx(rl,{className:"h-6 w-6 text-green-500"});case Je.ERROR:return f.jsx(Al,{className:"h-6 w-6 text-red-500"});case Je.INFO:return f.jsx(uw,{className:"h-6 w-6 text-blue-500"});case Je.WARNING:return f.jsx(h1,{className:"h-6 w-6 text-yellow-500"});default:return null}},Uce=({notification:t,onDismiss:e})=>f.jsx("div",{className:"max-w-sm w-full bg-white dark:bg-neutral-800 shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden transition-all duration-300 ease-in-out animate-fade-in",children:f.jsx("div",{className:"p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Lce,{type:t.type})}),f.jsxs("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:[f.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:t.type.charAt(0).toUpperCase()+t.type.slice(1).toLowerCase()}),f.jsx("p",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-300",children:t.message})]}),f.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:f.jsxs("button",{onClick:()=>e(t.id),className:"inline-flex text-neutral-400 hover:text-neutral-500 dark:text-neutral-500 dark:hover:text-neutral-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[f.jsx("span",{className:"sr-only",children:"Close"}),f.jsx(J1,{className:"h-5 w-5"})]})})]})})}),kce=()=>{const{notifications:t,removeNotification:e}=gi();return t.length?f.jsx("div",{"aria-live":"assertive",className:"fixed inset-0 flex flex-col items-end px-4 py-6 space-y-4 pointer-events-none sm:p-6 sm:items-end z-[100]",children:t.map(r=>f.jsx(Uce,{notification:r,onDismiss:e},r.id))}):null},Oce=()=>{const[t,e]=X.useState(null),[r,n]=X.useState(!1);X.useEffect(()=>{const a=o=>{const l=o;l.preventDefault(),e(l),n(!0),console.log("beforeinstallprompt captured by React component.")};window.addEventListener("beforeinstallprompt",a);const s=()=>{n(!1),e(null),console.log("PWA installed via React component.")};return window.addEventListener("appinstalled",s),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",s)}},[]);const i=async()=>{if(!t)return;t.prompt();const{outcome:a}=await t.userChoice;console.log(`User response to the install prompt: ${a}`),console.log(a==="accepted"?"User accepted the A2HS prompt":"User dismissed the A2HS prompt"),e(null),n(!1)};return r?f.jsx("div",{className:"fixed bottom-5 right-5 z-50 animate-fade-in",children:f.jsx(ct,{onClick:i,variant:"primary",size:"md",leftIcon:f.jsx(IB,{className:"h-5 w-5"}),children:M.installApp})}):null},Lf=({id:t,label:e,checked:r,onChange:n,disabled:i=!1})=>f.jsxs("div",{className:"flex items-center justify-between py-2 sm:flex-col sm:items-start sm:justify-start md:flex-row md:items-center",children:[f.jsx("span",{className:`text-sm font-semibold mb-2 sm:mb-2 md:mb-0 ${i?"text-neutral-400 dark:text-neutral-500":"text-neutral-800 dark:text-neutral-100"}`,children:e}),f.jsxs("label",{htmlFor:t,className:`relative inline-flex items-center ${i?"cursor-not-allowed":"cursor-pointer"}`,children:[f.jsx("input",{type:"checkbox",id:t,className:"sr-only peer",checked:r,onChange:n,disabled:i}),f.jsx("div",{className:`w-11 h-6 rounded-full peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-emerald-300 dark:peer-focus:ring-emerald-800 transition-colors duration-300 ${i?"bg-neutral-200 dark:bg-neutral-600":"peer-checked:bg-emerald-500 bg-neutral-200 dark:bg-neutral-600"}`}),f.jsx("span",{className:"absolute left-1 top-1 h-4 w-4 rounded-full bg-white transition-transform duration-300 peer-checked:translate-x-5"})]})]}),Uv=({title:t,children:e,toggleContent:r,isOpen:n,onToggle:i})=>f.jsxs("div",{className:"border-b border-neutral-200 dark:border-neutral-700 last:border-b-0",children:[f.jsxs("button",{onClick:i,className:"w-full flex justify-between items-center p-3 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors","aria-expanded":n,children:[f.jsx("span",{className:"font-semibold text-neutral-800 dark:text-neutral-100",children:t}),f.jsxs("div",{className:"flex items-center space-x-4",children:[r,n?f.jsx(N0,{className:"h-5 w-5 text-neutral-500"}):f.jsx(T0,{className:"h-5 w-5 text-neutral-500"})]})]}),n&&f.jsx("div",{className:"p-3 text-sm text-neutral-600 dark:text-neutral-300 bg-neutral-50 dark:bg-neutral-700/30",children:e})]}),Rce=()=>{const[t,e]=X.useState(!1),[r,n]=X.useState("consent"),[i,a]=X.useState(null),{user:s}=dn(),{updateUserCookieConsent:o}=An(),[l,c]=X.useState({necessary:!0,preferences:!0,statistics:!0,marketing:!0});X.useEffect(()=>{const C=setTimeout(()=>{localStorage.getItem("cookie_consent")||e(!0)},100);return()=>clearTimeout(C)},[]);const d=C=>{const T={...C,timestamp:new Date().toISOString()};localStorage.setItem("cookie_consent",JSON.stringify(T)),s&&o&&o(s.id,T),e(!1)},p=C=>{c(T=>({...T,[C]:!T[C]}))},g=()=>{d({preferences:!1,statistics:!1,marketing:!1})},m=()=>{const{necessary:C,...T}=l;d(T)},w=()=>{const C={preferences:!0,statistics:!0,marketing:!0};c({...l,...C}),d(C)};if(!t)return null;const v=()=>f.jsxs(f.Fragment,{children:[f.jsx("h2",{id:"cookie-consent-title",className:"text-xl font-bold text-neutral-900 dark:text-neutral-50 mb-2",children:"Acest site web folosete cookie-uri"}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 mb-4",children:"Pentru a v oferi o experien mai bun n utilizarea serviciilor noastre, folosim cookie-uri pentru analiza datelor i funcionalitatea corespunztoare a site-ului."}),f.jsx("div",{className:"my-4 py-2",children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 sm:divide-x sm:divide-neutral-200 sm:dark:divide-neutral-700",children:[f.jsx("div",{className:"px-2 sm:pr-4",children:f.jsx(Lf,{id:"necessary_consent",label:"Necesare",checked:!0,disabled:!0,onChange:()=>{}})}),f.jsx("div",{className:"px-2 sm:px-4",children:f.jsx(Lf,{id:"preferences_consent",label:"Preferine",checked:l.preferences,onChange:()=>p("preferences")})}),f.jsx("div",{className:"px-2 sm:px-4",children:f.jsx(Lf,{id:"statistics_consent",label:"Statistici",checked:l.statistics,onChange:()=>p("statistics")})}),f.jsx("div",{className:"px-2 sm:pl-4",children:f.jsx(Lf,{id:"marketing_consent",label:"Marketing",checked:l.marketing,onChange:()=>p("marketing")})})]})})]}),b=()=>f.jsxs("div",{className:"space-y-1",children:[f.jsxs(Uv,{title:"Necesare",isOpen:i==="necessary",onToggle:()=>a(i==="necessary"?null:"necessary"),toggleContent:f.jsx(Lf,{id:"necessary_details",label:"",checked:!0,disabled:!0,onChange:()=>{}}),children:[f.jsx("p",{children:"Cookie-urile necesare ajut la a face un site web utilizabil, permind funcii de baz precum navigarea n pagin i accesul la zonele securizate ale site-ului. Site-ul nu poate funciona corespunztor fr aceste cookie-uri."}),f.jsx("div",{className:"overflow-x-auto mt-2",children:f.jsxs("table",{className:"w-full text-left text-xs",children:[f.jsx("thead",{className:"text-neutral-500 dark:text-neutral-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-1 font-semibold",children:"Cookie"}),f.jsx("th",{className:"p-1 font-semibold",children:"Furnizor"}),f.jsx("th",{className:"p-1 font-semibold",children:"Scop"}),f.jsx("th",{className:"p-1 font-semibold",children:"Expirare"})]})}),f.jsxs("tbody",{children:[f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"session_id"}),f.jsx("td",{className:"p-1",children:"Banca Comun"}),f.jsx("td",{className:"p-1",children:"Menine sesiunea utilizatorului dup autentificare."}),f.jsx("td",{className:"p-1",children:"Sesiune"})]}),f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"cookie_consent"}),f.jsx("td",{className:"p-1",children:"Banca Comun"}),f.jsx("td",{className:"p-1",children:"Stocheaz starea consimmntului pentru cookie-uri al utilizatorului pentru domeniul curent."}),f.jsx("td",{className:"p-1",children:"1 an"})]})]})]})})]}),f.jsxs(Uv,{title:"Preferine",isOpen:i==="preferences",onToggle:()=>a(i==="preferences"?null:"preferences"),toggleContent:f.jsx(Lf,{id:"preferences_details",label:"",checked:l.preferences,onChange:()=>p("preferences")}),children:[f.jsx("p",{children:"Cookie-urile de preferin permit unui site web s rein informaii care modific modul n care site-ul se comport sau arat, precum limba preferat sau regiunea n care v aflai."}),f.jsx("div",{className:"overflow-x-auto mt-2",children:f.jsxs("table",{className:"w-full text-left text-xs",children:[f.jsx("thead",{className:"text-neutral-500 dark:text-neutral-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-1 font-semibold",children:"Cookie"}),f.jsx("th",{className:"p-1 font-semibold",children:"Furnizor"}),f.jsx("th",{className:"p-1 font-semibold",children:"Scop"}),f.jsx("th",{className:"p-1 font-semibold",children:"Expirare"})]})}),f.jsxs("tbody",{children:[f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"theme"}),f.jsx("td",{className:"p-1",children:"Banca Comun"}),f.jsx("td",{className:"p-1",children:"Salveaz schema de culori preferat a utilizatorului (luminos/ntunecat)."}),f.jsx("td",{className:"p-1",children:"1 an"})]}),f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"accentPalette"}),f.jsx("td",{className:"p-1",children:"Banca Comun"}),f.jsx("td",{className:"p-1",children:"Stocheaz culoarea de accent selectat de utilizator pentru interfa."}),f.jsx("td",{className:"p-1",children:"1 an"})]})]})]})})]}),f.jsxs(Uv,{title:"Statistici",isOpen:i==="statistics",onToggle:()=>a(i==="statistics"?null:"statistics"),toggleContent:f.jsx(Lf,{id:"statistics_details",label:"",checked:l.statistics,onChange:()=>p("statistics")}),children:[f.jsx("p",{children:"Cookie-urile de statistic ajut proprietarii de site-uri web s neleag cum interacioneaz vizitatorii cu site-urile web prin colectarea i raportarea anonim a informaiilor."}),f.jsx("div",{className:"overflow-x-auto mt-2",children:f.jsxs("table",{className:"w-full text-left text-xs",children:[f.jsx("thead",{className:"text-neutral-500 dark:text-neutral-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-1 font-semibold",children:"Cookie"}),f.jsx("th",{className:"p-1 font-semibold",children:"Furnizor"}),f.jsx("th",{className:"p-1 font-semibold",children:"Scop"}),f.jsx("th",{className:"p-1 font-semibold",children:"Expirare"})]})}),f.jsxs("tbody",{children:[f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"_ga"}),f.jsx("td",{className:"p-1",children:"Google"}),f.jsx("td",{className:"p-1",children:"nregistreaz un ID unic care este utilizat pentru a genera date statistice despre modul n care vizitatorul folosete site-ul."}),f.jsx("td",{className:"p-1",children:"2 ani"})]}),f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"_gid"}),f.jsx("td",{className:"p-1",children:"Google"}),f.jsx("td",{className:"p-1",children:"Folosit pentru a distinge utilizatorii n scopuri statistice."}),f.jsx("td",{className:"p-1",children:"24 de ore"})]})]})]})})]}),f.jsxs(Uv,{title:"Marketing",isOpen:i==="marketing",onToggle:()=>a(i==="marketing"?null:"marketing"),toggleContent:f.jsx(Lf,{id:"marketing_details",label:"",checked:l.marketing,onChange:()=>p("marketing")}),children:[f.jsx("p",{children:"Cookie-urile de marketing sunt utilizate pentru a urmri vizitatorii pe site-uri web. Intenia este de a afia reclame relevante i antrenante pentru utilizatorul individual i, prin urmare, mai valoroase pentru editori i agenii de publicitate tere."}),f.jsx("div",{className:"overflow-x-auto mt-2",children:f.jsxs("table",{className:"w-full text-left text-xs",children:[f.jsx("thead",{className:"text-neutral-500 dark:text-neutral-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-1 font-semibold",children:"Cookie"}),f.jsx("th",{className:"p-1 font-semibold",children:"Furnizor"}),f.jsx("th",{className:"p-1 font-semibold",children:"Scop"}),f.jsx("th",{className:"p-1 font-semibold",children:"Expirare"})]})}),f.jsxs("tbody",{children:[f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"_fbp"}),f.jsx("td",{className:"p-1",children:"Facebook"}),f.jsx("td",{className:"p-1",children:"Folosit de Facebook pentru a livra o serie de produse publicitare, cum ar fi licitarea n timp real de la ageni de publicitate teri."}),f.jsx("td",{className:"p-1",children:"3 luni"})]}),f.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-700",children:[f.jsx("td",{className:"p-1 font-mono",children:"IDE"}),f.jsx("td",{className:"p-1",children:"Google"}),f.jsx("td",{className:"p-1",children:"Folosit de Google DoubleClick pentru a nregistra i raporta aciunile utilizatorului n vederea msurrii eficacitii reclamelor."}),f.jsx("td",{className:"p-1",children:"1 an"})]})]})]})})]})]}),_=()=>f.jsxs("div",{className:"space-y-4 text-sm text-neutral-600 dark:text-neutral-300",children:[f.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"Despre Cookie-uri pe Acest Site"}),f.jsx("p",{children:"Cookie-urile sunt fiiere text mici care sunt plasate pe dispozitivul dvs. de ctre site-urile web pe care le vizitai. Acestea sunt utilizate pe scar larg pentru a face site-urile web s funcioneze, sau s funcioneze mai eficient, precum i pentru a furniza informaii proprietarilor site-ului."}),f.jsx("p",{children:'Folosim cookie-uri pentru a mbunti experiena dvs. de navigare, pentru a servi coninut personalizat i pentru a analiza traficul nostru. Fcnd clic pe "Permite toate", v dai consimmntul pentru utilizarea cookie-urilor. Putei schimba opiunile de consimmnt n orice moment din fila "Detalii".'}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-neutral-800 dark:text-neutral-200",children:"Operator de Date"}),f.jsx("p",{children:"Banca Comun de Investiii"})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-neutral-800 dark:text-neutral-200",children:"Mai Multe Informaii"}),f.jsxs("p",{children:["Pentru mai multe informaii despre modul n care gestionm datele dvs., v rugm s citii ",f.jsx("a",{href:"#/privacy",className:"text-emerald-500 hover:underline",children:"Politica noastr de Confidenialitate"})," (fictiv)."]})]}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Consimmntul dvs. se aplic domeniului: ",window.location.hostname]})]});return f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-end p-2 sm:p-4 animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":"cookie-consent-title",children:f.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-neutral-800 rounded-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh] sm:max-h-[85vh]",children:[f.jsxs("header",{className:"p-4 flex justify-between items-center border-b border-neutral-200 dark:border-neutral-700 flex-wrap gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:"h-8 w-8 text-emerald-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622A11.99 11.99 0 0018.402 6a11.959 11.959 0 01-2.036-1.286m0 0A11.953 11.953 0 0112 2.25c-2.646 0-5.063.82-7.036 2.214z"})}),f.jsx("span",{className:"font-bold text-lg text-neutral-800 dark:text-neutral-100",children:"Banca Comun"})]}),f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Sistem oferit de Usercentrics"})]}),f.jsx("nav",{className:"border-b border-neutral-200 dark:border-neutral-700 px-4",children:f.jsxs("div",{className:"flex space-x-8",children:[f.jsx("button",{onClick:()=>n("consent"),className:`py-3 px-1 border-b-2 font-semibold text-sm focus:outline-none ${r==="consent"?"border-emerald-500 text-emerald-500":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:"Consimmnt"}),f.jsx("button",{onClick:()=>n("details"),className:`py-3 px-1 border-b-2 font-semibold text-sm focus:outline-none ${r==="details"?"border-emerald-500 text-emerald-500":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:"Detalii"}),f.jsx("button",{onClick:()=>n("about"),className:`py-3 px-1 border-b-2 font-semibold text-sm focus:outline-none ${r==="about"?"border-emerald-500 text-emerald-500":"border-transparent text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:"Despre"})]})}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:f.jsxs("main",{className:"p-4 sm:p-6",children:[r==="consent"&&v(),r==="details"&&b(),r==="about"&&_()]})}),f.jsx("footer",{className:"p-4 bg-white dark:bg-neutral-800 border-t border-neutral-200 dark:border-neutral-700 flex flex-col sm:flex-row items-center justify-between gap-3",children:f.jsxs("div",{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-3",children:[f.jsx(ct,{variant:"outline",onClick:g,className:"w-full border-emerald-500 text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 focus:ring-emerald-400",children:"Refuz"}),f.jsx(ct,{variant:"outline",onClick:m,className:"w-full border-emerald-500 text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 focus:ring-emerald-400",children:"Permite selecia"}),f.jsx(ct,{variant:"primary",onClick:w,className:"w-full bg-emerald-500 hover:bg-emerald-600 focus:ring-emerald-400 text-white",children:"Permite toate"})]})})]})})};z0.register(...dO);const Mce=()=>{const{theme:t}=zo(),{user:e,loadingAuth:r}=dn();return X.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),r?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-neutral-100 dark:bg-neutral-900",children:f.jsx("div",{className:"p-6 rounded-lg shadow-xl bg-white dark:bg-neutral-800",children:f.jsx("p",{className:"text-lg font-semibold text-primary-600 dark:text-primary-400",children:M.loadingApp})})}):f.jsxs(f.Fragment,{children:[f.jsx(kce,{}),f.jsx(Oce,{}),f.jsx(Rce,{}),f.jsxs(A7,{children:[f.jsx(Lr,{path:"/login",element:e?f.jsx(To,{to:e.role===ar.ADMIN?"/admin/dashboard":"/user/dashboard"}):f.jsx(LQ,{})}),f.jsxs(Lr,{element:f.jsx(TQ,{}),children:[f.jsx(Lr,{path:"/",element:f.jsx(IQ,{})}),f.jsx(Lr,{path:"/cum-functioneaza",element:f.jsx(h9,{})}),f.jsx(Lr,{path:"/statistici",element:f.jsx(vO,{})}),f.jsx(Lr,{path:"/trophy-room",element:f.jsx(Nce,{})}),f.jsx(Lr,{path:"/desert-oasis",element:f.jsx(Fce,{})}),f.jsx(Lr,{path:"/data-stream",element:f.jsx(Ice,{})}),f.jsx(Lr,{path:"/notifications",element:e?f.jsx(hce,{}):f.jsx(To,{to:"/login"})}),f.jsx(Lr,{path:"/help",element:f.jsx(Qle,{})}),e&&e.role===ar.USER&&f.jsxs(f.Fragment,{children:[f.jsx(Lr,{path:"/user/dashboard",element:f.jsx(Qte,{})}),f.jsx(Lr,{path:"/user/investitii",element:f.jsx(Gte,{})}),f.jsx(Lr,{path:"/user/retrageri",element:f.jsx(Vte,{})}),f.jsx(Lr,{path:"/user/profil",element:f.jsx(Rle,{})}),f.jsx(Lr,{path:"/user/alerte",element:f.jsx(Mle,{})}),f.jsx(Lr,{path:"/user/reports",element:f.jsx(jle,{})}),f.jsx(Lr,{path:"/user/advanced-reports",element:f.jsx(Gle,{})}),f.jsx(Lr,{path:"/user/goals",element:f.jsx(Vle,{})}),f.jsx(Lr,{path:"/user/bets",element:f.jsx(Xle,{})}),f.jsx(Lr,{path:"/user/feedback",element:f.jsx(Hle,{})}),f.jsx(Lr,{path:"/user/referrals",element:f.jsx(zle,{})}),f.jsx(Lr,{path:"/user/backtest",element:f.jsx(dce,{})})]}),e&&e.role===ar.ADMIN&&f.jsxs(f.Fragment,{children:[f.jsx(Lr,{path:"/admin/dashboard",element:f.jsx(Hte,{})}),f.jsx(Lr,{path:"/admin/utilizatori",element:f.jsx(Jle,{})}),f.jsx(Lr,{path:"/admin/anunturi",element:f.jsx(Ace,{})}),f.jsx(Lr,{path:"/admin/date",element:f.jsx(tce,{})}),f.jsx(Lr,{path:"/admin/aprobari",element:f.jsx(ace,{})}),f.jsx(Lr,{path:"/admin/jurnal",element:f.jsx(oce,{})}),f.jsx(Lr,{path:"/admin/feedback",element:f.jsx(lce,{})}),f.jsx(Lr,{path:"/admin/settings",element:f.jsx(cce,{})}),f.jsx(Lr,{path:"/admin/calendar",element:f.jsx(uce,{})}),f.jsx(Lr,{path:"/admin/market-pulse",element:f.jsx(fce,{})}),f.jsx(Lr,{path:"/user/dashboard",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/profil",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/alerte",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/reports",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/advanced-reports",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/goals",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/bets",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/feedback",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/referrals",element:f.jsx(To,{to:"/admin/dashboard"})}),f.jsx(Lr,{path:"/user/backtest",element:f.jsx(To,{to:"/admin/dashboard"})})]}),!e&&f.jsxs(f.Fragment,{children:[f.jsx(Lr,{path:"/user/*",element:f.jsx(To,{to:"/login",replace:!0})}),f.jsx(Lr,{path:"/admin/*",element:f.jsx(To,{to:"/login",replace:!0})})]}),f.jsx(Lr,{path:"*",element:f.jsx(Dce,{})})]})]})]})},JM=document.getElementById("root");if(!JM)throw new Error("Could not find root element to mount to");const Pce=W1.createRoot(JM);Pce.render(f.jsx(Nr.StrictMode,{children:f.jsx(q1,{children:f.jsx(rx,{children:f.jsx(nx,{children:f.jsx(ix,{children:f.jsx(ax,{children:f.jsx(Mce,{})})})})})})}));"serviceWorker"in navigator&&window.addEventListener("load",async()=>{const t="/service-worker.js";try{const e=await fetch(t,{cache:"no-store"}),r=(e.headers.get("content-type")||"").toLowerCase();if(!e.ok||!r.includes("javascript")){console.warn("Service worker registration skipped due to unexpected response",{status:e.status,contentType:r});return}const n=await navigator.serviceWorker.register(t);console.log("ServiceWorker registration successful with scope: ",n.scope)}catch(e){console.log("ServiceWorker registration failed: ",e)}});export{jn as _,Qce as c,sU as g};